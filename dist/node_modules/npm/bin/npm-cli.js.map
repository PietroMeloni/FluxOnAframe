{"version":3,"sources":["../../../../node_modules/npm/bin/npm-cli.js"],"names":["WScript","echo","quit","process","title","unsupported","require","checkForBrokenNode","log","pause","info","checkForUnsupportedNode","path","npm","npmconf","errorHandler","configDefs","defs","shorthands","types","nopt","basename","argv","slice","splice","verbose","conf","remain","deref","command","shift","usage","version","console","exit","versions","on","unshift","_exit","load","er","config","get","checkVersion","pkg","notifier","update","latest","color","useColor","useUnicode","old","current","type","red","yellow","green","changelog","notify","message","name","cyan","commands","err","error","apply","arguments"],"mappings":"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","file":"npm-cli.js","sourcesContent":["\n;(function () { // wrapper in case we're in module_context mode\n  // windows: running \"npm blah\" in this folder will invoke WSH, not node.\n  /* global WScript */\n  if (typeof WScript !== 'undefined') {\n    WScript.echo(\n      'npm does not work when run\\n' +\n        'with the Windows Scripting Host\\n\\n' +\n        \"'cd' to a different directory,\\n\" +\n        \"or type 'npm.cmd <args>',\\n\" +\n        \"or type 'node npm <args>'.\"\n    )\n    WScript.quit(1)\n    return\n  }\n\n  process.title = 'npm'\n\n  var unsupported = require('../lib/utils/unsupported.js')\n  unsupported.checkForBrokenNode()\n\n  var log = require('npmlog')\n  log.pause() // will be unpaused when config is loaded.\n  log.info('it worked if it ends with', 'ok')\n\n  unsupported.checkForUnsupportedNode()\n\n  var path = require('path')\n  var npm = require('../lib/npm.js')\n  var npmconf = require('../lib/config/core.js')\n  var errorHandler = require('../lib/utils/error-handler.js')\n\n  var configDefs = npmconf.defs\n  var shorthands = configDefs.shorthands\n  var types = configDefs.types\n  var nopt = require('nopt')\n\n  // if npm is called as \"npmg\" or \"npm_g\", then\n  // run in global mode.\n  if (path.basename(process.argv[1]).slice(-1) === 'g') {\n    process.argv.splice(1, 1, 'npm', '-g')\n  }\n\n  log.verbose('cli', process.argv)\n\n  var conf = nopt(types, shorthands)\n  npm.argv = conf.argv.remain\n  if (npm.deref(npm.argv[0])) npm.command = npm.argv.shift()\n  else conf.usage = true\n\n  if (conf.version) {\n    console.log(npm.version)\n    return errorHandler.exit(0)\n  }\n\n  if (conf.versions) {\n    npm.command = 'version'\n    conf.usage = false\n    npm.argv = []\n  }\n\n  log.info('using', 'npm@%s', npm.version)\n  log.info('using', 'node@%s', process.version)\n\n  process.on('uncaughtException', errorHandler)\n\n  if (conf.usage && npm.command !== 'help') {\n    npm.argv.unshift(npm.command)\n    npm.command = 'help'\n  }\n\n  // now actually fire up npm and run the command.\n  // this is how to use npm programmatically:\n  conf._exit = true\n  npm.load(conf, function (er) {\n    if (er) return errorHandler(er)\n    if (\n      npm.config.get('update-notifier') &&\n      !unsupported.checkVersion(process.version).unsupported\n    ) {\n      const pkg = require('../package.json')\n      let notifier = require('update-notifier')({pkg})\n      if (\n        notifier.update &&\n        notifier.update.latest !== pkg.version\n      ) {\n        const color = require('ansicolors')\n        const useColor = npm.config.get('color')\n        const useUnicode = npm.config.get('unicode')\n        const old = notifier.update.current\n        const latest = notifier.update.latest\n        let type = notifier.update.type\n        if (useColor) {\n          switch (type) {\n            case 'major':\n              type = color.red(type)\n              break\n            case 'minor':\n              type = color.yellow(type)\n              break\n            case 'patch':\n              type = color.green(type)\n              break\n          }\n        }\n        const changelog = `https://github.com/npm/cli/releases/tag/v${latest}`\n        notifier.notify({\n          message: `New ${type} version of ${pkg.name} available! ${\n            useColor ? color.red(old) : old\n          } ${useUnicode ? 'â†’' : '->'} ${\n            useColor ? color.green(latest) : latest\n          }\\n` +\n          `${\n            useColor ? color.yellow('Changelog:') : 'Changelog:'\n          } ${\n            useColor ? color.cyan(changelog) : changelog\n          }\\n` +\n          `Run ${\n            useColor\n              ? color.green(`npm install -g ${pkg.name}`)\n              : `npm i -g ${pkg.name}`\n          } to update!`\n        })\n      }\n    }\n    npm.commands[npm.command](npm.argv, function (err) {\n      // https://genius.com/Lin-manuel-miranda-your-obedient-servant-lyrics\n      if (\n        !err &&\n        npm.config.get('ham-it-up') &&\n        !npm.config.get('json') &&\n        !npm.config.get('parseable') &&\n        npm.command !== 'completion'\n      ) {\n        console.error(\n          `\\n ${\n            npm.config.get('unicode') ? 'ðŸŽµ ' : ''\n          } I Have the Honour to Be Your Obedient Servant,${\n            npm.config.get('unicode') ? 'ðŸŽµ ' : ''\n          } ~ npm ${\n            npm.config.get('unicode') ? 'ðŸ“œðŸ–‹ ' : ''\n          }\\n`\n        )\n      }\n      errorHandler.apply(this, arguments)\n    })\n  })\n})()\n"]}