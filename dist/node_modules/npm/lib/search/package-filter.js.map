{"version":3,"sources":["../../../../../node_modules/npm/lib/search/package-filter.js"],"names":["module","exports","filter","data","include","exclude","opts","filterWords","getWords","name","concat","description","maintainers","map","m","versions","length","url","keywords","f","trim","join","toLowerCase","words","i","l","match","pattern","charAt","replace","RegExp","substr","indexOf"],"mappings":"AAAA;;;;AAEAA,OAAOC,OAAP,GAAiBC,MAAjB;AACA,SAASA,MAAT,CAAiBC,IAAjB,EAAuBC,OAAvB,EAAgCC,OAAhC,EAAyCC,IAAzC,EAA+C;AAC7C,SAAO,QAAOH,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IACAI,YAAYJ,IAAZ,EAAkBC,OAAlB,EAA2BC,OAA3B,EAAoCC,IAApC,CADP;AAED;;AAED,SAASE,QAAT,CAAmBL,IAAnB,EAAyBG,IAAzB,EAA+B;AAC7B,SAAO,CAAEH,KAAKM,IAAP,EACJC,MADI,CACIJ,QAAQA,KAAKK,WAAd,GAA6BR,KAAKQ,WAAlC,GAAgD,EADnD,EAEJD,MAFI,CAEG,CAACP,KAAKS,WAAL,IAAoB,EAArB,EAAyBC,GAAzB,CAA6B,UAAUC,CAAV,EAAa;AAChD,WAAO,MAAMA,EAAEL,IAAf;AACD,GAFO,CAFH,EAKJC,MALI,CAKGP,KAAKY,QAAL,IAAiBZ,KAAKY,QAAL,CAAcC,MAA/B,IAAyCb,KAAKc,GAA9C,IAAsD,MAAMd,KAAKc,GAAX,GAAiB,GAL1E,EAMJP,MANI,CAMGP,KAAKe,QAAL,IAAiB,EANpB,EAOJL,GAPI,CAOA,UAAUM,CAAV,EAAa;AAAE,WAAOA,KAAKA,EAAEC,IAAP,IAAeD,EAAEC,IAAF,EAAtB;AAAgC,GAP/C,EAQJlB,MARI,CAQG,UAAUiB,CAAV,EAAa;AAAE,WAAOA,CAAP;AAAU,GAR5B,EASJE,IATI,CASC,GATD,EAUJC,WAVI,EAAP;AAWD;;AAED,SAASf,WAAT,CAAsBJ,IAAtB,EAA4BC,OAA5B,EAAqCC,OAArC,EAA8CC,IAA9C,EAAoD;AAClD,MAAIiB,QAAQf,SAASL,IAAT,EAAeG,IAAf,CAAZ;AACA,OAAK,IAAIkB,IAAI,CAAR,EAAWC,IAAIrB,QAAQY,MAA5B,EAAoCQ,IAAIC,CAAxC,EAA2CD,GAA3C,EAAgD;AAC9C,QAAI,CAACE,MAAMH,KAAN,EAAanB,QAAQoB,CAAR,CAAb,CAAL,EAA+B,OAAO,KAAP;AAChC;AACD,OAAKA,IAAI,CAAJ,EAAOC,IAAIpB,QAAQW,MAAxB,EAAgCQ,IAAIC,CAApC,EAAuCD,GAAvC,EAA4C;AAC1C,QAAIE,MAAMH,KAAN,EAAalB,QAAQmB,CAAR,CAAb,CAAJ,EAA8B,OAAO,KAAP;AAC/B;AACD,SAAO,IAAP;AACD;;AAED,SAASE,KAAT,CAAgBH,KAAhB,EAAuBI,OAAvB,EAAgC;AAC9B,MAAIA,QAAQC,MAAR,CAAe,CAAf,MAAsB,GAA1B,EAA+B;AAC7BD,cAAUA,QAAQE,OAAR,CAAgB,KAAhB,EAAuB,EAAvB,CAAV;AACAF,cAAU,IAAIG,MAAJ,CAAWH,QAAQI,MAAR,CAAe,CAAf,EAAkBJ,QAAQX,MAAR,GAAiB,CAAnC,CAAX,CAAV;AACA,WAAOO,MAAMG,KAAN,CAAYC,OAAZ,CAAP;AACD;AACD,SAAOJ,MAAMS,OAAN,CAAcL,OAAd,MAA2B,CAAC,CAAnC;AACD","file":"package-filter.js","sourcesContent":["'use strict'\n\nmodule.exports = filter\nfunction filter (data, include, exclude, opts) {\n  return typeof data === 'object' &&\n         filterWords(data, include, exclude, opts)\n}\n\nfunction getWords (data, opts) {\n  return [ data.name ]\n    .concat((opts && opts.description) ? data.description : [])\n    .concat((data.maintainers || []).map(function (m) {\n      return '=' + m.name\n    }))\n    .concat(data.versions && data.versions.length && data.url && ('<' + data.url + '>'))\n    .concat(data.keywords || [])\n    .map(function (f) { return f && f.trim && f.trim() })\n    .filter(function (f) { return f })\n    .join(' ')\n    .toLowerCase()\n}\n\nfunction filterWords (data, include, exclude, opts) {\n  var words = getWords(data, opts)\n  for (var i = 0, l = include.length; i < l; i++) {\n    if (!match(words, include[i])) return false\n  }\n  for (i = 0, l = exclude.length; i < l; i++) {\n    if (match(words, exclude[i])) return false\n  }\n  return true\n}\n\nfunction match (words, pattern) {\n  if (pattern.charAt(0) === '/') {\n    pattern = pattern.replace(/\\/$/, '')\n    pattern = new RegExp(pattern.substr(1, pattern.length - 1))\n    return words.match(pattern)\n  }\n  return words.indexOf(pattern) !== -1\n}\n"]}