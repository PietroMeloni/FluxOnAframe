{"version":3,"sources":["../../../../node_modules/npm/lib/stars.js"],"names":["module","exports","stars","usage","npm","require","log","mapToRegistry","output","args","cb","commands","whoami","er","username","name","length","code","needAuth","Error","config","uri","auth","params","registry","showstars","data","rows","warn","forEach","a","value"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiBC,KAAjB;;AAEAA,MAAMC,KAAN,GAAc,oBAAd;;AAEA,IAAIC,MAAMC,QAAQ,UAAR,CAAV;AACA,IAAIC,MAAMD,QAAQ,QAAR,CAAV;AACA,IAAIE,gBAAgBF,QAAQ,4BAAR,CAApB;AACA,IAAIG,SAASH,QAAQ,mBAAR,CAAb;;AAEA,SAASH,KAAT,CAAgBO,IAAhB,EAAsBC,EAAtB,EAA0B;AACxBN,MAAIO,QAAJ,CAAaC,MAAb,CAAoB,EAApB,EAAwB,IAAxB,EAA8B,UAAUC,EAAV,EAAcC,QAAd,EAAwB;AACpD,QAAIC,OAAON,KAAKO,MAAL,KAAgB,CAAhB,GAAoBP,KAAK,CAAL,CAApB,GAA8BK,QAAzC;;AAEA,QAAID,EAAJ,EAAQ;AACN,UAAIA,GAAGI,IAAH,KAAY,WAAZ,IAA2B,CAACF,IAAhC,EAAsC;AACpC,YAAIG,WAAW,IAAIC,KAAJ,CAAU,oDAAV,CAAf;AACAD,iBAASD,IAAT,GAAgB,WAAhB;AACA,eAAOP,GAAGQ,QAAH,CAAP;AACD;;AAED,UAAIL,GAAGI,IAAH,KAAY,WAAhB,EAA6B,OAAOP,GAAGG,EAAH,CAAP;AAC9B;;AAEDN,kBAAc,EAAd,EAAkBH,IAAIgB,MAAtB,EAA8B,UAAUP,EAAV,EAAcQ,GAAd,EAAmBC,IAAnB,EAAyB;AACrD,UAAIT,EAAJ,EAAQ,OAAOH,GAAGG,EAAH,CAAP;;AAER,UAAIU,SAAS;AACXT,kBAAUC,IADC;AAEXO,cAAMA;AAFK,OAAb;AAIAlB,UAAIoB,QAAJ,CAAatB,KAAb,CAAmBmB,GAAnB,EAAwBE,MAAxB,EAAgCE,SAAhC;AACD,KARD;AASD,GAtBD;;AAwBA,WAASA,SAAT,CAAoBZ,EAApB,EAAwBa,IAAxB,EAA8B;AAC5B,QAAIb,EAAJ,EAAQ,OAAOH,GAAGG,EAAH,CAAP;;AAER,QAAIa,KAAKC,IAAL,CAAUX,MAAV,KAAqB,CAAzB,EAA4B;AAC1BV,UAAIsB,IAAJ,CAAS,OAAT,EAAkB,oCAAlB;AACD,KAFD,MAEO;AACLF,WAAKC,IAAL,CAAUE,OAAV,CAAkB,UAAUC,CAAV,EAAa;AAC7BtB,eAAOsB,EAAEC,KAAT;AACD,OAFD;AAGD;AACDrB;AACD;AACF","file":"stars.js","sourcesContent":["module.exports = stars\n\nstars.usage = 'npm stars [<user>]'\n\nvar npm = require('./npm.js')\nvar log = require('npmlog')\nvar mapToRegistry = require('./utils/map-to-registry.js')\nvar output = require('./utils/output.js')\n\nfunction stars (args, cb) {\n  npm.commands.whoami([], true, function (er, username) {\n    var name = args.length === 1 ? args[0] : username\n\n    if (er) {\n      if (er.code === 'ENEEDAUTH' && !name) {\n        var needAuth = new Error(\"'npm stars' on your own user account requires auth\")\n        needAuth.code = 'ENEEDAUTH'\n        return cb(needAuth)\n      }\n\n      if (er.code !== 'ENEEDAUTH') return cb(er)\n    }\n\n    mapToRegistry('', npm.config, function (er, uri, auth) {\n      if (er) return cb(er)\n\n      var params = {\n        username: name,\n        auth: auth\n      }\n      npm.registry.stars(uri, params, showstars)\n    })\n  })\n\n  function showstars (er, data) {\n    if (er) return cb(er)\n\n    if (data.rows.length === 0) {\n      log.warn('stars', 'user has not starred any packages.')\n    } else {\n      data.rows.forEach(function (a) {\n        output(a.value)\n      })\n    }\n    cb()\n  }\n}\n"]}