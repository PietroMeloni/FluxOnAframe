{"version":3,"sources":["../../../../node_modules/npm/lib/star.js"],"names":["module","exports","star","npm","require","log","asyncMap","mapToRegistry","usage","output","completion","opts","cb","args","length","s","config","get","u","using","command","match","pkg","er","uri","auth","params","starred","registry","data","raw","req","verbose"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiBC,IAAjB;;AAEA,IAAIC,MAAMC,QAAQ,UAAR,CAAV;AACA,IAAIC,MAAMD,QAAQ,QAAR,CAAV;AACA,IAAIE,WAAWF,QAAQ,OAAR,EAAiBE,QAAhC;AACA,IAAIC,gBAAgBH,QAAQ,4BAAR,CAApB;AACA,IAAII,QAAQJ,QAAQ,eAAR,CAAZ;AACA,IAAIK,SAASL,QAAQ,mBAAR,CAAb;;AAEAF,KAAKM,KAAL,GAAaA,MACX,MADW,EAEX,0BACA,uBAHW,CAAb;;AAMAN,KAAKQ,UAAL,GAAkB,UAAUC,IAAV,EAAgBC,EAAhB,EAAoB;AACpC;AACA;AACAA;AACD,CAJD;;AAMA,SAASV,IAAT,CAAeW,IAAf,EAAqBD,EAArB,EAAyB;AACvB,MAAI,CAACC,KAAKC,MAAV,EAAkB,OAAOF,GAAGV,KAAKM,KAAR,CAAP;AAClB,MAAIO,IAAIZ,IAAIa,MAAJ,CAAWC,GAAX,CAAe,SAAf,IAA4B,SAA5B,GAAwC,KAAhD;AACA,MAAIC,IAAIf,IAAIa,MAAJ,CAAWC,GAAX,CAAe,SAAf,IAA4B,SAA5B,GAAwC,KAAhD;AACA,MAAIE,QAAQ,CAAEhB,IAAIiB,OAAJ,CAAYC,KAAZ,CAAkB,KAAlB,CAAd;AACA,MAAI,CAACF,KAAL,EAAYJ,IAAIG,CAAJ;AACZZ,WAASO,IAAT,EAAe,UAAUS,GAAV,EAAeV,EAAf,EAAmB;AAChCL,kBAAce,GAAd,EAAmBnB,IAAIa,MAAvB,EAA+B,UAAUO,EAAV,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACtD,UAAIF,EAAJ,EAAQ,OAAOX,GAAGW,EAAH,CAAP;;AAER,UAAIG,SAAS;AACXC,iBAASR,KADE;AAEXM,cAAMA;AAFK,OAAb;AAIAtB,UAAIyB,QAAJ,CAAa1B,IAAb,CAAkBsB,GAAlB,EAAuBE,MAAvB,EAA+B,UAAUH,EAAV,EAAcM,IAAd,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8B;AAC3D,YAAI,CAACR,EAAL,EAAS;AACPd,iBAAOM,IAAI,GAAJ,GAAUO,GAAjB;AACAjB,cAAI2B,OAAJ,CAAY,MAAZ,EAAoBH,IAApB;AACD;AACDjB,WAAGW,EAAH,EAAOM,IAAP,EAAaC,GAAb,EAAkBC,GAAlB;AACD,OAND;AAOD,KAdD;AAeD,GAhBD,EAgBGnB,EAhBH;AAiBD","file":"star.js","sourcesContent":["module.exports = star\n\nvar npm = require('./npm.js')\nvar log = require('npmlog')\nvar asyncMap = require('slide').asyncMap\nvar mapToRegistry = require('./utils/map-to-registry.js')\nvar usage = require('./utils/usage')\nvar output = require('./utils/output.js')\n\nstar.usage = usage(\n  'star',\n  'npm star [<pkg>...]\\n' +\n  'npm unstar [<pkg>...]'\n)\n\nstar.completion = function (opts, cb) {\n  // FIXME: there used to be registry completion here, but it stopped making\n  // sense somewhere around 50,000 packages on the registry\n  cb()\n}\n\nfunction star (args, cb) {\n  if (!args.length) return cb(star.usage)\n  var s = npm.config.get('unicode') ? '\\u2605 ' : '(*)'\n  var u = npm.config.get('unicode') ? '\\u2606 ' : '( )'\n  var using = !(npm.command.match(/^un/))\n  if (!using) s = u\n  asyncMap(args, function (pkg, cb) {\n    mapToRegistry(pkg, npm.config, function (er, uri, auth) {\n      if (er) return cb(er)\n\n      var params = {\n        starred: using,\n        auth: auth\n      }\n      npm.registry.star(uri, params, function (er, data, raw, req) {\n        if (!er) {\n          output(s + ' ' + pkg)\n          log.verbose('star', data)\n        }\n        cb(er, data, raw, req)\n      })\n    })\n  }, cb)\n}\n"]}