{"version":3,"sources":["../../../../../node_modules/npm/lib/utils/gunzip-maybe.js"],"names":["duplex","require","through","zlib","hasGzipHeader","c","module","exports","gunzip","stream","peeker","chunk","enc","cb","newStream","createGunzip","setReadable","setWritable","write"],"mappings":";;AAAA,IAAIA,SAASC,QAAQ,aAAR,EAAuBD,MAApC;AACA,IAAIE,UAAUD,QAAQ,aAAR,EAAuBC,OAArC;AACA,IAAIC,OAAOF,QAAQ,MAAR,CAAX;;AAEA,SAASG,aAAT,CAAwBC,CAAxB,EAA2B;AACzB,SAAOA,EAAE,CAAF,MAAS,IAAT,IAAiBA,EAAE,CAAF,MAAS,IAA1B,IAAkCA,EAAE,CAAF,MAAS,IAAlD;AACD;;AAEDC,OAAOC,OAAP,GAAiBC,MAAjB;AACA,SAASA,MAAT,GAAmB;AACjB,MAAIC,SAAST,QAAb;AACA,MAAIU,SAASR,QAAQ,UAAUS,KAAV,EAAiBC,GAAjB,EAAsBC,EAAtB,EAA0B;AAC7C,QAAIC,YAAYV,cAAcO,KAAd,IACZR,KAAKY,YAAL,EADY,GAEZb,SAFJ;AAGAO,WAAOO,WAAP,CAAmBF,SAAnB;AACAL,WAAOQ,WAAP,CAAmBH,SAAnB;AACAL,WAAOS,KAAP,CAAaP,KAAb;AACD,GAPY,CAAb;AAQAF,SAAOQ,WAAP,CAAmBP,MAAnB;AACA,SAAOD,MAAP;AACD","file":"gunzip-maybe.js","sourcesContent":["var duplex = require('mississippi').duplex\nvar through = require('mississippi').through\nvar zlib = require('zlib')\n\nfunction hasGzipHeader (c) {\n  return c[0] === 0x1F && c[1] === 0x8B && c[2] === 0x08\n}\n\nmodule.exports = gunzip\nfunction gunzip () {\n  var stream = duplex()\n  var peeker = through(function (chunk, enc, cb) {\n    var newStream = hasGzipHeader(chunk)\n      ? zlib.createGunzip()\n      : through()\n    stream.setReadable(newStream)\n    stream.setWritable(newStream)\n    stream.write(chunk)\n  })\n  stream.setWritable(peeker)\n  return stream\n}\n"]}