{"version":3,"sources":["../../../../../node_modules/npm/lib/utils/get-publish-config.js"],"names":["clientConfig","require","Conf","log","npm","RegClient","module","exports","getPublishConfig","publishConfig","defaultConfig","defaultClient","config","client","verbose","save","bind","unshift","Object","keys","reduce","s","k"],"mappings":"AAAA;;AAEA,IAAMA,eAAeC,QAAQ,yBAAR,CAArB;AACA,IAAMC,OAAOD,QAAQ,mBAAR,EAA6BC,IAA1C;AACA,IAAMC,MAAMF,QAAQ,QAAR,CAAZ;AACA,IAAMG,MAAMH,QAAQ,WAAR,CAAZ;AACA,IAAMI,YAAYJ,QAAQ,qBAAR,CAAlB;;AAEAK,OAAOC,OAAP,GAAiBC,gBAAjB;;AAEA,SAASA,gBAAT,CAA2BC,aAA3B,EAA0CC,aAA1C,EAAyDC,aAAzD,EAAwE;AACtE,MAAIC,SAASF,aAAb;AACA,MAAIG,SAASF,aAAb;AACAR,MAAIW,OAAJ,CAAY,kBAAZ,EAAgCL,aAAhC;AACA,MAAIA,aAAJ,EAAmB;AACjBG,aAAS,IAAIV,IAAJ,CAASQ,aAAT,CAAT;AACAE,WAAOG,IAAP,GAAcL,cAAcK,IAAd,CAAmBC,IAAnB,CAAwBN,aAAxB,CAAd;;AAEA;AACA;AACAE,WAAOK,OAAP,CAAeC,OAAOC,IAAP,CAAYV,aAAZ,EAA2BW,MAA3B,CAAkC,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAC/DD,QAAEC,CAAF,IAAOb,cAAca,CAAd,CAAP;AACA,aAAOD,CAAP;AACD,KAHc,EAGZ,EAHY,CAAf;AAIAR,aAAS,IAAIR,SAAJ,CAAcL,aAAaI,GAAb,EAAkBD,GAAlB,EAAuBS,MAAvB,CAAd,CAAT;AACD;;AAED,SAAO,EAAEA,QAAQA,MAAV,EAAkBC,QAAQA,MAA1B,EAAP;AACD","file":"get-publish-config.js","sourcesContent":["'use strict'\n\nconst clientConfig = require('../config/reg-client.js')\nconst Conf = require('../config/core.js').Conf\nconst log = require('npmlog')\nconst npm = require('../npm.js')\nconst RegClient = require('npm-registry-client')\n\nmodule.exports = getPublishConfig\n\nfunction getPublishConfig (publishConfig, defaultConfig, defaultClient) {\n  let config = defaultConfig\n  let client = defaultClient\n  log.verbose('getPublishConfig', publishConfig)\n  if (publishConfig) {\n    config = new Conf(defaultConfig)\n    config.save = defaultConfig.save.bind(defaultConfig)\n\n    // don't modify the actual publishConfig object, in case we have\n    // to set a login token or some other data.\n    config.unshift(Object.keys(publishConfig).reduce(function (s, k) {\n      s[k] = publishConfig[k]\n      return s\n    }, {}))\n    client = new RegClient(clientConfig(npm, log, config))\n  }\n\n  return { config: config, client: client }\n}\n"]}