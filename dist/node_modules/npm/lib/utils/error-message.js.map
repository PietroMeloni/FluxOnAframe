{"version":3,"sources":["../../../../../node_modules/npm/lib/utils/error-message.js"],"names":["npm","require","util","nameValidator","module","exports","errorMessage","er","short","detail","code","push","message","join","process","platform","pkgid","stage","path","file","prefix","isDiff","_isDiff","txt","readFileSync","argv","test","auth","headers","map","au","split","indexOf","msg","replace","valResult","validForNewPackages","errorsArray","errors","concat","warnings","forEach","item","idx","parent","validOs","os","validArch","cpu","expected","arch","actual","format","required","JSON","stringify","version","node","config","get","stack","optional","unshift","location","toString","summary"],"mappings":"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","file":"error-message.js","sourcesContent":["'use strict'\nvar npm = require('../npm.js')\nvar util = require('util')\nvar nameValidator = require('validate-npm-package-name')\n\nmodule.exports = errorMessage\n\nfunction errorMessage (er) {\n  var short = []\n  var detail = []\n  switch (er.code) {\n    case 'ENOAUDIT':\n      short.push(['audit', er.message])\n      break\n    case 'EAUDITNOPJSON':\n      short.push(['audit', er.message])\n      break\n    case 'EAUDITNOLOCK':\n      short.push(['audit', er.message])\n      detail.push(['audit', 'Try creating one first with: npm i --package-lock-only'])\n      break\n\n    case 'ECONNREFUSED':\n      short.push(['', er])\n      detail.push([\n        '',\n        [\n          '\\nIf you are behind a proxy, please make sure that the',\n          \"'proxy' config is set properly.  See: 'npm help config'\"\n        ].join('\\n')\n      ])\n      break\n\n    case 'EACCES':\n    case 'EPERM':\n      short.push(['', er])\n      detail.push([\n        '',\n        [\n          '\\nThe operation was rejected by your operating system.',\n          (process.platform === 'win32'\n            ? 'It\\'s possible that the file was already in use (by a text editor or antivirus),\\nor that you lack permissions to access it.'\n            : 'It is likely you do not have the permissions to access this file as the current user'),\n          '\\nIf you believe this might be a permissions issue, please double-check the',\n          'permissions of the file and its containing directories, or try running',\n          'the command again as root/Administrator (though this is not recommended).'\n        ].join('\\n')])\n      break\n\n    case 'ELIFECYCLE':\n      short.push(['', er.message])\n      detail.push([\n        '',\n        [\n          '',\n          'Failed at the ' + er.pkgid + ' ' + er.stage + ' script.',\n          'This is probably not a problem with npm. There is likely additional logging output above.'\n        ].join('\\n')]\n      )\n      break\n\n    case 'ENOGIT':\n      short.push(['', er.message])\n      detail.push([\n        '',\n        [\n          '',\n          'Failed using git.',\n          'Please check if you have git installed and in your PATH.'\n        ].join('\\n')\n      ])\n      break\n\n    case 'EJSONPARSE':\n      const path = require('path')\n      // Check whether we ran into a conflict in our own package.json\n      if (er.file === path.join(npm.prefix, 'package.json')) {\n        const isDiff = require('../install/read-shrinkwrap.js')._isDiff\n        const txt = require('fs').readFileSync(er.file, 'utf8')\n        if (isDiff(txt)) {\n          detail.push([\n            '',\n            [\n              'Merge conflict detected in your package.json.',\n              '',\n              'Please resolve the package.json conflict and retry the command:',\n              '',\n              `$ ${process.argv.join(' ')}`\n            ].join('\\n')\n          ])\n          break\n        }\n      }\n      short.push(['JSON.parse', er.message])\n      detail.push([\n        'JSON.parse',\n        [\n          'Failed to parse package.json data.',\n          'package.json must be actual JSON, not just JavaScript.'\n        ].join('\\n')\n      ])\n      break\n\n    case 'EOTP':\n    case 'E401':\n      // the E401 message checking is a hack till we replace npm-registry-client with something\n      // OTP aware.\n      if (er.code === 'EOTP' || /one-time pass/.test(er.message)) {\n        short.push(['', 'This operation requires a one-time password from your authenticator.'])\n        detail.push([\n          '',\n          [\n            'You can provide a one-time password by passing --otp=<code> to the command you ran.',\n            'If you already provided a one-time password then it is likely that you either typoed',\n            'it, or it timed out. Please try again.'\n          ].join('\\n')\n        ])\n      } else {\n        // npm ERR! code E401\n        // npm ERR! Unable to authenticate, need: Basic\n        const auth = (er.headers && er.headers['www-authenticate'] && er.headers['www-authenticate'].map((au) => au.split(/,\\s*/))[0]) || []\n        if (auth.indexOf('Bearer') !== -1) {\n          short.push(['', 'Unable to authenticate, your authentication token seems to be invalid.'])\n          detail.push([\n            '',\n            [\n              'To correct this please trying logging in again with:',\n              '    npm login'\n            ].join('\\n')\n          ])\n        } else if (auth.indexOf('Basic') !== -1) {\n          short.push(['', 'Incorrect or missing password.'])\n          detail.push([\n            '',\n            [\n              'If you were trying to login, change your password, create an',\n              'authentication token or enable two-factor authentication then',\n              'that means you likely typed your password in incorrectly.',\n              'Please try again, or recover your password at:',\n              '    https://www.npmjs.com/forgot',\n              '',\n              'If you were doing some other operation then your saved credentials are',\n              'probably out of date. To correct this please try logging in again with:',\n              '    npm login'\n            ].join('\\n')\n          ])\n        } else {\n          short.push(['', er.message || er])\n        }\n      }\n      break\n\n    case 'E404':\n      // There's no need to have 404 in the message as well.\n      var msg = er.message.replace(/^404\\s+/, '')\n      short.push(['404', msg])\n      if (er.pkgid && er.pkgid !== '-') {\n        detail.push(['404', ''])\n        detail.push(['404', '', \"'\" + er.pkgid + \"' is not in the npm registry.\"])\n\n        var valResult = nameValidator(er.pkgid)\n\n        if (valResult.validForNewPackages) {\n          detail.push(['404', 'You should bug the author to publish it (or use the name yourself!)'])\n        } else {\n          detail.push(['404', 'Your package name is not valid, because', ''])\n\n          var errorsArray = (valResult.errors || []).concat(valResult.warnings || [])\n          errorsArray.forEach(function (item, idx) {\n            detail.push(['404', ' ' + (idx + 1) + '. ' + item])\n          })\n        }\n\n        if (er.parent) {\n          detail.push(['404', \"It was specified as a dependency of '\" + er.parent + \"'\"])\n        }\n        detail.push(['404', '\\nNote that you can also install from a'])\n        detail.push(['404', 'tarball, folder, http url, or git url.'])\n      }\n      break\n\n    case 'EPUBLISHCONFLICT':\n      short.push(['publish fail', 'Cannot publish over existing version.'])\n      detail.push(['publish fail', \"Update the 'version' field in package.json and try again.\"])\n      detail.push(['publish fail', ''])\n      detail.push(['publish fail', 'To automatically increment version numbers, see:'])\n      detail.push(['publish fail', '    npm help version'])\n      break\n\n    case 'EISGIT':\n      short.push(['git', er.message])\n      short.push(['git', '    ' + er.path])\n      detail.push([\n        'git',\n        [\n          'Refusing to remove it. Update manually,',\n          'or move it out of the way first.'\n        ].join('\\n')\n      ])\n      break\n\n    case 'ECYCLE':\n      short.push([\n        'cycle',\n        [\n          er.message,\n          'While installing: ' + er.pkgid\n        ].join('\\n')\n      ])\n      detail.push([\n        'cycle',\n        [\n          'Found a pathological dependency case that npm cannot solve.',\n          'Please report this to the package author.'\n        ].join('\\n')\n      ])\n      break\n\n    case 'EBADPLATFORM':\n      var validOs = er.os.join ? er.os.join(',') : er.os\n      var validArch = er.cpu.join ? er.cpu.join(',') : er.cpu\n      var expected = {os: validOs, arch: validArch}\n      var actual = {os: process.platform, arch: process.arch}\n      short.push([\n        'notsup',\n        [\n          util.format('Unsupported platform for %s: wanted %j (current: %j)', er.pkgid, expected, actual)\n        ].join('\\n')\n      ])\n      detail.push([\n        'notsup',\n        [\n          'Valid OS:    ' + validOs,\n          'Valid Arch:  ' + validArch,\n          'Actual OS:   ' + process.platform,\n          'Actual Arch: ' + process.arch\n        ].join('\\n')\n      ])\n      break\n\n    case 'EEXIST':\n      short.push(['', er.message])\n      short.push(['', 'File exists: ' + er.path])\n      detail.push(['', 'Move it away, and try again.'])\n      break\n\n    case 'ENEEDAUTH':\n      short.push(['need auth', er.message])\n      detail.push(['need auth', 'You need to authorize this machine using `npm adduser`'])\n      break\n\n    case 'ECONNRESET':\n    case 'ENOTFOUND':\n    case 'ETIMEDOUT':\n    case 'EAI_FAIL':\n      short.push(['network', er.message])\n      detail.push([\n        'network',\n        [\n          'This is a problem related to network connectivity.',\n          'In most cases you are behind a proxy or have bad network settings.',\n          '\\nIf you are behind a proxy, please make sure that the',\n          \"'proxy' config is set properly.  See: 'npm help config'\"\n        ].join('\\n')\n      ])\n      break\n\n    case 'ENOPACKAGEJSON':\n      short.push(['package.json', er.message])\n      detail.push([\n        'package.json',\n        [\n          \"npm can't find a package.json file in your current directory.\"\n        ].join('\\n')\n      ])\n      break\n\n    case 'ETARGET':\n      short.push(['notarget', er.message])\n      msg = [\n        'In most cases you or one of your dependencies are requesting',\n        \"a package version that doesn't exist.\"\n      ]\n      if (er.parent) {\n        msg.push(\"\\nIt was specified as a dependency of '\" + er.parent + \"'\\n\")\n      }\n      detail.push(['notarget', msg.join('\\n')])\n      break\n\n    case 'ENOTSUP':\n      if (er.required) {\n        short.push(['notsup', er.message])\n        short.push(['notsup', 'Not compatible with your version of node/npm: ' + er.pkgid])\n        detail.push([\n          'notsup',\n          [\n            'Not compatible with your version of node/npm: ' + er.pkgid,\n            'Required: ' + JSON.stringify(er.required),\n            'Actual:   ' + JSON.stringify({\n              npm: npm.version,\n              node: npm.config.get('node-version')\n            })\n          ].join('\\n')\n        ])\n        break\n      } // else passthrough\n      /* eslint no-fallthrough:0 */\n\n    case 'ENOSPC':\n      short.push(['nospc', er.message])\n      detail.push([\n        'nospc',\n        [\n          'There appears to be insufficient space on your system to finish.',\n          'Clear up some disk space and try again.'\n        ].join('\\n')\n      ])\n      break\n\n    case 'EROFS':\n      short.push(['rofs', er.message])\n      detail.push([\n        'rofs',\n        [\n          'Often virtualized file systems, or other file systems',\n          \"that don't support symlinks, give this error.\"\n        ].join('\\n')\n      ])\n      break\n\n    case 'ENOENT':\n      short.push(['enoent', er.message])\n      detail.push([\n        'enoent',\n        [\n          'This is related to npm not being able to find a file.',\n          er.file ? \"\\nCheck if the file '\" + er.file + \"' is present.\" : ''\n        ].join('\\n')\n      ])\n      break\n\n    case 'EMISSINGARG':\n    case 'EUNKNOWNTYPE':\n    case 'EINVALIDTYPE':\n    case 'ETOOMANYARGS':\n      short.push(['typeerror', er.stack])\n      detail.push([\n        'typeerror',\n        [\n          'This is an error with npm itself. Please report this error at:',\n          '    <https://npm.community>'\n        ].join('\\n')\n      ])\n      break\n\n    default:\n      short.push(['', er.message || er])\n      break\n  }\n  if (er.optional) {\n    short.unshift(['optional', er.optional + ' (' + er.location + '):'])\n    short.concat(detail).forEach(function (msg) {\n      if (!msg[0]) msg[0] = 'optional'\n      if (msg[1]) msg[1] = msg[1].toString().replace(/(^|\\n)/g, '$1SKIPPING OPTIONAL DEPENDENCY: ')\n    })\n  }\n  return {summary: short, detail: detail}\n}\n"]}