{"version":3,"sources":["../../../../../../node_modules/npm/lib/utils/completion/file-completion.js"],"names":["module","exports","fileCompletion","mkdir","require","glob","root","req","depth","cb","Infinity","er","pattern","opts","mark","dot","maxDepth","files","map","f","substr","length","replace"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiBC,cAAjB;;AAEA,IAAIC,QAAQC,QAAQ,QAAR,CAAZ;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;;AAEA,SAASF,cAAT,CAAyBI,IAAzB,EAA+BC,GAA/B,EAAoCC,KAApC,EAA2CC,EAA3C,EAA+C;AAC7C,MAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8B;AAC5BA,SAAKD,KAAL;AACAA,YAAQE,QAAR;AACD;AACDP,QAAMG,IAAN,EAAY,UAAUK,EAAV,EAAc;AACxB,QAAIA,EAAJ,EAAQ,OAAOF,GAAGE,EAAH,CAAP;;AAER;AACA,QAAIC,UAAUN,OAAO,IAAP,GAAcC,GAAd,GAAoB,GAApB,GAA0BA,GAA1B,GAAgC,QAA9C;AACA,QAAIM,OAAO,EAAEC,MAAM,IAAR,EAAcC,KAAK,IAAnB,EAAyBC,UAAUR,KAAnC,EAAX;AACAH,SAAKO,OAAL,EAAcC,IAAd,EAAoB,UAAUF,EAAV,EAAcM,KAAd,EAAqB;AACvC,UAAIN,EAAJ,EAAQ,OAAOF,GAAGE,EAAH,CAAP;AACR,aAAOF,GAAG,IAAH,EAAS,CAACQ,SAAS,EAAV,EAAcC,GAAd,CAAkB,UAAUC,CAAV,EAAa;AAC7C,eAAOA,EAAEC,MAAF,CAASd,KAAKe,MAAL,GAAc,CAAvB,EAA0BC,OAA1B,CAAkC,UAAlC,EAA8C,EAA9C,CAAP;AACD,OAFe,CAAT,CAAP;AAGD,KALD;AAMD,GAZD;AAaD","file":"file-completion.js","sourcesContent":["module.exports = fileCompletion\n\nvar mkdir = require('mkdirp')\nvar glob = require('glob')\n\nfunction fileCompletion (root, req, depth, cb) {\n  if (typeof cb !== 'function') {\n    cb = depth\n    depth = Infinity\n  }\n  mkdir(root, function (er) {\n    if (er) return cb(er)\n\n    // can be either exactly the req, or a descendent\n    var pattern = root + '/{' + req + ',' + req + '/**/*}'\n    var opts = { mark: true, dot: true, maxDepth: depth }\n    glob(pattern, opts, function (er, files) {\n      if (er) return cb(er)\n      return cb(null, (files || []).map(function (f) {\n        return f.substr(root.length + 1).replace(/^\\/|\\/$/g, '')\n      }))\n    })\n  })\n}\n"]}