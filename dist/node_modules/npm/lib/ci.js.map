{"version":3,"sources":["../../../../node_modules/npm/lib/ci.js"],"names":["Installer","require","lifecycleOpts","npm","npmlog","pacoteOpts","ci","usage","completion","cb","CipmConfig","impl","config","get","set","toLifecycle","moreOpts","toPacote","module","exports","args","log","run","then","details","disableProgress","console","error","pkgCount","runTime"],"mappings":"AAAA;;AAEA,IAAMA,YAAYC,QAAQ,SAAR,CAAlB;AACA,IAAMC,gBAAgBD,QAAQ,uBAAR,CAAtB;AACA,IAAME,MAAMF,QAAQ,UAAR,CAAZ;AACA,IAAMG,SAASH,QAAQ,QAAR,CAAf;AACA,IAAMI,aAAaJ,QAAQ,oBAAR,CAAnB;;AAEAK,GAAGC,KAAH,GAAW,QAAX;;AAEAD,GAAGE,UAAH,GAAgB,UAACC,EAAD;AAAA,SAAQA,GAAG,IAAH,EAAS,EAAT,CAAR;AAAA,CAAhB;;AAEAT,UAAUU,UAAV,CAAqBC,IAArB,CAA0BR,IAAIS,MAA9B,EAAsC;AACpCC,OAAKV,IAAIS,MAAJ,CAAWC,GADoB;AAEpCC,OAAKX,IAAIS,MAAJ,CAAWE,GAFoB;AAGpCC,aAHoC,uBAGvBC,QAHuB,EAGb;AACrB,WAAOd,cAAcc,QAAd,CAAP;AACD,GALmC;AAMpCC,UANoC,oBAM1BD,QAN0B,EAMhB;AAClB,WAAOX,WAAWW,QAAX,CAAP;AACD;AARmC,CAAtC;;AAWAE,OAAOC,OAAP,GAAiBb,EAAjB;AACA,SAASA,EAAT,CAAac,IAAb,EAAmBX,EAAnB,EAAuB;AACrB,SAAO,IAAIT,SAAJ,CAAc;AACnBY,YAAQT,IAAIS,MADO;AAEnBS,SAAKjB;AAFc,GAAd,EAIJkB,GAJI,GAKJC,IALI,CAMH,UAACC,OAAD,EAAa;AACXpB,WAAOqB,eAAP;AACAC,YAAQC,KAAR,YAAuBH,QAAQI,QAA/B,qBACEJ,QAAQK,OAAR,GAAkB,IADpB;AAGD,GAXE,EAaJN,IAbI,CAaC;AAAA,WAAMd,IAAN;AAAA,GAbD,EAaaA,EAbb,CAAP;AAcD","file":"ci.js","sourcesContent":["'use strict'\n\nconst Installer = require('libcipm')\nconst lifecycleOpts = require('./config/lifecycle.js')\nconst npm = require('./npm.js')\nconst npmlog = require('npmlog')\nconst pacoteOpts = require('./config/pacote.js')\n\nci.usage = 'npm ci'\n\nci.completion = (cb) => cb(null, [])\n\nInstaller.CipmConfig.impl(npm.config, {\n  get: npm.config.get,\n  set: npm.config.set,\n  toLifecycle (moreOpts) {\n    return lifecycleOpts(moreOpts)\n  },\n  toPacote (moreOpts) {\n    return pacoteOpts(moreOpts)\n  }\n})\n\nmodule.exports = ci\nfunction ci (args, cb) {\n  return new Installer({\n    config: npm.config,\n    log: npmlog\n  })\n    .run()\n    .then(\n      (details) => {\n        npmlog.disableProgress()\n        console.error(`added ${details.pkgCount} packages in ${\n          details.runTime / 1000\n        }s`)\n      }\n    )\n    .then(() => cb(), cb)\n}\n"]}