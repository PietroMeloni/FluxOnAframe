{"version":3,"sources":["../../../../node_modules/npm/lib/view.js"],"names":["module","exports","view","BB","require","byteSize","color","columns","relativeDate","style","npm","readJson","log","util","semver","mapToRegistry","npa","path","usage","completion","opts","cb","conf","argv","remain","length","tag","config","get","er","uri","auth","registry","d","dv","versions","fields","Object","keys","sort","compareLoose","getFields","concat","f","pref","forEach","k","charAt","indexOf","p","join","push","Array","isArray","val","i","pi","args","silent","pkg","shift","nv","test","resolve","slice","name","local","Error","dir","prefix","code","rawSpec","split","fetchAndRead","version","data","time","unpublished","u","statusCode","pkgid","_id","results","error","readme","v","satisfies","showFields","retval","reduce","reducer","cleanBlanks","silly","all","map","prettyView","nodeify","then","printData","bind","packument","manifest","unicode","try","tags","t","bright","green","unpackedSize","dist","licenseField","license","licence","info","bins","bin","yellow","description","deprecated","keywords","type","deps","dependencies","dep","publisher","_npmUser","unparsePerson","email","cyan","modified","maintainers","repo","bugs","url","repository","site","homepage","stars","users","tarball","shasum","integrity","fileCount","value","unit","toLowerCase","trim","red","console","underline","warningSign","maxDeps","padding","publishInfo","obj","clean","l","r","o","s","search","title","field","tail","index","match","hasOwnProperty","tl","newt","substr","undefined","msg","msgJson","includeVersions","includeFields","cleanup","inspect","showHidden","depth","colors","maxArrayLength","JSON","stringify","m","disableProgress","process","stdout","write"],"mappings":"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","file":"view.js","sourcesContent":["'use strict'\n\n// npm view [pkg [pkg ...]]\nmodule.exports = view\n\nconst BB = require('bluebird')\n\nconst byteSize = require('byte-size')\nconst color = require('ansicolors')\nconst columns = require('cli-columns')\nconst relativeDate = require('tiny-relative-date')\nconst style = require('ansistyles')\nvar npm = require('./npm.js')\nvar readJson = require('read-package-json')\nvar log = require('npmlog')\nvar util = require('util')\nvar semver = require('semver')\nvar mapToRegistry = require('./utils/map-to-registry.js')\nvar npa = require('npm-package-arg')\nvar path = require('path')\nvar usage = require('./utils/usage')\n\nview.usage = usage(\n  'view',\n  'npm view [<@scope>/]<pkg>[@<version>] [<field>[.subfield]...]'\n)\n\nview.completion = function (opts, cb) {\n  if (opts.conf.argv.remain.length <= 2) {\n    // FIXME: there used to be registry completion here, but it stopped making\n    // sense somewhere around 50,000 packages on the registry\n    return cb()\n  }\n  // have the package, get the fields.\n  var tag = npm.config.get('tag')\n  mapToRegistry(opts.conf.argv.remain[2], npm.config, function (er, uri, auth) {\n    if (er) return cb(er)\n\n    npm.registry.get(uri, { auth: auth }, function (er, d) {\n      if (er) return cb(er)\n      var dv = d.versions[d['dist-tags'][tag]]\n      var fields = []\n      d.versions = Object.keys(d.versions).sort(semver.compareLoose)\n      fields = getFields(d).concat(getFields(dv))\n      cb(null, fields)\n    })\n  })\n\n  function getFields (d, f, pref) {\n    f = f || []\n    if (!d) return f\n    pref = pref || []\n    Object.keys(d).forEach(function (k) {\n      if (k.charAt(0) === '_' || k.indexOf('.') !== -1) return\n      var p = pref.concat(k).join('.')\n      f.push(p)\n      if (Array.isArray(d[k])) {\n        d[k].forEach(function (val, i) {\n          var pi = p + '[' + i + ']'\n          if (val && typeof val === 'object') getFields(val, f, [p])\n          else f.push(pi)\n        })\n        return\n      }\n      if (typeof d[k] === 'object') getFields(d[k], f, [p])\n    })\n    return f\n  }\n}\n\nfunction view (args, silent, cb) {\n  if (typeof cb !== 'function') {\n    cb = silent\n    silent = false\n  }\n\n  if (!args.length) args = ['.']\n\n  var pkg = args.shift()\n  var nv\n  if (/^[.]@/.test(pkg)) {\n    nv = npa.resolve(null, pkg.slice(2))\n  } else {\n    nv = npa(pkg)\n  }\n  var name = nv.name\n  var local = (name === '.' || !name)\n\n  if (npm.config.get('global') && local) {\n    return cb(new Error('Cannot use view command in global mode.'))\n  }\n\n  if (local) {\n    var dir = npm.prefix\n    readJson(path.resolve(dir, 'package.json'), function (er, d) {\n      d = d || {}\n      if (er && er.code !== 'ENOENT' && er.code !== 'ENOTDIR') return cb(er)\n      if (!d.name) return cb(new Error('Invalid package.json'))\n\n      var p = d.name\n      nv = npa(p)\n      if (pkg && ~pkg.indexOf('@')) {\n        nv.rawSpec = pkg.split('@')[pkg.indexOf('@')]\n      }\n\n      fetchAndRead(nv, args, silent, cb)\n    })\n  } else {\n    fetchAndRead(nv, args, silent, cb)\n  }\n}\n\nfunction fetchAndRead (nv, args, silent, cb) {\n  // get the data about this package\n  var name = nv.name\n  var version = nv.rawSpec || npm.config.get('tag')\n\n  mapToRegistry(name, npm.config, function (er, uri, auth) {\n    if (er) return cb(er)\n\n    npm.registry.get(uri, { auth: auth }, function (er, data) {\n      if (er) return cb(er)\n      if (data['dist-tags'] && data['dist-tags'][version]) {\n        version = data['dist-tags'][version]\n      }\n\n      if (data.time && data.time.unpublished) {\n        var u = data.time.unpublished\n        er = new Error('Unpublished by ' + u.name + ' on ' + u.time)\n        er.statusCode = 404\n        er.code = 'E404'\n        er.pkgid = data._id\n        return cb(er, data)\n      }\n\n      var results = []\n      var error = null\n      var versions = data.versions || {}\n      data.versions = Object.keys(versions).sort(semver.compareLoose)\n      if (!args.length) args = ['']\n\n      // remove readme unless we asked for it\n      if (args.indexOf('readme') === -1) {\n        delete data.readme\n      }\n\n      Object.keys(versions).forEach(function (v) {\n        if (semver.satisfies(v, version, true)) {\n          args.forEach(function (args) {\n            // remove readme unless we asked for it\n            if (args.indexOf('readme') !== -1) {\n              delete versions[v].readme\n            }\n            results.push(showFields(data, versions[v], args))\n          })\n        }\n      })\n      var retval = results.reduce(reducer, {})\n\n      if (args.length === 1 && args[0] === '') {\n        retval = cleanBlanks(retval)\n        log.silly('cleanup', retval)\n      }\n\n      if (error || silent) {\n        cb(error, retval)\n      } else if (\n        !npm.config.get('json') &&\n        args.length === 1 &&\n        args[0] === ''\n      ) {\n        data.version = version\n        BB.all(results.map((v) => prettyView(data, v[Object.keys(v)[0]][''])))\n          .nodeify(cb)\n          .then(() => retval)\n      } else {\n        printData(retval, data._id, cb.bind(null, error, retval))\n      }\n    })\n  })\n}\n\nfunction prettyView (packument, manifest) {\n  // More modern, pretty printing of default view\n  const unicode = npm.config.get('unicode')\n  return BB.try(() => {\n    if (!manifest) {\n      log.error(\n        'view',\n        'No matching versions.\\n' +\n        'To see a list of versions, run:\\n' +\n        `> npm view ${packument.name} versions`\n      )\n      return\n    }\n    const tags = []\n    Object.keys(packument['dist-tags']).forEach((t) => {\n      const version = packument['dist-tags'][t]\n      tags.push(`${style.bright(color.green(t))}: ${version}`)\n    })\n    const unpackedSize = manifest.dist.unpackedSize &&\n      byteSize(manifest.dist.unpackedSize)\n    const licenseField = manifest.license || manifest.licence || 'Proprietary'\n    const info = {\n      name: color.green(manifest.name),\n      version: color.green(manifest.version),\n      bins: Object.keys(manifest.bin || {}).map(color.yellow),\n      versions: color.yellow(packument.versions.length + ''),\n      description: manifest.description,\n      deprecated: manifest.deprecated,\n      keywords: (packument.keywords || []).map(color.yellow),\n      license: typeof licenseField === 'string'\n        ? licenseField\n        : (licenseField.type || 'Proprietary'),\n      deps: Object.keys(manifest.dependencies || {}).map((dep) => {\n        return `${color.yellow(dep)}: ${manifest.dependencies[dep]}`\n      }),\n      publisher: manifest._npmUser && unparsePerson({\n        name: color.yellow(manifest._npmUser.name),\n        email: color.cyan(manifest._npmUser.email)\n      }),\n      modified: color.yellow(relativeDate(packument.time[packument.version])),\n      maintainers: (packument.maintainers || []).map((u) => unparsePerson({\n        name: color.yellow(u.name),\n        email: color.cyan(u.email)\n      })),\n      repo: (\n        manifest.bugs && (manifest.bugs.url || manifest.bugs)\n      ) || (\n        manifest.repository && (manifest.repository.url || manifest.repository)\n      ),\n      site: (\n        manifest.homepage && (manifest.homepage.url || manifest.homepage)\n      ),\n      stars: color.yellow('' + packument.users ? Object.keys(packument.users || {}).length : 0),\n      tags,\n      tarball: color.cyan(manifest.dist.tarball),\n      shasum: color.yellow(manifest.dist.shasum),\n      integrity: manifest.dist.integrity && color.yellow(manifest.dist.integrity),\n      fileCount: manifest.dist.fileCount && color.yellow(manifest.dist.fileCount),\n      unpackedSize: unpackedSize && color.yellow(unpackedSize.value) + ' ' + unpackedSize.unit\n    }\n    if (info.license.toLowerCase().trim() === 'proprietary') {\n      info.license = style.bright(color.red(info.license))\n    } else {\n      info.license = color.green(info.license)\n    }\n    console.log('')\n    console.log(\n      style.underline(style.bright(`${info.name}@${info.version}`)) +\n      ' | ' + info.license +\n      ' | deps: ' + (info.deps.length ? color.cyan(info.deps.length) : color.green('none')) +\n      ' | versions: ' + info.versions\n    )\n    info.description && console.log(info.description)\n    if (info.repo || info.site) {\n      info.site && console.log(color.cyan(info.site))\n    }\n\n    const warningSign = unicode ? ' ⚠️ ' : '!!'\n    info.deprecated && console.log(\n      `\\n${style.bright(color.red('DEPRECATED'))}${\n        warningSign\n      } - ${info.deprecated}`\n    )\n\n    if (info.keywords.length) {\n      console.log('')\n      console.log('keywords:', info.keywords.join(', '))\n    }\n\n    if (info.bins.length) {\n      console.log('')\n      console.log('bin:', info.bins.join(', '))\n    }\n\n    console.log('')\n    console.log('dist')\n    console.log('.tarball', info.tarball)\n    console.log('.shasum:', info.shasum)\n    info.integrity && console.log('.integrity:', info.integrity)\n    info.unpackedSize && console.log('.unpackedSize:', info.unpackedSize)\n\n    const maxDeps = 24\n    if (info.deps.length) {\n      console.log('')\n      console.log('dependencies:')\n      console.log(columns(info.deps.slice(0, maxDeps), {padding: 1}))\n      if (info.deps.length > maxDeps) {\n        console.log(`(...and ${info.deps.length - maxDeps} more.)`)\n      }\n    }\n\n    if (info.maintainers && info.maintainers.length) {\n      console.log('')\n      console.log('maintainers:')\n      info.maintainers.forEach((u) => console.log('-', u))\n    }\n\n    console.log('')\n    console.log('dist-tags:')\n    console.log(columns(info.tags))\n\n    if (info.publisher || info.modified) {\n      let publishInfo = 'published'\n      if (info.modified) { publishInfo += ` ${info.modified}` }\n      if (info.publisher) { publishInfo += ` by ${info.publisher}` }\n      console.log('')\n      console.log(publishInfo)\n    }\n  })\n}\n\nfunction cleanBlanks (obj) {\n  var clean = {}\n  Object.keys(obj).forEach(function (version) {\n    clean[version] = obj[version]['']\n  })\n  return clean\n}\n\nfunction reducer (l, r) {\n  if (r) {\n    Object.keys(r).forEach(function (v) {\n      l[v] = l[v] || {}\n      Object.keys(r[v]).forEach(function (t) {\n        l[v][t] = r[v][t]\n      })\n    })\n  }\n\n  return l\n}\n\n// return whatever was printed\nfunction showFields (data, version, fields) {\n  var o = {}\n  ;[data, version].forEach(function (s) {\n    Object.keys(s).forEach(function (k) {\n      o[k] = s[k]\n    })\n  })\n  return search(o, fields.split('.'), version.version, fields)\n}\n\nfunction search (data, fields, version, title) {\n  var field\n  var tail = fields\n  while (!field && fields.length) field = tail.shift()\n  fields = [field].concat(tail)\n  var o\n  if (!field && !tail.length) {\n    o = {}\n    o[version] = {}\n    o[version][title] = data\n    return o\n  }\n  var index = field.match(/(.+)\\[([^\\]]+)\\]$/)\n  if (index) {\n    field = index[1]\n    index = index[2]\n    if (data.field && data.field.hasOwnProperty(index)) {\n      return search(data[field][index], tail, version, title)\n    } else {\n      field = field + '[' + index + ']'\n    }\n  }\n  if (Array.isArray(data)) {\n    if (data.length === 1) {\n      return search(data[0], fields, version, title)\n    }\n    var results = []\n    data.forEach(function (data, i) {\n      var tl = title.length\n      var newt = title.substr(0, tl - fields.join('.').length - 1) +\n                 '[' + i + ']' + [''].concat(fields).join('.')\n      results.push(search(data, fields.slice(), version, newt))\n    })\n    results = results.reduce(reducer, {})\n    return results\n  }\n  if (!data.hasOwnProperty(field)) return undefined\n  data = data[field]\n  if (tail.length) {\n    if (typeof data === 'object') {\n      // there are more fields to deal with.\n      return search(data, tail, version, title)\n    } else {\n      return new Error('Not an object: ' + data)\n    }\n  }\n  o = {}\n  o[version] = {}\n  o[version][title] = data\n  return o\n}\n\nfunction printData (data, name, cb) {\n  var versions = Object.keys(data)\n  var msg = ''\n  var msgJson = []\n  var includeVersions = versions.length > 1\n  var includeFields\n\n  versions.forEach(function (v) {\n    var fields = Object.keys(data[v])\n    includeFields = includeFields || (fields.length > 1)\n    if (npm.config.get('json')) msgJson.push({})\n    fields.forEach(function (f) {\n      var d = cleanup(data[v][f])\n      if (fields.length === 1 && npm.config.get('json')) {\n        msgJson[msgJson.length - 1][f] = d\n      }\n      if (includeVersions || includeFields || typeof d !== 'string') {\n        if (npm.config.get('json')) {\n          msgJson[msgJson.length - 1][f] = d\n        } else {\n          d = util.inspect(d, { showHidden: false, depth: 5, colors: npm.color, maxArrayLength: null })\n        }\n      } else if (typeof d === 'string' && npm.config.get('json')) {\n        d = JSON.stringify(d)\n      }\n      if (!npm.config.get('json')) {\n        if (f && includeFields) f += ' = '\n        if (d.indexOf('\\n') !== -1) d = ' \\n' + d\n        msg += (includeVersions ? name + '@' + v + ' ' : '') +\n               (includeFields ? f : '') + d + '\\n'\n      }\n    })\n  })\n\n  if (npm.config.get('json')) {\n    if (msgJson.length && Object.keys(msgJson[0]).length === 1) {\n      var k = Object.keys(msgJson[0])[0]\n      msgJson = msgJson.map(function (m) { return m[k] })\n    }\n\n    if (msgJson.length === 1) {\n      msg = JSON.stringify(msgJson[0], null, 2) + '\\n'\n    } else if (msgJson.length > 1) {\n      msg = JSON.stringify(msgJson, null, 2) + '\\n'\n    }\n  }\n\n  // preserve output symmetry by adding a whitespace-only line at the end if\n  // there's one at the beginning\n  if (/^\\s*\\n/.test(msg)) msg += '\\n'\n\n  // disable the progress bar entirely, as we can't meaningfully update it if\n  // we may have partial lines printed.\n  log.disableProgress()\n\n  // print directly to stdout to not unnecessarily add blank lines\n  process.stdout.write(msg, () => cb(null, data))\n}\nfunction cleanup (data) {\n  if (Array.isArray(data)) {\n    return data.map(cleanup)\n  }\n  if (!data || typeof data !== 'object') return data\n\n  if (typeof data.versions === 'object' &&\n      data.versions &&\n      !Array.isArray(data.versions)) {\n    data.versions = Object.keys(data.versions || {})\n  }\n\n  var keys = Object.keys(data)\n  keys.forEach(function (d) {\n    if (d.charAt(0) === '_') delete data[d]\n    else if (typeof data[d] === 'object') data[d] = cleanup(data[d])\n  })\n  keys = Object.keys(data)\n  if (keys.length <= 3 &&\n      data.name &&\n      (keys.length === 1 ||\n       (keys.length === 3 && data.email && data.url) ||\n       (keys.length === 2 && (data.email || data.url)))) {\n    data = unparsePerson(data)\n  }\n  return data\n}\nfunction unparsePerson (d) {\n  if (typeof d === 'string') return d\n  return d.name +\n    (d.email ? ' <' + d.email + '>' : '') +\n    (d.url ? ' (' + d.url + ')' : '')\n}\n"]}