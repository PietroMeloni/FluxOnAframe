{"version":3,"sources":["../../../../node_modules/npm/lib/outdated.js"],"names":["module","exports","outdated","usage","completion","require","os","url","path","readPackageTree","asyncMap","color","styles","table","semver","npa","pickManifest","fetchPackageMetadata","mutateIntoLogicalTree","npm","long","config","get","mapToRegistry","isExtraneous","computeMetadata","computeVersionSpec","moduleName","output","ansiTrim","uniq","list","uniqed","seen","Set","forEach","item","has","add","push","andComputeMetadata","next","er","tree","args","silent","cb","dir","resolve","Infinity","set","outdated_","sort","aa","bb","localeCompare","length","makeJSON","makeParseable","outList","map","makePretty","outHead","outTable","concat","heading","underline","tableOpts","align","stringLength","s","process","exitCode","parent","slice","p","depname","want","latest","type","deppath","columns","green","magenta","dep","out","join","EOL","relative","cwd","current","wanted","location","JSON","stringify","parentHas","depth","package","name","types","pkg","children","deps","error","filter","child","Object","keys","missingDeps","isMissing","dev","test","prod","missingDevDeps","devDependencies","optionalDependencies","doUpdate","k","create","private","version","isLink","from","_from","required","dependencies","shouldUpdate","req","pkgpath","curr","skip","doIt","indexOf","parsed","updateLocalDeps","uri","auth","registry","updateDeps","latestRegistryVersion","fetchSpec","localDependency","lt","d","l","m","code","dFromUrl","parse","protocol","cFromUrl"],"mappings":"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","file":"outdated.js","sourcesContent":["/*\n\nnpm outdated [pkg]\n\nDoes the following:\n\n1. check for a new version of pkg\n\nIf no packages are specified, then run for all installed\npackages.\n\n--parseable creates output like this:\n<fullpath>:<name@wanted>:<name@installed>:<name@latest>\n\n*/\n\nmodule.exports = outdated\n\noutdated.usage = 'npm outdated [[<@scope>/]<pkg> ...]'\n\noutdated.completion = require('./utils/completion/installed-deep.js')\n\nvar os = require('os')\nvar url = require('url')\nvar path = require('path')\nvar readPackageTree = require('read-package-tree')\nvar asyncMap = require('slide').asyncMap\nvar color = require('ansicolors')\nvar styles = require('ansistyles')\nvar table = require('text-table')\nvar semver = require('semver')\nvar npa = require('npm-package-arg')\nvar pickManifest = require('npm-pick-manifest')\nvar fetchPackageMetadata = require('./fetch-package-metadata.js')\nvar mutateIntoLogicalTree = require('./install/mutate-into-logical-tree.js')\nvar npm = require('./npm.js')\nvar long = npm.config.get('long')\nvar mapToRegistry = require('./utils/map-to-registry.js')\nvar isExtraneous = require('./install/is-extraneous.js')\nvar computeMetadata = require('./install/deps.js').computeMetadata\nvar computeVersionSpec = require('./install/deps.js').computeVersionSpec\nvar moduleName = require('./utils/module-name.js')\nvar output = require('./utils/output.js')\nvar ansiTrim = require('./utils/ansi-trim')\n\nfunction uniq (list) {\n  // we maintain the array because we need an array, not iterator, return\n  // value.\n  var uniqed = []\n  var seen = new Set()\n  list.forEach(function (item) {\n    if (seen.has(item)) return\n    seen.add(item)\n    uniqed.push(item)\n  })\n  return uniqed\n}\n\nfunction andComputeMetadata (next) {\n  return function (er, tree) {\n    if (er) return next(er)\n    next(null, computeMetadata(tree))\n  }\n}\n\nfunction outdated (args, silent, cb) {\n  if (typeof cb !== 'function') {\n    cb = silent\n    silent = false\n  }\n  var dir = path.resolve(npm.dir, '..')\n\n  // default depth for `outdated` is 0 (cf. `ls`)\n  if (npm.config.get('depth') === Infinity) npm.config.set('depth', 0)\n\n  readPackageTree(dir, andComputeMetadata(function (er, tree) {\n    if (!tree) return cb(er)\n    mutateIntoLogicalTree(tree)\n    outdated_(args, '', tree, {}, 0, function (er, list) {\n      list = uniq(list || []).sort(function (aa, bb) {\n        return aa[0].path.localeCompare(bb[0].path) ||\n          aa[1].localeCompare(bb[1])\n      })\n      if (er || silent || list.length === 0) return cb(er, list)\n      if (npm.config.get('json')) {\n        output(makeJSON(list))\n      } else if (npm.config.get('parseable')) {\n        output(makeParseable(list))\n      } else {\n        var outList = list.map(makePretty)\n        var outHead = [ 'Package',\n          'Current',\n          'Wanted',\n          'Latest',\n          'Location'\n        ]\n        if (long) outHead.push('Package Type')\n        var outTable = [outHead].concat(outList)\n\n        if (npm.color) {\n          outTable[0] = outTable[0].map(function (heading) {\n            return styles.underline(heading)\n          })\n        }\n\n        var tableOpts = {\n          align: ['l', 'r', 'r', 'r', 'l'],\n          stringLength: function (s) { return ansiTrim(s).length }\n        }\n        output(table(outTable, tableOpts))\n      }\n      process.exitCode = 1\n      cb(null, list.map(function (item) { return [item[0].parent.path].concat(item.slice(1, 7)) }))\n    })\n  }))\n}\n\n// [[ dir, dep, has, want, latest, type ]]\nfunction makePretty (p) {\n  var depname = p[1]\n  var has = p[2]\n  var want = p[3]\n  var latest = p[4]\n  var type = p[6]\n  var deppath = p[7]\n\n  var columns = [ depname,\n    has || 'MISSING',\n    want,\n    latest,\n    deppath\n  ]\n  if (long) columns[5] = type\n\n  if (npm.color) {\n    columns[0] = color[has === want || want === 'linked' ? 'yellow' : 'red'](columns[0]) // dep\n    columns[2] = color.green(columns[2]) // want\n    columns[3] = color.magenta(columns[3]) // latest\n  }\n\n  return columns\n}\n\nfunction makeParseable (list) {\n  return list.map(function (p) {\n    var dep = p[0]\n    var depname = p[1]\n    var dir = dep.path\n    var has = p[2]\n    var want = p[3]\n    var latest = p[4]\n    var type = p[6]\n\n    var out = [\n      dir,\n      depname + '@' + want,\n      (has ? (depname + '@' + has) : 'MISSING'),\n      depname + '@' + latest\n    ]\n    if (long) out.push(type)\n\n    return out.join(':')\n  }).join(os.EOL)\n}\n\nfunction makeJSON (list) {\n  var out = {}\n  list.forEach(function (p) {\n    var dep = p[0]\n    var depname = p[1]\n    var dir = dep.path\n    var has = p[2]\n    var want = p[3]\n    var latest = p[4]\n    var type = p[6]\n    if (!npm.config.get('global')) {\n      dir = path.relative(process.cwd(), dir)\n    }\n    out[depname] = { current: has,\n      wanted: want,\n      latest: latest,\n      location: dir\n    }\n    if (long) out[depname].type = type\n  })\n  return JSON.stringify(out, null, 2)\n}\n\nfunction outdated_ (args, path, tree, parentHas, depth, cb) {\n  if (!tree.package) tree.package = {}\n  if (path && tree.package.name) path += ' > ' + tree.package.name\n  if (!path && tree.package.name) path = tree.package.name\n  if (depth > npm.config.get('depth')) {\n    return cb(null, [])\n  }\n  var types = {}\n  var pkg = tree.package\n\n  if (!tree.children) tree.children = []\n\n  var deps = tree.error ? tree.children : tree.children.filter((child) => !isExtraneous(child))\n\n  deps.forEach(function (dep) {\n    types[moduleName(dep)] = 'dependencies'\n  })\n\n  Object.keys(tree.missingDeps || {}).forEach(function (name) {\n    deps.push({\n      package: { name: name },\n      path: tree.path,\n      parent: tree,\n      isMissing: true\n    })\n    types[name] = 'dependencies'\n  })\n\n  // If we explicitly asked for dev deps OR we didn't ask for production deps\n  // AND we asked to save dev-deps OR we didn't ask to save anything that's NOT\n  // dev deps then…\n  // (All the save checking here is because this gets called from npm-update currently\n  // and that requires this logic around dev deps.)\n  // FIXME: Refactor npm update to not be in terms of outdated.\n  var dev = npm.config.get('dev') || /^dev(elopment)?$/.test(npm.config.get('also'))\n  var prod = npm.config.get('production') || /^prod(uction)?$/.test(npm.config.get('only'))\n  if ((dev || !prod) &&\n      (npm.config.get('save-dev') || (\n        !npm.config.get('save') && !npm.config.get('save-optional')))) {\n    Object.keys(tree.missingDevDeps).forEach(function (name) {\n      deps.push({\n        package: { name: name },\n        path: tree.path,\n        parent: tree,\n        isMissing: true\n      })\n      if (!types[name]) {\n        types[name] = 'devDependencies'\n      }\n    })\n  }\n\n  if (npm.config.get('save-dev')) {\n    deps = deps.filter(function (dep) { return pkg.devDependencies[moduleName(dep)] })\n    deps.forEach(function (dep) {\n      types[moduleName(dep)] = 'devDependencies'\n    })\n  } else if (npm.config.get('save')) {\n    // remove optional dependencies from dependencies during --save.\n    deps = deps.filter(function (dep) { return !pkg.optionalDependencies[moduleName(dep)] })\n  } else if (npm.config.get('save-optional')) {\n    deps = deps.filter(function (dep) { return pkg.optionalDependencies[moduleName(dep)] })\n    deps.forEach(function (dep) {\n      types[moduleName(dep)] = 'optionalDependencies'\n    })\n  }\n  var doUpdate = dev || (\n    !prod &&\n    !Object.keys(parentHas).length &&\n    !npm.config.get('global')\n  )\n  if (doUpdate) {\n    Object.keys(pkg.devDependencies || {}).forEach(function (k) {\n      if (!(k in parentHas)) {\n        deps[k] = pkg.devDependencies[k]\n        types[k] = 'devDependencies'\n      }\n    })\n  }\n\n  var has = Object.create(parentHas)\n  tree.children.forEach(function (child) {\n    if (child.package.name && child.package.private) {\n      deps = deps.filter(function (dep) { return dep !== child })\n    }\n    has[child.package.name] = {\n      version: child.isLink ? 'linked' : child.package.version,\n      from: child.isLink ? 'file:' + child.path : child.package._from\n    }\n  })\n\n  // now get what we should have, based on the dep.\n  // if has[dep] !== shouldHave[dep], then cb with the data\n  // otherwise dive into the folder\n  asyncMap(deps, function (dep, cb) {\n    var name = moduleName(dep)\n    var required\n    if (tree.package.dependencies && name in tree.package.dependencies) {\n      required = tree.package.dependencies[name]\n    } else if (tree.package.optionalDependencies && name in tree.package.optionalDependencies) {\n      required = tree.package.optionalDependencies[name]\n    } else if (tree.package.devDependencies && name in tree.package.devDependencies) {\n      required = tree.package.devDependencies[name]\n    } else if (has[name]) {\n      required = computeVersionSpec(tree, dep)\n    }\n\n    if (!long) return shouldUpdate(args, dep, name, has, required, depth, path, cb)\n\n    shouldUpdate(args, dep, name, has, required, depth, path, cb, types[name])\n  }, cb)\n}\n\nfunction shouldUpdate (args, tree, dep, has, req, depth, pkgpath, cb, type) {\n  // look up the most recent version.\n  // if that's what we already have, or if it's not on the args list,\n  // then dive into it.  Otherwise, cb() with the data.\n\n  // { version: , from: }\n  var curr = has[dep]\n\n  function skip (er) {\n    // show user that no viable version can be found\n    if (er) return cb(er)\n    outdated_(args,\n      pkgpath,\n      tree,\n      has,\n      depth + 1,\n      cb)\n  }\n\n  function doIt (wanted, latest) {\n    if (!long) {\n      return cb(null, [[tree, dep, curr && curr.version, wanted, latest, req, null, pkgpath]])\n    }\n    cb(null, [[tree, dep, curr && curr.version, wanted, latest, req, type, pkgpath]])\n  }\n\n  if (args.length && args.indexOf(dep) === -1) return skip()\n\n  if (tree.isLink && req == null) return skip()\n\n  if (req == null || req === '') req = '*'\n\n  var parsed = npa.resolve(dep, req)\n  if (parsed.type === 'directory') {\n    if (tree.isLink) {\n      return skip()\n    } else {\n      return doIt('linked', 'linked')\n    }\n  } else if (parsed.type === 'git') {\n    return doIt('git', 'git')\n  } else if (parsed.type === 'file') {\n    return updateLocalDeps()\n  } else {\n    return mapToRegistry(dep, npm.config, function (er, uri, auth) {\n      if (er) return cb(er)\n\n      npm.registry.get(uri, { auth: auth }, updateDeps)\n    })\n  }\n\n  function updateLocalDeps (latestRegistryVersion) {\n    fetchPackageMetadata('file:' + parsed.fetchSpec, '.', (er, localDependency) => {\n      if (er) return cb()\n\n      var wanted = localDependency.version\n      var latest = localDependency.version\n\n      if (latestRegistryVersion) {\n        latest = latestRegistryVersion\n        if (semver.lt(wanted, latestRegistryVersion)) {\n          wanted = latestRegistryVersion\n          req = dep + '@' + latest\n        }\n      }\n\n      if (!curr || curr.version !== wanted) {\n        doIt(wanted, latest)\n      } else {\n        skip()\n      }\n    })\n  }\n\n  function updateDeps (er, d) {\n    if (er) return cb(er)\n\n    try {\n      var l = pickManifest(d, 'latest')\n      var m = pickManifest(d, req)\n    } catch (er) {\n      if (er.code === 'ETARGET') {\n        return skip(er)\n      } else {\n        return skip()\n      }\n    }\n\n    // check that the url origin hasn't changed (#1727) and that\n    // there is no newer version available\n    var dFromUrl = m._from && url.parse(m._from).protocol\n    var cFromUrl = curr && curr.from && url.parse(curr.from).protocol\n\n    if (!curr ||\n        (dFromUrl && cFromUrl && m._from !== curr.from) ||\n        m.version !== curr.version ||\n        m.version !== l.version) {\n      doIt(m.version, l.version)\n    } else {\n      skip()\n    }\n  }\n}\n"]}