'use strict';

var BB = require('bluebird');

var extract = require('pacote/extract');
var npmlog = require('npmlog');

module.exports = function (args, cb) {
  var parsed = typeof args === 'string' ? JSON.parse(args) : args;
  var spec = parsed[0];
  var extractTo = parsed[1];
  var opts = parsed[2];
  if (!opts.log) {
    opts.log = npmlog;
  }
  opts.log.level = opts.loglevel || opts.log.level;
  BB.resolve(extract(spec, extractTo, opts)).nodeify(cb);
};
//# sourceMappingURL=extract-worker.js.map