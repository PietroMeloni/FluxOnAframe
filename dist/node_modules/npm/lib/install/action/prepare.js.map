{"version":3,"sources":["../../../../../../node_modules/npm/lib/install/action/prepare.js"],"names":["chain","require","lifecycle","packageId","prepublishWarning","moduleStagingPath","module","exports","staging","pkg","log","next","silly","package","scripts","prepublish","buildpath"],"mappings":"AAAA;;AACA,IAAIA,QAAQC,QAAQ,OAAR,EAAiBD,KAA7B;AACA,IAAIE,YAAYD,QAAQ,0BAAR,CAAhB;AACA,IAAIE,YAAYF,QAAQ,2BAAR,CAAhB;AACA,IAAIG,oBAAoBH,QAAQ,gCAAR,EAA0C,uBAA1C,CAAxB;AACA,IAAII,oBAAoBJ,QAAQ,2BAAR,CAAxB;;AAEAK,OAAOC,OAAP,GAAiB,UAAUC,OAAV,EAAmBC,GAAnB,EAAwBC,GAAxB,EAA6BC,IAA7B,EAAmC;AAClDD,MAAIE,KAAJ,CAAU,YAAV,EAAwBT,UAAUM,GAAV,CAAxB;AACA;AACA;AACA,MAAIA,IAAII,OAAJ,IAAeJ,IAAII,OAAJ,CAAYC,OAA3B,IAAsCL,IAAII,OAAJ,CAAYC,OAAZ,CAAoBC,UAA9D,EAA0E;AACxEX,sBAAkB,CAChB,mDADgB,EAEhB,qEAFgB,EAGhB,sEAHgB,CAAlB;AAKD;AACD,MAAIY,YAAYX,kBAAkBG,OAAlB,EAA2BC,GAA3B,CAAhB;AACAT,QACE,CACE,CAACE,SAAD,EAAYO,IAAII,OAAhB,EAAyB,YAAzB,EAAuCG,SAAvC,CADF,EAEE,CAACd,SAAD,EAAYO,IAAII,OAAhB,EAAyB,SAAzB,EAAoCG,SAApC,CAFF,CADF,EAKEL,IALF;AAOD,CAnBD","file":"prepare.js","sourcesContent":["'use strict'\nvar chain = require('slide').chain\nvar lifecycle = require('../../utils/lifecycle.js')\nvar packageId = require('../../utils/package-id.js')\nvar prepublishWarning = require('../../utils/warn-deprecated.js')('prepublish-on-install')\nvar moduleStagingPath = require('../module-staging-path.js')\n\nmodule.exports = function (staging, pkg, log, next) {\n  log.silly('prepublish', packageId(pkg))\n  // TODO: for `npm@5`, change the behavior and remove this warning.\n  // see https://github.com/npm/npm/issues/10074 for details\n  if (pkg.package && pkg.package.scripts && pkg.package.scripts.prepublish) {\n    prepublishWarning([\n      'As of npm@5, `prepublish` scripts are deprecated.',\n      'Use `prepare` for build steps and `prepublishOnly` for upload-only.',\n      'See the deprecation note in `npm help scripts` for more information.'\n    ])\n  }\n  var buildpath = moduleStagingPath(staging, pkg)\n  chain(\n    [\n      [lifecycle, pkg.package, 'prepublish', buildpath],\n      [lifecycle, pkg.package, 'prepare', buildpath]\n    ],\n    next\n  )\n}\n"]}