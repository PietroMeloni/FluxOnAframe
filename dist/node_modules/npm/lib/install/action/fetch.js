'use strict';

var BB = require('bluebird');

var finished = BB.promisify(require('mississippi').finished);
var packageId = require('../../utils/package-id.js');
var pacote = require('pacote');
var pacoteOpts = require('../../config/pacote');

module.exports = fetch;
function fetch(staging, pkg, log, next) {
  log.silly('fetch', packageId(pkg));
  var opts = pacoteOpts({ integrity: pkg.package._integrity });
  return finished(pacote.tarball.stream(pkg.package._requested, opts)).then(function () {
    return next();
  }, next);
}
//# sourceMappingURL=fetch.js.map