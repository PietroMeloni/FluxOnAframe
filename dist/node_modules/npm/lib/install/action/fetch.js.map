{"version":3,"sources":["../../../../../../node_modules/npm/lib/install/action/fetch.js"],"names":["BB","require","finished","promisify","packageId","pacote","pacoteOpts","module","exports","fetch","staging","pkg","log","next","silly","opts","integrity","package","_integrity","tarball","stream","_requested","then"],"mappings":"AAAA;;AAEA,IAAMA,KAAKC,QAAQ,UAAR,CAAX;;AAEA,IAAMC,WAAWF,GAAGG,SAAH,CAAaF,QAAQ,aAAR,EAAuBC,QAApC,CAAjB;AACA,IAAME,YAAYH,QAAQ,2BAAR,CAAlB;AACA,IAAMI,SAASJ,QAAQ,QAAR,CAAf;AACA,IAAMK,aAAaL,QAAQ,qBAAR,CAAnB;;AAEAM,OAAOC,OAAP,GAAiBC,KAAjB;AACA,SAASA,KAAT,CAAgBC,OAAhB,EAAyBC,GAAzB,EAA8BC,GAA9B,EAAmCC,IAAnC,EAAyC;AACvCD,MAAIE,KAAJ,CAAU,OAAV,EAAmBV,UAAUO,GAAV,CAAnB;AACA,MAAMI,OAAOT,WAAW,EAACU,WAAWL,IAAIM,OAAJ,CAAYC,UAAxB,EAAX,CAAb;AACA,SAAOhB,SAASG,OAAOc,OAAP,CAAeC,MAAf,CAAsBT,IAAIM,OAAJ,CAAYI,UAAlC,EAA8CN,IAA9C,CAAT,EACJO,IADI,CACC;AAAA,WAAMT,MAAN;AAAA,GADD,EACeA,IADf,CAAP;AAED","file":"fetch.js","sourcesContent":["'use strict'\n\nconst BB = require('bluebird')\n\nconst finished = BB.promisify(require('mississippi').finished)\nconst packageId = require('../../utils/package-id.js')\nconst pacote = require('pacote')\nconst pacoteOpts = require('../../config/pacote')\n\nmodule.exports = fetch\nfunction fetch (staging, pkg, log, next) {\n  log.silly('fetch', packageId(pkg))\n  const opts = pacoteOpts({integrity: pkg.package._integrity})\n  return finished(pacote.tarball.stream(pkg.package._requested, opts))\n    .then(() => next(), next)\n}\n"]}