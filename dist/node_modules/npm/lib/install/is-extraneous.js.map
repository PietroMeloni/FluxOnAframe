{"version":3,"sources":["../../../../../node_modules/npm/lib/install/is-extraneous.js"],"names":["module","exports","isExtraneous","tree","result","isNotExtraneous","topHasNoPjson","top","isTop","parent","error","isCycle","userRequired","path","requiredBy","some","node","Object","create"],"mappings":"AAAA;;AACAA,OAAOC,OAAP,GAAiBC,YAAjB;;AAEA,SAASA,YAAT,CAAuBC,IAAvB,EAA6B;AAC3B,MAAIC,SAAS,CAACC,gBAAgBF,IAAhB,CAAd;AACA,SAAOC,MAAP;AACD;;AAED,SAASE,aAAT,CAAwBH,IAAxB,EAA8B;AAC5B,MAAII,MAAMJ,IAAV;AACA,SAAO,CAACI,IAAIC,KAAZ;AAAmBD,UAAMA,IAAIE,MAAV;AAAnB,GACA,OAAOF,IAAIG,KAAX;AACD;;AAED,SAASL,eAAT,CAA0BF,IAA1B,EAAgCQ,OAAhC,EAAyC;AACvC,MAAI,CAACA,OAAL,EAAcA,UAAU,EAAV;AACd,MAAIR,KAAKK,KAAL,IAAcL,KAAKS,YAAvB,EAAqC;AACnC,WAAO,IAAP;AACD,GAFD,MAEO,IAAID,QAAQR,KAAKU,IAAb,CAAJ,EAAwB;AAC7B,WAAOP,cAAcH,IAAd,CAAP;AACD,GAFM,MAEA;AACLQ,YAAQR,KAAKU,IAAb,IAAqB,IAArB;AACA,WAAOV,KAAKW,UAAL,IAAmBX,KAAKW,UAAL,CAAgBC,IAAhB,CAAqB,UAAUC,IAAV,EAAgB;AAC7D,aAAOX,gBAAgBW,IAAhB,EAAsBC,OAAOC,MAAP,CAAcP,OAAd,CAAtB,CAAP;AACD,KAFyB,CAA1B;AAGD;AACF","file":"is-extraneous.js","sourcesContent":["'use strict'\nmodule.exports = isExtraneous\n\nfunction isExtraneous (tree) {\n  var result = !isNotExtraneous(tree)\n  return result\n}\n\nfunction topHasNoPjson (tree) {\n  var top = tree\n  while (!top.isTop) top = top.parent\n  return top.error\n}\n\nfunction isNotExtraneous (tree, isCycle) {\n  if (!isCycle) isCycle = {}\n  if (tree.isTop || tree.userRequired) {\n    return true\n  } else if (isCycle[tree.path]) {\n    return topHasNoPjson(tree)\n  } else {\n    isCycle[tree.path] = true\n    return tree.requiredBy && tree.requiredBy.some(function (node) {\n      return isNotExtraneous(node, Object.create(isCycle))\n    })\n  }\n}\n"]}