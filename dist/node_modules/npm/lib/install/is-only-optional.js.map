{"version":3,"sources":["../../../../../node_modules/npm/lib/install/is-only-optional.js"],"names":["module","exports","isOptional","isOptDep","require","node","seen","Set","has","requiredBy","length","add","swOptional","fromShrinkwrap","package","_optional","every","req","fakeChild","name"],"mappings":"AAAA;;AACAA,OAAOC,OAAP,GAAiBC,UAAjB;;AAEA,IAAMC,WAAWC,QAAQ,iBAAR,CAAjB;;AAEA,SAASF,UAAT,CAAqBG,IAArB,EAA2BC,IAA3B,EAAiC;AAC/B,MAAI,CAACA,IAAL,EAAWA,OAAO,IAAIC,GAAJ,EAAP;AACX;AACA;AACA,MAAID,KAAKE,GAAL,CAASH,IAAT,KAAkBA,KAAKI,UAAL,CAAgBC,MAAhB,KAA2B,CAAjD,EAAoD;AAClD,WAAO,KAAP;AACD;AACDJ,OAAKK,GAAL,CAASN,IAAT;AACA,MAAMO,aAAaP,KAAKQ,cAAL,IAAuBR,KAAKS,OAAL,CAAaC,SAAvD;AACA,SAAOV,KAAKI,UAAL,CAAgBO,KAAhB,CAAsB,UAAUC,GAAV,EAAe;AAC1C,QAAIA,IAAIC,SAAJ,IAAiBN,UAArB,EAAiC,OAAO,IAAP;AACjC,WAAOT,SAASc,GAAT,EAAcZ,KAAKS,OAAL,CAAaK,IAA3B,KAAoCjB,WAAWe,GAAX,EAAgBX,IAAhB,CAA3C;AACD,GAHM,CAAP;AAID","file":"is-only-optional.js","sourcesContent":["'use strict'\nmodule.exports = isOptional\n\nconst isOptDep = require('./is-opt-dep.js')\n\nfunction isOptional (node, seen) {\n  if (!seen) seen = new Set()\n  // If a node is not required by anything, then we've reached\n  // the top level package.\n  if (seen.has(node) || node.requiredBy.length === 0) {\n    return false\n  }\n  seen.add(node)\n  const swOptional = node.fromShrinkwrap && node.package._optional\n  return node.requiredBy.every(function (req) {\n    if (req.fakeChild && swOptional) return true\n    return isOptDep(req, node.package.name) || isOptional(req, seen)\n  })\n}\n"]}