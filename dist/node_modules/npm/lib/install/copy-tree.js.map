{"version":3,"sources":["../../../../../node_modules/npm/lib/install/copy-tree.js"],"names":["createNode","require","create","module","exports","tree","copyTree","cache","path","newTree","Object","assign","copyModuleList","children","forEach","child","parent","key","newList","copy","push"],"mappings":"AAAA;;AACA,IAAIA,aAAaC,QAAQ,WAAR,EAAqBC,MAAtC;AACAC,OAAOC,OAAP,GAAiB,UAAUC,IAAV,EAAgB;AAC/B,SAAOC,SAASD,IAAT,EAAe,EAAf,CAAP;AACD,CAFD;;AAIA,SAASC,QAAT,CAAmBD,IAAnB,EAAyBE,KAAzB,EAAgC;AAC9B,MAAIA,MAAMF,KAAKG,IAAX,CAAJ,EAAsB;AAAE,WAAOD,MAAMF,KAAKG,IAAX,CAAP;AAAyB;AACjD,MAAIC,UAAUF,MAAMF,KAAKG,IAAX,IAAmBR,WAAWU,OAAOC,MAAP,CAAc,EAAd,EAAkBN,IAAlB,CAAX,CAAjC;AACAO,iBAAeH,OAAf,EAAwB,UAAxB,EAAoCF,KAApC;AACAE,UAAQI,QAAR,CAAiBC,OAAjB,CAAyB,UAAUC,KAAV,EAAiB;AACxCA,UAAMC,MAAN,GAAeP,OAAf;AACD,GAFD;AAGAG,iBAAeH,OAAf,EAAwB,UAAxB,EAAoCF,KAApC;AACAK,iBAAeH,OAAf,EAAwB,YAAxB,EAAsCF,KAAtC;AACA,SAAOE,OAAP;AACD;;AAED,SAASG,cAAT,CAAyBP,IAAzB,EAA+BY,GAA/B,EAAoCV,KAApC,EAA2C;AACzC,MAAIW,UAAU,EAAd;AACA,MAAIb,KAAKY,GAAL,CAAJ,EAAe;AACbZ,SAAKY,GAAL,EAAUH,OAAV,CAAkB,UAAUC,KAAV,EAAiB;AACjC,UAAMI,OAAOb,SAASS,KAAT,EAAgBR,KAAhB,CAAb;AACA,UAAIY,IAAJ,EAAU;AACRD,gBAAQE,IAAR,CAAaD,IAAb;AACD;AACF,KALD;AAMD;AACDd,OAAKY,GAAL,IAAYC,OAAZ;AACD","file":"copy-tree.js","sourcesContent":["'use strict'\nvar createNode = require('./node.js').create\nmodule.exports = function (tree) {\n  return copyTree(tree, {})\n}\n\nfunction copyTree (tree, cache) {\n  if (cache[tree.path]) { return cache[tree.path] }\n  var newTree = cache[tree.path] = createNode(Object.assign({}, tree))\n  copyModuleList(newTree, 'children', cache)\n  newTree.children.forEach(function (child) {\n    child.parent = newTree\n  })\n  copyModuleList(newTree, 'requires', cache)\n  copyModuleList(newTree, 'requiredBy', cache)\n  return newTree\n}\n\nfunction copyModuleList (tree, key, cache) {\n  var newList = []\n  if (tree[key]) {\n    tree[key].forEach(function (child) {\n      const copy = copyTree(child, cache)\n      if (copy) {\n        newList.push(copy)\n      }\n    })\n  }\n  tree[key] = newList\n}\n"]}