{"version":3,"sources":["../../../../node_modules/npm/scripts/index-build.js"],"names":["fs","require","path","root","resolve","__dirname","glob","conversion","er","files","output","map","f","b","basename","s","dirname","filter","sort","a","console","log","writeLines","sxn","heading","desc","forEach","writeLine","sd","doc","d","content","readFileSync","split"],"mappings":"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","file":"index-build.js","sourcesContent":["\nvar fs = require('fs')\nvar path = require('path')\nvar root = path.resolve(__dirname, '..')\nvar glob = require('glob')\nvar conversion = { 'cli': 1, 'api': 3, 'files': 5, 'misc': 7 }\n\nglob(root + '/{README.md,doc/*/*.md}', function (er, files) {\n  if (er) throw er\n\n  output(files.map(function (f) {\n    var b = path.basename(f)\n    if (b === 'README.md') return [0, b]\n    if (b === 'index.md') return null\n    var s = conversion[path.basename(path.dirname(f))]\n    return [s, f]\n  }).filter(function (f) {\n    return f\n  }).sort(function (a, b) {\n    return (a[0] === b[0])\n      ? (path.basename(a[1]) === 'npm.md' ? -1\n        : path.basename(b[1]) === 'npm.md' ? 1\n          : a[1] > b[1] ? 1 : -1)\n      : a[0] - b[0]\n  }))\n})\n\nfunction output (files) {\n  console.log(\n    'npm-index(7) -- Index of all npm documentation\\n' +\n    '==============================================\\n')\n\n  writeLines(files, 0)\n  writeLines(files, 1, 'Command Line Documentation', 'Using npm on the command line')\n  writeLines(files, 3, 'API Documentation', 'Using npm in your Node programs')\n  writeLines(files, 5, 'Files', 'File system structures npm uses')\n  writeLines(files, 7, 'Misc', 'Various other bits and bobs')\n}\n\nfunction writeLines (files, sxn, heading, desc) {\n  if (heading) {\n    console.log('## %s\\n\\n%s\\n', heading, desc)\n  }\n  files.filter(function (f) {\n    return f[0] === sxn\n  }).forEach(writeLine)\n}\n\nfunction writeLine (sd) {\n  var sxn = sd[0] || 1\n  var doc = sd[1]\n  var d = path.basename(doc, '.md')\n\n  var content = fs.readFileSync(doc, 'utf8').split('\\n')[0].split('-- ')[1]\n\n  console.log('### %s(%d)\\n', d, sxn)\n  console.log(content + '\\n')\n}\n"]}