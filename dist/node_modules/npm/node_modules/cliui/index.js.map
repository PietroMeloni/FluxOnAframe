{"version":3,"sources":["../../../../../node_modules/npm/node_modules/cliui/index.js"],"names":["stringWidth","require","stripAnsi","wrap","align","right","alignRight","center","alignCenter","top","bottom","left","UI","opts","width","rows","prototype","span","cols","div","apply","arguments","resetOutput","length","_shouldApplyLayoutDSL","_applyLayoutDSL","i","arg","undefined","push","_colFromString","test","str","_this","split","leftColumnWidth","forEach","row","columns","Math","min","floor","map","r","text","trim","padding","_measurePadding","noAnsi","match","toString","lines","rowToString","filter","line","hidden","join","rrows","_rasterize","ts","wrapWidth","rrow","col","c","_negatePadding","Array","addBorder","_renderInline","replace","style","border","source","previousLine","leadingWhitespace","target","targetTextWidth","trimRight","trimLeft","widths","_columnWidths","wrapped","hard","unshift","unset","unsetWidth","remainingWidth","w","max","_minWidth","minWidth","getWindowWidth","process","stdout","strWidth","parseInt","module","exports"],"mappings":"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","file":"index.js","sourcesContent":["var stringWidth = require('string-width')\nvar stripAnsi = require('strip-ansi')\nvar wrap = require('wrap-ansi')\nvar align = {\n  right: alignRight,\n  center: alignCenter\n}\nvar top = 0\nvar right = 1\nvar bottom = 2\nvar left = 3\n\nfunction UI (opts) {\n  this.width = opts.width\n  this.wrap = opts.wrap\n  this.rows = []\n}\n\nUI.prototype.span = function () {\n  var cols = this.div.apply(this, arguments)\n  cols.span = true\n}\n\nUI.prototype.resetOutput = function () {\n  this.rows = []\n}\n\nUI.prototype.div = function () {\n  if (arguments.length === 0) this.div('')\n  if (this.wrap && this._shouldApplyLayoutDSL.apply(this, arguments)) {\n    return this._applyLayoutDSL(arguments[0])\n  }\n\n  var cols = []\n\n  for (var i = 0, arg; (arg = arguments[i]) !== undefined; i++) {\n    if (typeof arg === 'string') cols.push(this._colFromString(arg))\n    else cols.push(arg)\n  }\n\n  this.rows.push(cols)\n  return cols\n}\n\nUI.prototype._shouldApplyLayoutDSL = function () {\n  return arguments.length === 1 && typeof arguments[0] === 'string' &&\n    /[\\t\\n]/.test(arguments[0])\n}\n\nUI.prototype._applyLayoutDSL = function (str) {\n  var _this = this\n  var rows = str.split('\\n')\n  var leftColumnWidth = 0\n\n  // simple heuristic for layout, make sure the\n  // second column lines up along the left-hand.\n  // don't allow the first column to take up more\n  // than 50% of the screen.\n  rows.forEach(function (row) {\n    var columns = row.split('\\t')\n    if (columns.length > 1 && stringWidth(columns[0]) > leftColumnWidth) {\n      leftColumnWidth = Math.min(\n        Math.floor(_this.width * 0.5),\n        stringWidth(columns[0])\n      )\n    }\n  })\n\n  // generate a table:\n  //  replacing ' ' with padding calculations.\n  //  using the algorithmically generated width.\n  rows.forEach(function (row) {\n    var columns = row.split('\\t')\n    _this.div.apply(_this, columns.map(function (r, i) {\n      return {\n        text: r.trim(),\n        padding: _this._measurePadding(r),\n        width: (i === 0 && columns.length > 1) ? leftColumnWidth : undefined\n      }\n    }))\n  })\n\n  return this.rows[this.rows.length - 1]\n}\n\nUI.prototype._colFromString = function (str) {\n  return {\n    text: str,\n    padding: this._measurePadding(str)\n  }\n}\n\nUI.prototype._measurePadding = function (str) {\n  // measure padding without ansi escape codes\n  var noAnsi = stripAnsi(str)\n  return [0, noAnsi.match(/\\s*$/)[0].length, 0, noAnsi.match(/^\\s*/)[0].length]\n}\n\nUI.prototype.toString = function () {\n  var _this = this\n  var lines = []\n\n  _this.rows.forEach(function (row, i) {\n    _this.rowToString(row, lines)\n  })\n\n  // don't display any lines with the\n  // hidden flag set.\n  lines = lines.filter(function (line) {\n    return !line.hidden\n  })\n\n  return lines.map(function (line) {\n    return line.text\n  }).join('\\n')\n}\n\nUI.prototype.rowToString = function (row, lines) {\n  var _this = this\n  var padding\n  var rrows = this._rasterize(row)\n  var str = ''\n  var ts\n  var width\n  var wrapWidth\n\n  rrows.forEach(function (rrow, r) {\n    str = ''\n    rrow.forEach(function (col, c) {\n      ts = '' // temporary string used during alignment/padding.\n      width = row[c].width // the width with padding.\n      wrapWidth = _this._negatePadding(row[c]) // the width without padding.\n\n      ts += col\n\n      for (var i = 0; i < wrapWidth - stringWidth(col); i++) {\n        ts += ' '\n      }\n\n      // align the string within its column.\n      if (row[c].align && row[c].align !== 'left' && _this.wrap) {\n        ts = align[row[c].align](ts, wrapWidth)\n        if (stringWidth(ts) < wrapWidth) ts += new Array(width - stringWidth(ts)).join(' ')\n      }\n\n      // apply border and padding to string.\n      padding = row[c].padding || [0, 0, 0, 0]\n      if (padding[left]) str += new Array(padding[left] + 1).join(' ')\n      str += addBorder(row[c], ts, '| ')\n      str += ts\n      str += addBorder(row[c], ts, ' |')\n      if (padding[right]) str += new Array(padding[right] + 1).join(' ')\n\n      // if prior row is span, try to render the\n      // current row on the prior line.\n      if (r === 0 && lines.length > 0) {\n        str = _this._renderInline(str, lines[lines.length - 1])\n      }\n    })\n\n    // remove trailing whitespace.\n    lines.push({\n      text: str.replace(/ +$/, ''),\n      span: row.span\n    })\n  })\n\n  return lines\n}\n\nfunction addBorder (col, ts, style) {\n  if (col.border) {\n    if (/[.']-+[.']/.test(ts)) return ''\n    else if (ts.trim().length) return style\n    else return '  '\n  }\n  return ''\n}\n\n// if the full 'source' can render in\n// the target line, do so.\nUI.prototype._renderInline = function (source, previousLine) {\n  var leadingWhitespace = source.match(/^ */)[0].length\n  var target = previousLine.text\n  var targetTextWidth = stringWidth(target.trimRight())\n\n  if (!previousLine.span) return source\n\n  // if we're not applying wrapping logic,\n  // just always append to the span.\n  if (!this.wrap) {\n    previousLine.hidden = true\n    return target + source\n  }\n\n  if (leadingWhitespace < targetTextWidth) return source\n\n  previousLine.hidden = true\n\n  return target.trimRight() + new Array(leadingWhitespace - targetTextWidth + 1).join(' ') + source.trimLeft()\n}\n\nUI.prototype._rasterize = function (row) {\n  var _this = this\n  var i\n  var rrow\n  var rrows = []\n  var widths = this._columnWidths(row)\n  var wrapped\n\n  // word wrap all columns, and create\n  // a data-structure that is easy to rasterize.\n  row.forEach(function (col, c) {\n    // leave room for left and right padding.\n    col.width = widths[c]\n    if (_this.wrap) wrapped = wrap(col.text, _this._negatePadding(col), { hard: true }).split('\\n')\n    else wrapped = col.text.split('\\n')\n\n    if (col.border) {\n      wrapped.unshift('.' + new Array(_this._negatePadding(col) + 3).join('-') + '.')\n      wrapped.push(\"'\" + new Array(_this._negatePadding(col) + 3).join('-') + \"'\")\n    }\n\n    // add top and bottom padding.\n    if (col.padding) {\n      for (i = 0; i < (col.padding[top] || 0); i++) wrapped.unshift('')\n      for (i = 0; i < (col.padding[bottom] || 0); i++) wrapped.push('')\n    }\n\n    wrapped.forEach(function (str, r) {\n      if (!rrows[r]) rrows.push([])\n\n      rrow = rrows[r]\n\n      for (var i = 0; i < c; i++) {\n        if (rrow[i] === undefined) rrow.push('')\n      }\n      rrow.push(str)\n    })\n  })\n\n  return rrows\n}\n\nUI.prototype._negatePadding = function (col) {\n  var wrapWidth = col.width\n  if (col.padding) wrapWidth -= (col.padding[left] || 0) + (col.padding[right] || 0)\n  if (col.border) wrapWidth -= 4\n  return wrapWidth\n}\n\nUI.prototype._columnWidths = function (row) {\n  var _this = this\n  var widths = []\n  var unset = row.length\n  var unsetWidth\n  var remainingWidth = this.width\n\n  // column widths can be set in config.\n  row.forEach(function (col, i) {\n    if (col.width) {\n      unset--\n      widths[i] = col.width\n      remainingWidth -= col.width\n    } else {\n      widths[i] = undefined\n    }\n  })\n\n  // any unset widths should be calculated.\n  if (unset) unsetWidth = Math.floor(remainingWidth / unset)\n  widths.forEach(function (w, i) {\n    if (!_this.wrap) widths[i] = row[i].width || stringWidth(row[i].text)\n    else if (w === undefined) widths[i] = Math.max(unsetWidth, _minWidth(row[i]))\n  })\n\n  return widths\n}\n\n// calculates the minimum width of\n// a column, based on padding preferences.\nfunction _minWidth (col) {\n  var padding = col.padding || []\n  var minWidth = 1 + (padding[left] || 0) + (padding[right] || 0)\n  if (col.border) minWidth += 4\n  return minWidth\n}\n\nfunction getWindowWidth () {\n  if (typeof process === 'object' && process.stdout && process.stdout.columns) return process.stdout.columns\n}\n\nfunction alignRight (str, width) {\n  str = str.trim()\n  var padding = ''\n  var strWidth = stringWidth(str)\n\n  if (strWidth < width) {\n    padding = new Array(width - strWidth + 1).join(' ')\n  }\n\n  return padding + str\n}\n\nfunction alignCenter (str, width) {\n  str = str.trim()\n  var padding = ''\n  var strWidth = stringWidth(str.trim())\n\n  if (strWidth < width) {\n    padding = new Array(parseInt((width - strWidth) / 2, 10) + 1).join(' ')\n  }\n\n  return padding + str\n}\n\nmodule.exports = function (opts) {\n  opts = opts || {}\n\n  return new UI({\n    width: (opts || {}).width || getWindowWidth() || 80,\n    wrap: typeof opts.wrap === 'boolean' ? opts.wrap : true\n  })\n}\n"]}