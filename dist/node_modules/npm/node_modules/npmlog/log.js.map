{"version":3,"sources":["../../../../../node_modules/npm/node_modules/npmlog/log.js"],"names":["Progress","require","Gauge","EE","EventEmitter","log","exports","module","util","setBlocking","consoleControl","stream","process","stderr","Object","defineProperty","set","newStream","gauge","setWriteTo","get","colorEnabled","useColor","isTTY","enableColor","setTheme","hasColor","hasUnicode","unicodeEnabled","disableColor","level","enabled","theme","template","type","length","kerning","default","tracker","TrackerGroup","progressEnabled","isEnabled","enableUnicode","disableUnicode","setGaugeThemeset","themes","setThemeset","setGaugeTemplate","setTemplate","enableProgress","on","showProgress","_pause","enable","disableProgress","removeListener","disable","trackerConstructors","mixinLog","keys","forEach","P","filter","C","func","apply","arguments","clearProgress","cb","nextTick","hide","name","completed","values","section","last","record","subsection","prefix","disp","logline","_format","style","prefixStyle","message","split","show","bind","pause","_paused","resume","b","_buffer","m","emitLog","id","maxRecordSize","lvl","l","levels","undefined","emit","Error","format","a","Array","stack","i","arg","value","enumerable","writable","unshift","String","messageRaw","push","mrs","n","newSize","Math","floor","slice","pulse","isFinite","line","heading","write","headingStyle","p","msg","output","settings","fg","bg","toUpperCase","bold","underline","inverse","color","beep","addLevel","Infinity"],"mappings":"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","file":"log.js","sourcesContent":["'use strict'\nvar Progress = require('are-we-there-yet')\nvar Gauge = require('gauge')\nvar EE = require('events').EventEmitter\nvar log = exports = module.exports = new EE()\nvar util = require('util')\n\nvar setBlocking = require('set-blocking')\nvar consoleControl = require('console-control-strings')\n\nsetBlocking(true)\nvar stream = process.stderr\nObject.defineProperty(log, 'stream', {\n  set: function (newStream) {\n    stream = newStream\n    if (this.gauge) this.gauge.setWriteTo(stream, stream)\n  },\n  get: function () {\n    return stream\n  }\n})\n\n// by default, decide based on tty-ness.\nvar colorEnabled\nlog.useColor = function () {\n  return colorEnabled != null ? colorEnabled : stream.isTTY\n}\n\nlog.enableColor = function () {\n  colorEnabled = true\n  this.gauge.setTheme({hasColor: colorEnabled, hasUnicode: unicodeEnabled})\n}\nlog.disableColor = function () {\n  colorEnabled = false\n  this.gauge.setTheme({hasColor: colorEnabled, hasUnicode: unicodeEnabled})\n}\n\n// default level\nlog.level = 'info'\n\nlog.gauge = new Gauge(stream, {\n  enabled: false, // no progress bars unless asked\n  theme: {hasColor: log.useColor()},\n  template: [\n    {type: 'progressbar', length: 20},\n    {type: 'activityIndicator', kerning: 1, length: 1},\n    {type: 'section', default: ''},\n    ':',\n    {type: 'logline', kerning: 1, default: ''}\n  ]\n})\n\nlog.tracker = new Progress.TrackerGroup()\n\n// we track this separately as we may need to temporarily disable the\n// display of the status bar for our own loggy purposes.\nlog.progressEnabled = log.gauge.isEnabled()\n\nvar unicodeEnabled\n\nlog.enableUnicode = function () {\n  unicodeEnabled = true\n  this.gauge.setTheme({hasColor: this.useColor(), hasUnicode: unicodeEnabled})\n}\n\nlog.disableUnicode = function () {\n  unicodeEnabled = false\n  this.gauge.setTheme({hasColor: this.useColor(), hasUnicode: unicodeEnabled})\n}\n\nlog.setGaugeThemeset = function (themes) {\n  this.gauge.setThemeset(themes)\n}\n\nlog.setGaugeTemplate = function (template) {\n  this.gauge.setTemplate(template)\n}\n\nlog.enableProgress = function () {\n  if (this.progressEnabled) return\n  this.progressEnabled = true\n  this.tracker.on('change', this.showProgress)\n  if (this._pause) return\n  this.gauge.enable()\n}\n\nlog.disableProgress = function () {\n  if (!this.progressEnabled) return\n  this.progressEnabled = false\n  this.tracker.removeListener('change', this.showProgress)\n  this.gauge.disable()\n}\n\nvar trackerConstructors = ['newGroup', 'newItem', 'newStream']\n\nvar mixinLog = function (tracker) {\n  // mixin the public methods from log into the tracker\n  // (except: conflicts and one's we handle specially)\n  Object.keys(log).forEach(function (P) {\n    if (P[0] === '_') return\n    if (trackerConstructors.filter(function (C) { return C === P }).length) return\n    if (tracker[P]) return\n    if (typeof log[P] !== 'function') return\n    var func = log[P]\n    tracker[P] = function () {\n      return func.apply(log, arguments)\n    }\n  })\n  // if the new tracker is a group, make sure any subtrackers get\n  // mixed in too\n  if (tracker instanceof Progress.TrackerGroup) {\n    trackerConstructors.forEach(function (C) {\n      var func = tracker[C]\n      tracker[C] = function () { return mixinLog(func.apply(tracker, arguments)) }\n    })\n  }\n  return tracker\n}\n\n// Add tracker constructors to the top level log object\ntrackerConstructors.forEach(function (C) {\n  log[C] = function () { return mixinLog(this.tracker[C].apply(this.tracker, arguments)) }\n})\n\nlog.clearProgress = function (cb) {\n  if (!this.progressEnabled) return cb && process.nextTick(cb)\n  this.gauge.hide(cb)\n}\n\nlog.showProgress = function (name, completed) {\n  if (!this.progressEnabled) return\n  var values = {}\n  if (name) values.section = name\n  var last = log.record[log.record.length - 1]\n  if (last) {\n    values.subsection = last.prefix\n    var disp = log.disp[last.level] || last.level\n    var logline = this._format(disp, log.style[last.level])\n    if (last.prefix) logline += ' ' + this._format(last.prefix, this.prefixStyle)\n    logline += ' ' + last.message.split(/\\r?\\n/)[0]\n    values.logline = logline\n  }\n  values.completed = completed || this.tracker.completed()\n  this.gauge.show(values)\n}.bind(log) // bind for use in tracker's on-change listener\n\n// temporarily stop emitting, but don't drop\nlog.pause = function () {\n  this._paused = true\n  if (this.progressEnabled) this.gauge.disable()\n}\n\nlog.resume = function () {\n  if (!this._paused) return\n  this._paused = false\n\n  var b = this._buffer\n  this._buffer = []\n  b.forEach(function (m) {\n    this.emitLog(m)\n  }, this)\n  if (this.progressEnabled) this.gauge.enable()\n}\n\nlog._buffer = []\n\nvar id = 0\nlog.record = []\nlog.maxRecordSize = 10000\nlog.log = function (lvl, prefix, message) {\n  var l = this.levels[lvl]\n  if (l === undefined) {\n    return this.emit('error', new Error(util.format(\n      'Undefined log level: %j', lvl)))\n  }\n\n  var a = new Array(arguments.length - 2)\n  var stack = null\n  for (var i = 2; i < arguments.length; i++) {\n    var arg = a[i - 2] = arguments[i]\n\n    // resolve stack traces to a plain string.\n    if (typeof arg === 'object' && arg &&\n        (arg instanceof Error) && arg.stack) {\n\n      Object.defineProperty(arg, 'stack', {\n        value: stack = arg.stack + '',\n        enumerable: true,\n        writable: true\n      })\n    }\n  }\n  if (stack) a.unshift(stack + '\\n')\n  message = util.format.apply(util, a)\n\n  var m = { id: id++,\n            level: lvl,\n            prefix: String(prefix || ''),\n            message: message,\n            messageRaw: a }\n\n  this.emit('log', m)\n  this.emit('log.' + lvl, m)\n  if (m.prefix) this.emit(m.prefix, m)\n\n  this.record.push(m)\n  var mrs = this.maxRecordSize\n  var n = this.record.length - mrs\n  if (n > mrs / 10) {\n    var newSize = Math.floor(mrs * 0.9)\n    this.record = this.record.slice(-1 * newSize)\n  }\n\n  this.emitLog(m)\n}.bind(log)\n\nlog.emitLog = function (m) {\n  if (this._paused) {\n    this._buffer.push(m)\n    return\n  }\n  if (this.progressEnabled) this.gauge.pulse(m.prefix)\n  var l = this.levels[m.level]\n  if (l === undefined) return\n  if (l < this.levels[this.level]) return\n  if (l > 0 && !isFinite(l)) return\n\n  // If 'disp' is null or undefined, use the lvl as a default\n  // Allows: '', 0 as valid disp\n  var disp = log.disp[m.level] != null ? log.disp[m.level] : m.level\n  this.clearProgress()\n  m.message.split(/\\r?\\n/).forEach(function (line) {\n    if (this.heading) {\n      this.write(this.heading, this.headingStyle)\n      this.write(' ')\n    }\n    this.write(disp, log.style[m.level])\n    var p = m.prefix || ''\n    if (p) this.write(' ')\n    this.write(p, this.prefixStyle)\n    this.write(' ' + line + '\\n')\n  }, this)\n  this.showProgress()\n}\n\nlog._format = function (msg, style) {\n  if (!stream) return\n\n  var output = ''\n  if (this.useColor()) {\n    style = style || {}\n    var settings = []\n    if (style.fg) settings.push(style.fg)\n    if (style.bg) settings.push('bg' + style.bg[0].toUpperCase() + style.bg.slice(1))\n    if (style.bold) settings.push('bold')\n    if (style.underline) settings.push('underline')\n    if (style.inverse) settings.push('inverse')\n    if (settings.length) output += consoleControl.color(settings)\n    if (style.beep) output += consoleControl.beep()\n  }\n  output += msg\n  if (this.useColor()) {\n    output += consoleControl.color('reset')\n  }\n  return output\n}\n\nlog.write = function (msg, style) {\n  if (!stream) return\n\n  stream.write(this._format(msg, style))\n}\n\nlog.addLevel = function (lvl, n, style, disp) {\n  // If 'disp' is null or undefined, use the lvl as a default\n  if (disp == null) disp = lvl\n  this.levels[lvl] = n\n  this.style[lvl] = style\n  if (!this[lvl]) {\n    this[lvl] = function () {\n      var a = new Array(arguments.length + 1)\n      a[0] = lvl\n      for (var i = 0; i < arguments.length; i++) {\n        a[i + 1] = arguments[i]\n      }\n      return this.log.apply(this, a)\n    }.bind(this)\n  }\n  this.disp[lvl] = disp\n}\n\nlog.prefixStyle = { fg: 'magenta' }\nlog.headingStyle = { fg: 'white', bg: 'black' }\n\nlog.style = {}\nlog.levels = {}\nlog.disp = {}\nlog.addLevel('silly', -Infinity, { inverse: true }, 'sill')\nlog.addLevel('verbose', 1000, { fg: 'blue', bg: 'black' }, 'verb')\nlog.addLevel('info', 2000, { fg: 'green' })\nlog.addLevel('timing', 2500, { fg: 'green', bg: 'black' })\nlog.addLevel('http', 3000, { fg: 'green', bg: 'black' })\nlog.addLevel('notice', 3500, { fg: 'blue', bg: 'black' })\nlog.addLevel('warn', 4000, { fg: 'black', bg: 'yellow' }, 'WARN')\nlog.addLevel('error', 5000, { fg: 'red', bg: 'black' }, 'ERR!')\nlog.addLevel('silent', Infinity)\n\n// allow 'error' prefix\nlog.on('error', function () {})\n"]}