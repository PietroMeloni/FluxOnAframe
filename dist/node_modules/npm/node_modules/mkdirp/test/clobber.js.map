{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/mkdirp/test/clobber.js"],"names":["mkdirp","require","path","fs","test","_0755","parseInt","ps","i","dir","Math","floor","random","pow","toString","push","file","join","itw","slice","t","console","error","writeFileSync","stat","er","ifError","ok","isFile","end","plan","err","equal","code"],"mappings":";;AAAA,IAAIA,SAASC,QAAQ,KAAR,EAAeD,MAA5B;AACA,IAAIE,OAAOD,QAAQ,MAAR,CAAX;AACA,IAAIE,KAAKF,QAAQ,IAAR,CAAT;AACA,IAAIG,OAAOH,QAAQ,KAAR,EAAeG,IAA1B;AACA,IAAIC,QAAQC,SAAS,MAAT,EAAiB,CAAjB,CAAZ;;AAEA,IAAIC,KAAK,CAAE,EAAF,EAAM,KAAN,CAAT;;AAEA,KAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwBA,GAAxB,EAA6B;AACzB,QAAIC,MAAMC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgBF,KAAKG,GAAL,CAAS,EAAT,EAAY,CAAZ,CAA3B,EAA2CC,QAA3C,CAAoD,EAApD,CAAV;AACAP,OAAGQ,IAAH,CAAQN,GAAR;AACH;;AAED,IAAIO,OAAOT,GAAGU,IAAH,CAAQ,GAAR,CAAX;;AAEA;AACA,IAAIC,MAAMX,GAAGY,KAAH,CAAS,CAAT,EAAY,CAAZ,EAAeF,IAAf,CAAoB,GAApB,CAAV;;AAGAb,KAAK,aAAL,EAAoB,UAAUgB,CAAV,EAAa;AAC7BC,YAAQC,KAAR,CAAc,uBAAqBJ,GAAnC;AACAf,OAAGoB,aAAH,CAAiBL,GAAjB,EAAsB,4CAAtB;;AAEAf,OAAGqB,IAAH,CAAQN,GAAR,EAAa,UAAUO,EAAV,EAAcD,IAAd,EAAoB;AAC7BJ,UAAEM,OAAF,CAAUD,EAAV;AACAL,UAAEO,EAAF,CAAKH,QAAQA,KAAKI,MAAL,EAAb,EAA4B,gBAA5B;AACAR,UAAES,GAAF;AACH,KAJD;AAKH,CATD;;AAWAzB,KAAK,SAAL,EAAgB,UAAUgB,CAAV,EAAa;AACzBA,MAAEU,IAAF,CAAO,CAAP;AACA9B,WAAOgB,IAAP,EAAaX,KAAb,EAAoB,UAAU0B,GAAV,EAAe;AAC/BX,UAAEO,EAAF,CAAKI,GAAL;AACAX,UAAEY,KAAF,CAAQD,IAAIE,IAAZ,EAAkB,SAAlB;AACAb,UAAES,GAAF;AACH,KAJD;AAKH,CAPD","file":"clobber.js","sourcesContent":["var mkdirp = require('../').mkdirp;\nvar path = require('path');\nvar fs = require('fs');\nvar test = require('tap').test;\nvar _0755 = parseInt('0755', 8);\n\nvar ps = [ '', 'tmp' ];\n\nfor (var i = 0; i < 25; i++) {\n    var dir = Math.floor(Math.random() * Math.pow(16,4)).toString(16);\n    ps.push(dir);\n}\n\nvar file = ps.join('/');\n\n// a file in the way\nvar itw = ps.slice(0, 3).join('/');\n\n\ntest('clobber-pre', function (t) {\n    console.error(\"about to write to \"+itw)\n    fs.writeFileSync(itw, 'I AM IN THE WAY, THE TRUTH, AND THE LIGHT.');\n\n    fs.stat(itw, function (er, stat) {\n        t.ifError(er)\n        t.ok(stat && stat.isFile(), 'should be file')\n        t.end()\n    })\n})\n\ntest('clobber', function (t) {\n    t.plan(2);\n    mkdirp(file, _0755, function (err) {\n        t.ok(err);\n        t.equal(err.code, 'ENOTDIR');\n        t.end();\n    });\n});\n"]}