{"version":3,"sources":["../../../../../node_modules/npm/node_modules/text-table/index.js"],"names":["module","exports","rows_","opts","hsep","undefined","align","stringLength","s","String","length","dotsizes","reduce","acc","row","forEach","c","ix","n","dotindex","rows","map","c_","index","size","test","Array","join","sizes","Math","max","ceil","floor","replace","m","exec","xs","f","init","i","arguments","call","res","push"],"mappings":"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","file":"index.js","sourcesContent":["module.exports = function (rows_, opts) {\n    if (!opts) opts = {};\n    var hsep = opts.hsep === undefined ? '  ' : opts.hsep;\n    var align = opts.align || [];\n    var stringLength = opts.stringLength\n        || function (s) { return String(s).length; }\n    ;\n    \n    var dotsizes = reduce(rows_, function (acc, row) {\n        forEach(row, function (c, ix) {\n            var n = dotindex(c);\n            if (!acc[ix] || n > acc[ix]) acc[ix] = n;\n        });\n        return acc;\n    }, []);\n    \n    var rows = map(rows_, function (row) {\n        return map(row, function (c_, ix) {\n            var c = String(c_);\n            if (align[ix] === '.') {\n                var index = dotindex(c);\n                var size = dotsizes[ix] + (/\\./.test(c) ? 1 : 2)\n                    - (stringLength(c) - index)\n                ;\n                return c + Array(size).join(' ');\n            }\n            else return c;\n        });\n    });\n    \n    var sizes = reduce(rows, function (acc, row) {\n        forEach(row, function (c, ix) {\n            var n = stringLength(c);\n            if (!acc[ix] || n > acc[ix]) acc[ix] = n;\n        });\n        return acc;\n    }, []);\n    \n    return map(rows, function (row) {\n        return map(row, function (c, ix) {\n            var n = (sizes[ix] - stringLength(c)) || 0;\n            var s = Array(Math.max(n + 1, 1)).join(' ');\n            if (align[ix] === 'r' || align[ix] === '.') {\n                return s + c;\n            }\n            if (align[ix] === 'c') {\n                return Array(Math.ceil(n / 2 + 1)).join(' ')\n                    + c + Array(Math.floor(n / 2 + 1)).join(' ')\n                ;\n            }\n            \n            return c + s;\n        }).join(hsep).replace(/\\s+$/, '');\n    }).join('\\n');\n};\n\nfunction dotindex (c) {\n    var m = /\\.[^.]*$/.exec(c);\n    return m ? m.index + 1 : c.length;\n}\n\nfunction reduce (xs, f, init) {\n    if (xs.reduce) return xs.reduce(f, init);\n    var i = 0;\n    var acc = arguments.length >= 3 ? init : xs[i++];\n    for (; i < xs.length; i++) {\n        f(acc, xs[i], i);\n    }\n    return acc;\n}\n\nfunction forEach (xs, f) {\n    if (xs.forEach) return xs.forEach(f);\n    for (var i = 0; i < xs.length; i++) {\n        f.call(xs, xs[i], i);\n    }\n}\n\nfunction map (xs, f) {\n    if (xs.map) return xs.map(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        res.push(f.call(xs, xs[i], i));\n    }\n    return res;\n}\n"]}