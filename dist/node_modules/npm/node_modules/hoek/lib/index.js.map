{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/hoek/lib/index.js"],"names":["Crypto","require","Path","Util","Escape","internals","exports","clone","obj","seen","orig","copy","lookup","indexOf","newObj","cloneDeep","Array","isArray","Buffer","isBuffer","Date","getTime","RegExp","proto","Object","getPrototypeOf","isImmutable","create","push","keys","getOwnPropertyNames","i","il","length","key","descriptor","getOwnPropertyDescriptor","get","set","defineProperty","merge","target","source","isNullOverride","isMergeArrays","assert","undefined","k","kl","value","applyToDefaults","defaults","options","cloneWithShallow","storage","store","restore","reach","reachSet","path","split","ref","segment","applyToDefaultsWithShallow","deepEqual","prototype","type","part","found","r","rl","j","jl","toString","unique","array","index","result","id","mapToObject","intersect","array1","array2","justFirst","common","hash","contain","values","valuePairs","concat","arguments","compare","compareFlags","deep","hasOnly","hasOwnProperty","hasPart","only","a","b","misses","matches","pattern","escapeRegex","regex","leftovers","replace","$0","$1","matched","pos","once","flatten","chain","separator","slice","functions","strict","default","reachTemplate","template","formatStack","stack","trace","item","getFileName","getLineNumber","getColumnNumber","getFunctionName","isConstructor","formatTrace","display","row","callStack","v8","Error","prepareStackTrace","err","capture","captureStackTrace","callee","displayStack","abortThrow","abort","message","hideStack","process","env","NODE_ENV","join","console","log","exit","condition","msgs","map","msg","stringify","Timer","ts","reset","now","elapsed","Bench","hrtime","string","base64urlEncode","encoding","buf","base64urlDecode","test","escapeHeaderAttribute","attribute","escapeHtml","escapeJavaScript","nextTick","callback","args","apply","method","_hoekOnce","wrapped","isAbsolutePath","platform","isAbsolute","isInteger","parseFloat","parseInt","isNaN","ignore","inherits","format","transform","results","sourcePath","res","shift","uniqueFilename","extension","resolve","name","pid","randomBytes","JSON","shallow"],"mappings":"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","file":"index.js","sourcesContent":["// Load modules\n\nvar Crypto = require('crypto');\nvar Path = require('path');\nvar Util = require('util');\nvar Escape = require('./escape');\n\n\n// Declare internals\n\nvar internals = {};\n\n\n// Clone object or array\n\nexports.clone = function (obj, seen) {\n\n    if (typeof obj !== 'object' ||\n        obj === null) {\n\n        return obj;\n    }\n\n    seen = seen || { orig: [], copy: [] };\n\n    var lookup = seen.orig.indexOf(obj);\n    if (lookup !== -1) {\n        return seen.copy[lookup];\n    }\n\n    var newObj;\n    var cloneDeep = false;\n\n    if (!Array.isArray(obj)) {\n        if (Buffer.isBuffer(obj)) {\n            newObj = new Buffer(obj);\n        }\n        else if (obj instanceof Date) {\n            newObj = new Date(obj.getTime());\n        }\n        else if (obj instanceof RegExp) {\n            newObj = new RegExp(obj);\n        }\n        else {\n            var proto = Object.getPrototypeOf(obj);\n            if (proto &&\n                proto.isImmutable) {\n\n                newObj = obj;\n            }\n            else {\n                newObj = Object.create(proto);\n                cloneDeep = true;\n            }\n        }\n    }\n    else {\n        newObj = [];\n        cloneDeep = true;\n    }\n\n    seen.orig.push(obj);\n    seen.copy.push(newObj);\n\n    if (cloneDeep) {\n        var keys = Object.getOwnPropertyNames(obj);\n        for (var i = 0, il = keys.length; i < il; ++i) {\n            var key = keys[i];\n            var descriptor = Object.getOwnPropertyDescriptor(obj, key);\n            if (descriptor &&\n                (descriptor.get ||\n                 descriptor.set)) {\n\n                Object.defineProperty(newObj, key, descriptor);\n            }\n            else {\n                newObj[key] = exports.clone(obj[key], seen);\n            }\n        }\n    }\n\n    return newObj;\n};\n\n\n// Merge all the properties of source into target, source wins in conflict, and by default null and undefined from source are applied\n/*eslint-disable */\nexports.merge = function (target, source, isNullOverride /* = true */, isMergeArrays /* = true */) {\n/*eslint-enable */\n    exports.assert(target && typeof target === 'object', 'Invalid target value: must be an object');\n    exports.assert(source === null || source === undefined || typeof source === 'object', 'Invalid source value: must be null, undefined, or an object');\n\n    if (!source) {\n        return target;\n    }\n\n    if (Array.isArray(source)) {\n        exports.assert(Array.isArray(target), 'Cannot merge array onto an object');\n        if (isMergeArrays === false) {                                                  // isMergeArrays defaults to true\n            target.length = 0;                                                          // Must not change target assignment\n        }\n\n        for (var i = 0, il = source.length; i < il; ++i) {\n            target.push(exports.clone(source[i]));\n        }\n\n        return target;\n    }\n\n    var keys = Object.keys(source);\n    for (var k = 0, kl = keys.length; k < kl; ++k) {\n        var key = keys[k];\n        var value = source[key];\n        if (value &&\n            typeof value === 'object') {\n\n            if (!target[key] ||\n                typeof target[key] !== 'object' ||\n                (Array.isArray(target[key]) ^ Array.isArray(value)) ||\n                value instanceof Date ||\n                Buffer.isBuffer(value) ||\n                value instanceof RegExp) {\n\n                target[key] = exports.clone(value);\n            }\n            else {\n                exports.merge(target[key], value, isNullOverride, isMergeArrays);\n            }\n        }\n        else {\n            if (value !== null &&\n                value !== undefined) {                              // Explicit to preserve empty strings\n\n                target[key] = value;\n            }\n            else if (isNullOverride !== false) {                    // Defaults to true\n                target[key] = value;\n            }\n        }\n    }\n\n    return target;\n};\n\n\n// Apply options to a copy of the defaults\n\nexports.applyToDefaults = function (defaults, options, isNullOverride) {\n\n    exports.assert(defaults && typeof defaults === 'object', 'Invalid defaults value: must be an object');\n    exports.assert(!options || options === true || typeof options === 'object', 'Invalid options value: must be true, falsy or an object');\n\n    if (!options) {                                                 // If no options, return null\n        return null;\n    }\n\n    var copy = exports.clone(defaults);\n\n    if (options === true) {                                         // If options is set to true, use defaults\n        return copy;\n    }\n\n    return exports.merge(copy, options, isNullOverride === true, false);\n};\n\n\n// Clone an object except for the listed keys which are shallow copied\n\nexports.cloneWithShallow = function (source, keys) {\n\n    if (!source ||\n        typeof source !== 'object') {\n\n        return source;\n    }\n\n    var storage = internals.store(source, keys);    // Move shallow copy items to storage\n    var copy = exports.clone(source);               // Deep copy the rest\n    internals.restore(copy, source, storage);       // Shallow copy the stored items and restore\n    return copy;\n};\n\n\ninternals.store = function (source, keys) {\n\n    var storage = {};\n    for (var i = 0, il = keys.length; i < il; ++i) {\n        var key = keys[i];\n        var value = exports.reach(source, key);\n        if (value !== undefined) {\n            storage[key] = value;\n            internals.reachSet(source, key, undefined);\n        }\n    }\n\n    return storage;\n};\n\n\ninternals.restore = function (copy, source, storage) {\n\n    var keys = Object.keys(storage);\n    for (var i = 0, il = keys.length; i < il; ++i) {\n        var key = keys[i];\n        internals.reachSet(copy, key, storage[key]);\n        internals.reachSet(source, key, storage[key]);\n    }\n};\n\n\ninternals.reachSet = function (obj, key, value) {\n\n    var path = key.split('.');\n    var ref = obj;\n    for (var i = 0, il = path.length; i < il; ++i) {\n        var segment = path[i];\n        if (i + 1 === il) {\n            ref[segment] = value;\n        }\n\n        ref = ref[segment];\n    }\n};\n\n\n// Apply options to defaults except for the listed keys which are shallow copied from option without merging\n\nexports.applyToDefaultsWithShallow = function (defaults, options, keys) {\n\n    exports.assert(defaults && typeof defaults === 'object', 'Invalid defaults value: must be an object');\n    exports.assert(!options || options === true || typeof options === 'object', 'Invalid options value: must be true, falsy or an object');\n    exports.assert(keys && Array.isArray(keys), 'Invalid keys');\n\n    if (!options) {                                                 // If no options, return null\n        return null;\n    }\n\n    var copy = exports.cloneWithShallow(defaults, keys);\n\n    if (options === true) {                                         // If options is set to true, use defaults\n        return copy;\n    }\n\n    var storage = internals.store(options, keys);   // Move shallow copy items to storage\n    exports.merge(copy, options, false, false);     // Deep copy the rest\n    internals.restore(copy, options, storage);      // Shallow copy the stored items and restore\n    return copy;\n};\n\n\n// Deep object or array comparison\n\nexports.deepEqual = function (obj, ref, options, seen) {\n\n    options = options || { prototype: true };\n\n    var type = typeof obj;\n\n    if (type !== typeof ref) {\n        return false;\n    }\n\n    if (type !== 'object' ||\n        obj === null ||\n        ref === null) {\n\n        if (obj === ref) {                                                      // Copied from Deep-eql, copyright(c) 2013 Jake Luer, jake@alogicalparadox.com, MIT Licensed, https://github.com/chaijs/deep-eql\n            return obj !== 0 || 1 / obj === 1 / ref;        // -0 / +0\n        }\n\n        return obj !== obj && ref !== ref;                  // NaN\n    }\n\n    seen = seen || [];\n    if (seen.indexOf(obj) !== -1) {\n        return true;                            // If previous comparison failed, it would have stopped execution\n    }\n\n    seen.push(obj);\n\n    if (Array.isArray(obj)) {\n        if (!Array.isArray(ref)) {\n            return false;\n        }\n\n        if (!options.part && obj.length !== ref.length) {\n            return false;\n        }\n\n        for (var i = 0, il = obj.length; i < il; ++i) {\n            if (options.part) {\n                var found = false;\n                for (var r = 0, rl = ref.length; r < rl; ++r) {\n                    if (exports.deepEqual(obj[i], ref[r], options, seen)) {\n                        found = true;\n                        break;\n                    }\n                }\n\n                return found;\n            }\n\n            if (!exports.deepEqual(obj[i], ref[i], options, seen)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    if (Buffer.isBuffer(obj)) {\n        if (!Buffer.isBuffer(ref)) {\n            return false;\n        }\n\n        if (obj.length !== ref.length) {\n            return false;\n        }\n\n        for (var j = 0, jl = obj.length; j < jl; ++j) {\n            if (obj[j] !== ref[j]) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    if (obj instanceof Date) {\n        return (ref instanceof Date && obj.getTime() === ref.getTime());\n    }\n\n    if (obj instanceof RegExp) {\n        return (ref instanceof RegExp && obj.toString() === ref.toString());\n    }\n\n    if (options.prototype) {\n        if (Object.getPrototypeOf(obj) !== Object.getPrototypeOf(ref)) {\n            return false;\n        }\n    }\n\n    var keys = Object.getOwnPropertyNames(obj);\n\n    if (!options.part && keys.length !== Object.getOwnPropertyNames(ref).length) {\n        return false;\n    }\n\n    for (var k = 0, kl = keys.length; k < kl; ++k) {\n        var key = keys[k];\n        var descriptor = Object.getOwnPropertyDescriptor(obj, key);\n        if (descriptor.get) {\n            if (!exports.deepEqual(descriptor, Object.getOwnPropertyDescriptor(ref, key), options, seen)) {\n                return false;\n            }\n        }\n        else if (!exports.deepEqual(obj[key], ref[key], options, seen)) {\n            return false;\n        }\n    }\n\n    return true;\n};\n\n\n// Remove duplicate items from array\n\nexports.unique = function (array, key) {\n\n    var index = {};\n    var result = [];\n\n    for (var i = 0, il = array.length; i < il; ++i) {\n        var id = (key ? array[i][key] : array[i]);\n        if (index[id] !== true) {\n\n            result.push(array[i]);\n            index[id] = true;\n        }\n    }\n\n    return result;\n};\n\n\n// Convert array into object\n\nexports.mapToObject = function (array, key) {\n\n    if (!array) {\n        return null;\n    }\n\n    var obj = {};\n    for (var i = 0, il = array.length; i < il; ++i) {\n        if (key) {\n            if (array[i][key]) {\n                obj[array[i][key]] = true;\n            }\n        }\n        else {\n            obj[array[i]] = true;\n        }\n    }\n\n    return obj;\n};\n\n\n// Find the common unique items in two arrays\n\nexports.intersect = function (array1, array2, justFirst) {\n\n    if (!array1 || !array2) {\n        return [];\n    }\n\n    var common = [];\n    var hash = (Array.isArray(array1) ? exports.mapToObject(array1) : array1);\n    var found = {};\n    for (var i = 0, il = array2.length; i < il; ++i) {\n        if (hash[array2[i]] && !found[array2[i]]) {\n            if (justFirst) {\n                return array2[i];\n            }\n\n            common.push(array2[i]);\n            found[array2[i]] = true;\n        }\n    }\n\n    return (justFirst ? null : common);\n};\n\n\n// Test if the reference contains the values\n\nexports.contain = function (ref, values, options) {\n\n    /*\n        string -> string(s)\n        array -> item(s)\n        object -> key(s)\n        object -> object (key:value)\n    */\n\n    var valuePairs = null;\n    if (typeof ref === 'object' &&\n        typeof values === 'object' &&\n        !Array.isArray(ref) &&\n        !Array.isArray(values)) {\n\n        valuePairs = values;\n        values = Object.keys(values);\n    }\n    else {\n        values = [].concat(values);\n    }\n\n    options = options || {};            // deep, once, only, part\n\n    exports.assert(arguments.length >= 2, 'Insufficient arguments');\n    exports.assert(typeof ref === 'string' || typeof ref === 'object', 'Reference must be string or an object');\n    exports.assert(values.length, 'Values array cannot be empty');\n\n    var compare, compareFlags;\n    if (options.deep) {\n        compare = exports.deepEqual;\n\n        var hasOnly = options.hasOwnProperty('only'), hasPart = options.hasOwnProperty('part');\n\n        compareFlags = {\n            prototype: hasOnly ? options.only : hasPart ? !options.part : false,\n            part: hasOnly ? !options.only : hasPart ? options.part : true\n        };\n    }\n    else {\n        compare = function (a, b) {\n\n            return a === b;\n        };\n    }\n\n    var misses = false;\n    var matches = new Array(values.length);\n    for (var i = 0, il = matches.length; i < il; ++i) {\n        matches[i] = 0;\n    }\n\n    if (typeof ref === 'string') {\n        var pattern = '(';\n        for (i = 0, il = values.length; i < il; ++i) {\n            var value = values[i];\n            exports.assert(typeof value === 'string', 'Cannot compare string reference to non-string value');\n            pattern += (i ? '|' : '') + exports.escapeRegex(value);\n        }\n\n        var regex = new RegExp(pattern + ')', 'g');\n        var leftovers = ref.replace(regex, function ($0, $1) {\n\n            var index = values.indexOf($1);\n            ++matches[index];\n            return '';          // Remove from string\n        });\n\n        misses = !!leftovers;\n    }\n    else if (Array.isArray(ref)) {\n        for (i = 0, il = ref.length; i < il; ++i) {\n            for (var j = 0, jl = values.length, matched = false; j < jl && matched === false; ++j) {\n                matched = compare(values[j], ref[i], compareFlags) && j;\n            }\n\n            if (matched !== false) {\n                ++matches[matched];\n            }\n            else {\n                misses = true;\n            }\n        }\n    }\n    else {\n        var keys = Object.keys(ref);\n        for (i = 0, il = keys.length; i < il; ++i) {\n            var key = keys[i];\n            var pos = values.indexOf(key);\n            if (pos !== -1) {\n                if (valuePairs &&\n                    !compare(valuePairs[key], ref[key], compareFlags)) {\n\n                    return false;\n                }\n\n                ++matches[pos];\n            }\n            else {\n                misses = true;\n            }\n        }\n    }\n\n    var result = false;\n    for (i = 0, il = matches.length; i < il; ++i) {\n        result = result || !!matches[i];\n        if ((options.once && matches[i] > 1) ||\n            (!options.part && !matches[i])) {\n\n            return false;\n        }\n    }\n\n    if (options.only &&\n        misses) {\n\n        return false;\n    }\n\n    return result;\n};\n\n\n// Flatten array\n\nexports.flatten = function (array, target) {\n\n    var result = target || [];\n\n    for (var i = 0, il = array.length; i < il; ++i) {\n        if (Array.isArray(array[i])) {\n            exports.flatten(array[i], result);\n        }\n        else {\n            result.push(array[i]);\n        }\n    }\n\n    return result;\n};\n\n\n// Convert an object key chain string ('a.b.c') to reference (object[a][b][c])\n\nexports.reach = function (obj, chain, options) {\n\n    if (chain === false ||\n        chain === null ||\n        typeof chain === 'undefined') {\n\n        return obj;\n    }\n\n    options = options || {};\n    if (typeof options === 'string') {\n        options = { separator: options };\n    }\n\n    var path = chain.split(options.separator || '.');\n    var ref = obj;\n    for (var i = 0, il = path.length; i < il; ++i) {\n        var key = path[i];\n        if (key[0] === '-' && Array.isArray(ref)) {\n            key = key.slice(1, key.length);\n            key = ref.length - key;\n        }\n\n        if (!ref ||\n            !ref.hasOwnProperty(key) ||\n            (typeof ref !== 'object' && options.functions === false)) {         // Only object and function can have properties\n\n            exports.assert(!options.strict || i + 1 === il, 'Missing segment', key, 'in reach path ', chain);\n            exports.assert(typeof ref === 'object' || options.functions === true || typeof ref !== 'function', 'Invalid segment', key, 'in reach path ', chain);\n            ref = options.default;\n            break;\n        }\n\n        ref = ref[key];\n    }\n\n    return ref;\n};\n\n\nexports.reachTemplate = function (obj, template, options) {\n\n    return template.replace(/{([^}]+)}/g, function ($0, chain) {\n\n        var value = exports.reach(obj, chain, options);\n        return (value === undefined || value === null ? '' : value);\n    });\n};\n\n\nexports.formatStack = function (stack) {\n\n    var trace = [];\n    for (var i = 0, il = stack.length; i < il; ++i) {\n        var item = stack[i];\n        trace.push([item.getFileName(), item.getLineNumber(), item.getColumnNumber(), item.getFunctionName(), item.isConstructor()]);\n    }\n\n    return trace;\n};\n\n\nexports.formatTrace = function (trace) {\n\n    var display = [];\n\n    for (var i = 0, il = trace.length; i < il; ++i) {\n        var row = trace[i];\n        display.push((row[4] ? 'new ' : '') + row[3] + ' (' + row[0] + ':' + row[1] + ':' + row[2] + ')');\n    }\n\n    return display;\n};\n\n\nexports.callStack = function (slice) {\n\n    // http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi\n\n    var v8 = Error.prepareStackTrace;\n    Error.prepareStackTrace = function (err, stack) {\n\n        return stack;\n    };\n\n    var capture = {};\n    Error.captureStackTrace(capture, arguments.callee);     /*eslint no-caller:0 */\n    var stack = capture.stack;\n\n    Error.prepareStackTrace = v8;\n\n    var trace = exports.formatStack(stack);\n\n    if (slice) {\n        return trace.slice(slice);\n    }\n\n    return trace;\n};\n\n\nexports.displayStack = function (slice) {\n\n    var trace = exports.callStack(slice === undefined ? 1 : slice + 1);\n\n    return exports.formatTrace(trace);\n};\n\n\nexports.abortThrow = false;\n\n\nexports.abort = function (message, hideStack) {\n\n    if (process.env.NODE_ENV === 'test' || exports.abortThrow === true) {\n        throw new Error(message || 'Unknown error');\n    }\n\n    var stack = '';\n    if (!hideStack) {\n        stack = exports.displayStack(1).join('\\n\\t');\n    }\n    console.log('ABORT: ' + message + '\\n\\t' + stack);\n    process.exit(1);\n};\n\n\nexports.assert = function (condition /*, msg1, msg2, msg3 */) {\n\n    if (condition) {\n        return;\n    }\n\n    if (arguments.length === 2 && arguments[1] instanceof Error) {\n        throw arguments[1];\n    }\n\n    var msgs = [];\n    for (var i = 1, il = arguments.length; i < il; ++i) {\n        if (arguments[i] !== '') {\n            msgs.push(arguments[i]);            // Avoids Array.slice arguments leak, allowing for V8 optimizations\n        }\n    }\n\n    msgs = msgs.map(function (msg) {\n\n        return typeof msg === 'string' ? msg : msg instanceof Error ? msg.message : exports.stringify(msg);\n    });\n    throw new Error(msgs.join(' ') || 'Unknown error');\n};\n\n\nexports.Timer = function () {\n\n    this.ts = 0;\n    this.reset();\n};\n\n\nexports.Timer.prototype.reset = function () {\n\n    this.ts = Date.now();\n};\n\n\nexports.Timer.prototype.elapsed = function () {\n\n    return Date.now() - this.ts;\n};\n\n\nexports.Bench = function () {\n\n    this.ts = 0;\n    this.reset();\n};\n\n\nexports.Bench.prototype.reset = function () {\n\n    this.ts = exports.Bench.now();\n};\n\n\nexports.Bench.prototype.elapsed = function () {\n\n    return exports.Bench.now() - this.ts;\n};\n\n\nexports.Bench.now = function () {\n\n    var ts = process.hrtime();\n    return (ts[0] * 1e3) + (ts[1] / 1e6);\n};\n\n\n// Escape string for Regex construction\n\nexports.escapeRegex = function (string) {\n\n    // Escape ^$.*+-?=!:|\\/()[]{},\n    return string.replace(/[\\^\\$\\.\\*\\+\\-\\?\\=\\!\\:\\|\\\\\\/\\(\\)\\[\\]\\{\\}\\,]/g, '\\\\$&');\n};\n\n\n// Base64url (RFC 4648) encode\n\nexports.base64urlEncode = function (value, encoding) {\n\n    var buf = (Buffer.isBuffer(value) ? value : new Buffer(value, encoding || 'binary'));\n    return buf.toString('base64').replace(/\\+/g, '-').replace(/\\//g, '_').replace(/\\=/g, '');\n};\n\n\n// Base64url (RFC 4648) decode\n\nexports.base64urlDecode = function (value, encoding) {\n\n    if (value &&\n        !/^[\\w\\-]*$/.test(value)) {\n\n        return new Error('Invalid character');\n    }\n\n    try {\n        var buf = new Buffer(value, 'base64');\n        return (encoding === 'buffer' ? buf : buf.toString(encoding || 'binary'));\n    }\n    catch (err) {\n        return err;\n    }\n};\n\n\n// Escape attribute value for use in HTTP header\n\nexports.escapeHeaderAttribute = function (attribute) {\n\n    // Allowed value characters: !#$%&'()*+,-./:;<=>?@[]^_`{|}~ and space, a-z, A-Z, 0-9, \\, \"\n\n    exports.assert(/^[ \\w\\!#\\$%&'\\(\\)\\*\\+,\\-\\.\\/\\:;<\\=>\\?@\\[\\]\\^`\\{\\|\\}~\\\"\\\\]*$/.test(attribute), 'Bad attribute value (' + attribute + ')');\n\n    return attribute.replace(/\\\\/g, '\\\\\\\\').replace(/\\\"/g, '\\\\\"');                             // Escape quotes and slash\n};\n\n\nexports.escapeHtml = function (string) {\n\n    return Escape.escapeHtml(string);\n};\n\n\nexports.escapeJavaScript = function (string) {\n\n    return Escape.escapeJavaScript(string);\n};\n\n\nexports.nextTick = function (callback) {\n\n    return function () {\n\n        var args = arguments;\n        process.nextTick(function () {\n\n            callback.apply(null, args);\n        });\n    };\n};\n\n\nexports.once = function (method) {\n\n    if (method._hoekOnce) {\n        return method;\n    }\n\n    var once = false;\n    var wrapped = function () {\n\n        if (!once) {\n            once = true;\n            method.apply(null, arguments);\n        }\n    };\n\n    wrapped._hoekOnce = true;\n\n    return wrapped;\n};\n\n\nexports.isAbsolutePath = function (path, platform) {\n\n    if (!path) {\n        return false;\n    }\n\n    if (Path.isAbsolute) {                      // node >= 0.11\n        return Path.isAbsolute(path);\n    }\n\n    platform = platform || process.platform;\n\n    // Unix\n\n    if (platform !== 'win32') {\n        return path[0] === '/';\n    }\n\n    // Windows\n\n    return !!/^(?:[a-zA-Z]:[\\\\\\/])|(?:[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/]+[^\\\\\\/])/.test(path);        // C:\\ or \\\\something\\something\n};\n\n\nexports.isInteger = function (value) {\n\n    return (typeof value === 'number' &&\n            parseFloat(value) === parseInt(value, 10) &&\n            !isNaN(value));\n};\n\n\nexports.ignore = function () { };\n\n\nexports.inherits = Util.inherits;\n\n\nexports.format = Util.format;\n\n\nexports.transform = function (source, transform, options) {\n\n    exports.assert(source === null || source === undefined || typeof source === 'object' || Array.isArray(source), 'Invalid source object: must be null, undefined, an object, or an array');\n\n    if (Array.isArray(source)) {\n        var results = [];\n        for (var i = 0, il = source.length; i < il; ++i) {\n            results.push(exports.transform(source[i], transform, options));\n        }\n        return results;\n    }\n\n    var result = {};\n    var keys = Object.keys(transform);\n\n    for (var k = 0, kl = keys.length; k < kl; ++k) {\n        var key = keys[k];\n        var path = key.split('.');\n        var sourcePath = transform[key];\n\n        exports.assert(typeof sourcePath === 'string', 'All mappings must be \".\" delineated strings');\n\n        var segment;\n        var res = result;\n\n        while (path.length > 1) {\n            segment = path.shift();\n            if (!res[segment]) {\n                res[segment] = {};\n            }\n            res = res[segment];\n        }\n        segment = path.shift();\n        res[segment] = exports.reach(source, sourcePath, options);\n    }\n\n    return result;\n};\n\n\nexports.uniqueFilename = function (path, extension) {\n\n    if (extension) {\n        extension = extension[0] !== '.' ? '.' + extension : extension;\n    }\n    else {\n        extension = '';\n    }\n\n    path = Path.resolve(path);\n    var name = [Date.now(), process.pid, Crypto.randomBytes(8).toString('hex')].join('-') + extension;\n    return Path.join(path, name);\n};\n\n\nexports.stringify = function () {\n\n    try {\n        return JSON.stringify.apply(null, arguments);\n    }\n    catch (err) {\n        return '[Cannot display object: ' + err.message + ']';\n    }\n};\n\n\nexports.shallow = function (source) {\n\n    var target = {};\n    var keys = Object.keys(source);\n    for (var i = 0, il = keys.length; i < il; ++i) {\n        var key = keys[i];\n        target[key] = source[key];\n    }\n\n    return target;\n};\n"]}