{"version":3,"sources":["../../../../../node_modules/npm/node_modules/read-package-json/read-json.js"],"names":["fs","require","er","path","glob","normalizeData","safeJSON","util","slash","module","exports","readJson","extraSet","gypfile","serverjs","scriptpath","authors","readme","mans","bins","githead","typoWarned","cache","file","log_","strict_","cb_","log","strict","cb","i","arguments","length","readJson_","readFile","d","parseJson","stripBOM","content","charCodeAt","slice","jsonClone","obj","Array","isArray","newarr","ii","newobj","kk","code","stat","dirname","err","isDirectory","Object","create","indexjs","data","parseIndex","parseError","extrasCached","extras","basename","index","resolve","er2","set","n","errState","forEach","fn","then","final","scripts","k","keys","scriptpath_","key","s","spre","match","replace","dir","install","preinstall","cwd","files","gypfile_","start","serverjs_","contributors","af","ad","authors_","split","map","line","trim","filter","globOpts","nocase","mark","preferMarkdownReadme","rm","readme_","fallback","re","rmfn","readmeFilename","m","directories","man","mans_","mf","bin","bins_","reduce","acc","charAt","f","join","gitHead","head","githead_","headRef","headFile","packFile","refs","checkBinReferences_","warn","keysLeft","handleExists","relName","result","dirName","binPath","error","message","indexOf","inspect","pId","makePackageId","msg","name","cleanString","ver","version","str","ex","e","Error"],"mappings":"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","file":"read-json.js","sourcesContent":["var fs\ntry {\n  fs = require('graceful-fs')\n} catch (er) {\n  fs = require('fs')\n}\n\nvar path = require('path')\n\nvar glob = require('glob')\nvar normalizeData = require('normalize-package-data')\nvar safeJSON = require('json-parse-better-errors')\nvar util = require('util')\nvar slash = require('slash')\n\nmodule.exports = readJson\n\n// put more stuff on here to customize.\nreadJson.extraSet = [\n  gypfile,\n  serverjs,\n  scriptpath,\n  authors,\n  readme,\n  mans,\n  bins,\n  githead\n]\n\nvar typoWarned = {}\nvar cache = {}\n\nfunction readJson (file, log_, strict_, cb_) {\n  var log, strict, cb\n  for (var i = 1; i < arguments.length - 1; i++) {\n    if (typeof arguments[i] === 'boolean') {\n      strict = arguments[i]\n    } else if (typeof arguments[i] === 'function') {\n      log = arguments[i]\n    }\n  }\n\n  if (!log) log = function () {}\n  cb = arguments[ arguments.length - 1 ]\n\n  readJson_(file, log, strict, cb)\n}\n\nfunction readJson_ (file, log, strict, cb) {\n  fs.readFile(file, 'utf8', function (er, d) {\n    parseJson(file, er, d, log, strict, cb)\n  })\n}\n\nfunction stripBOM (content) {\n  // Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n  // because the buffer-to-string conversion in `fs.readFileSync()`\n  // translates it to FEFF, the UTF-16 BOM.\n  if (content.charCodeAt(0) === 0xFEFF) content = content.slice(1)\n  return content\n}\n\nfunction jsonClone (obj) {\n  if (obj == null) {\n    return obj\n  } else if (Array.isArray(obj)) {\n    var newarr = new Array(obj.length)\n    for (var ii in obj) {\n      newarr[ii] = obj[ii]\n    }\n  } else if (typeof obj === 'object') {\n    var newobj = {}\n    for (var kk in obj) {\n      newobj[kk] = jsonClone[kk]\n    }\n  } else {\n    return obj\n  }\n}\n\nfunction parseJson (file, er, d, log, strict, cb) {\n  if (er && er.code === 'ENOENT') {\n    return fs.stat(path.dirname(file), function (err, stat) {\n      if (!err && stat && !stat.isDirectory()) {\n        // ENOTDIR isn't used on Windows, but npm expects it.\n        er = Object.create(er)\n        er.code = 'ENOTDIR'\n        return cb(er)\n      } else {\n        return indexjs(file, er, log, strict, cb)\n      }\n    })\n  }\n  if (er) return cb(er)\n\n  if (cache[d]) return cb(null, jsonClone(cache[d]))\n\n  var data\n\n  try {\n    data = safeJSON(stripBOM(d))\n  } catch (er) {\n    data = parseIndex(d)\n    if (!data) return cb(parseError(er, file))\n  }\n\n  extrasCached(file, d, data, log, strict, cb)\n}\n\nfunction extrasCached (file, d, data, log, strict, cb) {\n  extras(file, data, log, strict, function (err, data) {\n    if (!err) {\n      cache[d] = jsonClone(data)\n    }\n    cb(err, data)\n  })\n}\n\nfunction indexjs (file, er, log, strict, cb) {\n  if (path.basename(file) === 'index.js') return cb(er)\n\n  var index = path.resolve(path.dirname(file), 'index.js')\n  fs.readFile(index, 'utf8', function (er2, d) {\n    if (er2) return cb(er)\n\n    if (cache[d]) return cb(null, cache[d])\n\n    var data = parseIndex(d)\n    if (!data) return cb(er)\n\n    extrasCached(file, d, data, log, strict, cb)\n  })\n}\n\nreadJson.extras = extras\nfunction extras (file, data, log_, strict_, cb_) {\n  var log, strict, cb\n  for (var i = 2; i < arguments.length - 1; i++) {\n    if (typeof arguments[i] === 'boolean') {\n      strict = arguments[i]\n    } else if (typeof arguments[i] === 'function') {\n      log = arguments[i]\n    }\n  }\n\n  if (!log) log = function () {}\n  cb = arguments[i]\n\n  var set = readJson.extraSet\n  var n = set.length\n  var errState = null\n  set.forEach(function (fn) {\n    fn(file, data, then)\n  })\n\n  function then (er) {\n    if (errState) return\n    if (er) return cb(errState = er)\n    if (--n > 0) return\n    final(file, data, log, strict, cb)\n  }\n}\n\nfunction scriptpath (file, data, cb) {\n  if (!data.scripts) return cb(null, data)\n  var k = Object.keys(data.scripts)\n  k.forEach(scriptpath_, data.scripts)\n  cb(null, data)\n}\n\nfunction scriptpath_ (key) {\n  var s = this[key]\n  // This is never allowed, and only causes problems\n  if (typeof s !== 'string') return delete this[key]\n\n  var spre = /^(\\.[/\\\\])?node_modules[/\\\\].bin[\\\\/]/\n  if (s.match(spre)) {\n    this[key] = this[key].replace(spre, '')\n  }\n}\n\nfunction gypfile (file, data, cb) {\n  var dir = path.dirname(file)\n  var s = data.scripts || {}\n  if (s.install || s.preinstall) return cb(null, data)\n\n  glob('*.gyp', { cwd: dir }, function (er, files) {\n    if (er) return cb(er)\n    if (data.gypfile === false) return cb(null, data)\n    gypfile_(file, data, files, cb)\n  })\n}\n\nfunction gypfile_ (file, data, files, cb) {\n  if (!files.length) return cb(null, data)\n  var s = data.scripts || {}\n  s.install = 'node-gyp rebuild'\n  data.scripts = s\n  data.gypfile = true\n  return cb(null, data)\n}\n\nfunction serverjs (file, data, cb) {\n  var dir = path.dirname(file)\n  var s = data.scripts || {}\n  if (s.start) return cb(null, data)\n  glob('server.js', { cwd: dir }, function (er, files) {\n    if (er) return cb(er)\n    serverjs_(file, data, files, cb)\n  })\n}\n\nfunction serverjs_ (file, data, files, cb) {\n  if (!files.length) return cb(null, data)\n  var s = data.scripts || {}\n  s.start = 'node server.js'\n  data.scripts = s\n  return cb(null, data)\n}\n\nfunction authors (file, data, cb) {\n  if (data.contributors) return cb(null, data)\n  var af = path.resolve(path.dirname(file), 'AUTHORS')\n  fs.readFile(af, 'utf8', function (er, ad) {\n    // ignore error.  just checking it.\n    if (er) return cb(null, data)\n    authors_(file, data, ad, cb)\n  })\n}\n\nfunction authors_ (file, data, ad, cb) {\n  ad = ad.split(/\\r?\\n/g).map(function (line) {\n    return line.replace(/^\\s*#.*$/, '').trim()\n  }).filter(function (line) {\n    return line\n  })\n  data.contributors = ad\n  return cb(null, data)\n}\n\nfunction readme (file, data, cb) {\n  if (data.readme) return cb(null, data)\n  var dir = path.dirname(file)\n  var globOpts = { cwd: dir, nocase: true, mark: true }\n  glob('{README,README.*}', globOpts, function (er, files) {\n    if (er) return cb(er)\n    // don't accept directories.\n    files = files.filter(function (file) {\n      return !file.match(/\\/$/)\n    })\n    if (!files.length) return cb()\n    var fn = preferMarkdownReadme(files)\n    var rm = path.resolve(dir, fn)\n    readme_(file, data, rm, cb)\n  })\n}\n\nfunction preferMarkdownReadme (files) {\n  var fallback = 0\n  var re = /\\.m?a?r?k?d?o?w?n?$/i\n  for (var i = 0; i < files.length; i++) {\n    if (files[i].match(re)) {\n      return files[i]\n    } else if (files[i].match(/README$/)) {\n      fallback = i\n    }\n  }\n  // prefer README.md, followed by README; otherwise, return\n  // the first filename (which could be README)\n  return files[fallback]\n}\n\nfunction readme_ (file, data, rm, cb) {\n  var rmfn = path.basename(rm)\n  fs.readFile(rm, 'utf8', function (er, rm) {\n    // maybe not readable, or something.\n    if (er) return cb()\n    data.readme = rm\n    data.readmeFilename = rmfn\n    return cb(er, data)\n  })\n}\n\nfunction mans (file, data, cb) {\n  var m = data.directories && data.directories.man\n  if (data.man || !m) return cb(null, data)\n  m = path.resolve(path.dirname(file), m)\n  glob('**/*.[0-9]', { cwd: m }, function (er, mans) {\n    if (er) return cb(er)\n    mans_(file, data, mans, cb)\n  })\n}\n\nfunction mans_ (file, data, mans, cb) {\n  var m = data.directories && data.directories.man\n  data.man = mans.map(function (mf) {\n    return path.resolve(path.dirname(file), m, mf)\n  })\n  return cb(null, data)\n}\n\nfunction bins (file, data, cb) {\n  if (Array.isArray(data.bin)) return bins_(file, data, data.bin, cb)\n\n  var m = data.directories && data.directories.bin\n  if (data.bin || !m) return cb(null, data)\n\n  m = path.resolve(path.dirname(file), m)\n  glob('**', { cwd: m }, function (er, bins) {\n    if (er) return cb(er)\n    bins_(file, data, bins, cb)\n  })\n}\n\nfunction bins_ (file, data, bins, cb) {\n  var m = (data.directories && data.directories.bin) || '.'\n  data.bin = bins.reduce(function (acc, mf) {\n    if (mf && mf.charAt(0) !== '.') {\n      var f = path.basename(mf)\n      acc[f] = slash(path.join(m, mf))\n    }\n    return acc\n  }, {})\n  return cb(null, data)\n}\n\nfunction githead (file, data, cb) {\n  if (data.gitHead) return cb(null, data)\n  var dir = path.dirname(file)\n  var head = path.resolve(dir, '.git/HEAD')\n  fs.readFile(head, 'utf8', function (er, head) {\n    if (er) return cb(null, data)\n    githead_(file, data, dir, head, cb)\n  })\n}\n\nfunction githead_ (file, data, dir, head, cb) {\n  if (!head.match(/^ref: /)) {\n    data.gitHead = head.trim()\n    return cb(null, data)\n  }\n  var headRef = head.replace(/^ref: /, '').trim()\n  var headFile = path.resolve(dir, '.git', headRef)\n  fs.readFile(headFile, 'utf8', function (er, head) {\n    if (er || !head) {\n      var packFile = path.resolve(dir, '.git/packed-refs')\n      return fs.readFile(packFile, 'utf8', function (er, refs) {\n        if (er || !refs) {\n          return cb(null, data)\n        }\n        refs = refs.split('\\n')\n        for (var i = 0; i < refs.length; i++) {\n          var match = refs[i].match(/^([0-9a-f]{40}) (.+)$/)\n          if (match && match[2].trim() === headRef) {\n            data.gitHead = match[1]\n            break\n          }\n        }\n        return cb(null, data)\n      })\n    }\n    head = head.replace(/^ref: /, '').trim()\n    data.gitHead = head\n    return cb(null, data)\n  })\n}\n\n/**\n * Warn if the bin references don't point to anything.  This might be better in\n * normalize-package-data if it had access to the file path.\n */\nfunction checkBinReferences_ (file, data, warn, cb) {\n  if (!(data.bin instanceof Object)) return cb()\n\n  var keys = Object.keys(data.bin)\n  var keysLeft = keys.length\n  if (!keysLeft) return cb()\n\n  function handleExists (relName, result) {\n    keysLeft--\n    if (!result) warn('No bin file found at ' + relName)\n    if (!keysLeft) cb()\n  }\n\n  keys.forEach(function (key) {\n    var dirName = path.dirname(file)\n    var relName = data.bin[key]\n    try {\n      var binPath = path.resolve(dirName, relName)\n      fs.stat(binPath, (err) => handleExists(relName, !err))\n    } catch (error) {\n      if (error.message === 'Arguments to path.resolve must be strings' || error.message.indexOf('Path must be a string') === 0) {\n        warn('Bin filename for ' + key + ' is not a string: ' + util.inspect(relName))\n        handleExists(relName, true)\n      } else {\n        cb(error)\n      }\n    }\n  })\n}\n\nfunction final (file, data, log, strict, cb) {\n  var pId = makePackageId(data)\n\n  function warn (msg) {\n    if (typoWarned[pId]) return\n    if (log) log('package.json', pId, msg)\n  }\n\n  try {\n    normalizeData(data, warn, strict)\n  } catch (error) {\n    return cb(error)\n  }\n\n  checkBinReferences_(file, data, warn, function () {\n    typoWarned[pId] = true\n    cb(null, data)\n  })\n}\n\nfunction makePackageId (data) {\n  var name = cleanString(data.name)\n  var ver = cleanString(data.version)\n  return name + '@' + ver\n}\n\nfunction cleanString (str) {\n  return (!str || typeof (str) !== 'string') ? '' : str.trim()\n}\n\n// /**package { \"name\": \"foo\", \"version\": \"1.2.3\", ... } **/\nfunction parseIndex (data) {\n  data = data.split(/^\\/\\*\\*package(?:\\s|$)/m)\n\n  if (data.length < 2) return null\n  data = data[1]\n  data = data.split(/\\*\\*\\/$/m)\n\n  if (data.length < 2) return null\n  data = data[0]\n  data = data.replace(/^\\s*\\*/mg, '')\n\n  try {\n    return safeJSON(data)\n  } catch (er) {\n    return null\n  }\n}\n\nfunction parseError (ex, file) {\n  var e = new Error('Failed to parse json\\n' + ex.message)\n  e.code = 'EJSONPARSE'\n  e.file = file\n  return e\n}\n"]}