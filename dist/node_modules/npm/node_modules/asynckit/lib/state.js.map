{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/asynckit/lib/state.js"],"names":["module","exports","state","list","sortMethod","isNamedList","Array","isArray","initState","index","keyedList","Object","keys","jobs","results","size","length","sort","a","b"],"mappings":";;AAAA;AACAA,OAAOC,OAAP,GAAiBC,KAAjB;;AAEA;;;;;;;;;AASA,SAASA,KAAT,CAAeC,IAAf,EAAqBC,UAArB,EACA;AACE,MAAIC,cAAc,CAACC,MAAMC,OAAN,CAAcJ,IAAd,CAAnB;AAAA,MACIK,YACF;AACEC,WAAW,CADb;AAEEC,eAAWL,eAAeD,UAAf,GAA4BO,OAAOC,IAAP,CAAYT,IAAZ,CAA5B,GAAgD,IAF7D;AAGEU,UAAW,EAHb;AAIEC,aAAWT,cAAc,EAAd,GAAmB,EAJhC;AAKEU,UAAWV,cAAcM,OAAOC,IAAP,CAAYT,IAAZ,EAAkBa,MAAhC,GAAyCb,KAAKa;AAL3D,GAFF;;AAWA,MAAIZ,UAAJ,EACA;AACE;AACA;AACAI,cAAUE,SAAV,CAAoBO,IAApB,CAAyBZ,cAAcD,UAAd,GAA2B,UAASc,CAAT,EAAYC,CAAZ,EACpD;AACE,aAAOf,WAAWD,KAAKe,CAAL,CAAX,EAAoBf,KAAKgB,CAAL,CAApB,CAAP;AACD,KAHD;AAID;;AAED,SAAOX,SAAP;AACD","file":"state.js","sourcesContent":["// API\nmodule.exports = state;\n\n/**\n * Creates initial state object\n * for iteration over list\n *\n * @param   {array|object} list - list to iterate over\n * @param   {function|null} sortMethod - function to use for keys sort,\n *                                     or `null` to keep them as is\n * @returns {object} - initial state object\n */\nfunction state(list, sortMethod)\n{\n  var isNamedList = !Array.isArray(list)\n    , initState =\n    {\n      index    : 0,\n      keyedList: isNamedList || sortMethod ? Object.keys(list) : null,\n      jobs     : {},\n      results  : isNamedList ? {} : [],\n      size     : isNamedList ? Object.keys(list).length : list.length\n    }\n    ;\n\n  if (sortMethod)\n  {\n    // sort array keys based on it's values\n    // sort object's keys just on own merit\n    initState.keyedList.sort(isNamedList ? sortMethod : function(a, b)\n    {\n      return sortMethod(list[a], list[b]);\n    });\n  }\n\n  return initState;\n}\n"]}