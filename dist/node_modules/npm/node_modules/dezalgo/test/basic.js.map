{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/dezalgo/test/basic.js"],"names":["test","require","dz","t","n","foo","i","cb","process","nextTick","bind","called","order","o","cached","equal","setTimeout","end"],"mappings":";;AAAA,IAAIA,OAAOC,QAAQ,KAAR,EAAeD,IAA1B;AACA,IAAIE,KAAKD,QAAQ,eAAR,CAAT;;AAEAD,KAAK,eAAL,EAAsB,UAASG,CAAT,EAAY;;AAEhC,MAAIC,IAAI,CAAR;AACA,WAASC,GAAT,CAAaC,CAAb,EAAgBC,EAAhB,EAAoB;AAClBA,SAAKL,GAAGK,EAAH,CAAL;AACA,QAAI,EAAEH,CAAF,GAAM,CAAV,EAAaG,GAAG,IAAH,EAASD,CAAT,EAAb,KACKE,QAAQC,QAAR,CAAiBF,GAAGG,IAAH,CAAQ,IAAR,EAAc,KAAd,EAAqBJ,CAArB,CAAjB;AACN;;AAED,MAAIK,SAAS,CAAb;AACA,MAAIC,QAAQ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,CAAZ;AACA,MAAIC,IAAI,CAAR;AACA,OAAK,IAAIP,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwBA,GAAxB,EAA6B;AAC3BD,QAAIC,CAAJ,EAAO,UAASQ,MAAT,EAAiBR,CAAjB,EAAoB;AACzBH,QAAEY,KAAF,CAAQT,CAAR,EAAWM,MAAMC,GAAN,CAAX;AACAV,QAAEY,KAAF,CAAQT,IAAI,CAAZ,EAAeQ,SAAS,CAAT,GAAa,CAA5B;AACAH;AACD,KAJD;AAKAR,MAAEY,KAAF,CAAQJ,MAAR,EAAgB,CAAhB;AACD;;AAEDK,aAAW,YAAW;AACpBb,MAAEY,KAAF,CAAQJ,MAAR,EAAgB,EAAhB;AACAR,MAAEc,GAAF;AACD,GAHD;AAID,CAzBD","file":"basic.js","sourcesContent":["var test = require('tap').test\nvar dz = require('../dezalgo.js')\n\ntest('the dark pony', function(t) {\n\n  var n = 0\n  function foo(i, cb) {\n    cb = dz(cb)\n    if (++n % 2) cb(true, i)\n    else process.nextTick(cb.bind(null, false, i))\n  }\n\n  var called = 0\n  var order = [0, 2, 4, 6, 8, 1, 3, 5, 7, 9]\n  var o = 0\n  for (var i = 0; i < 10; i++) {\n    foo(i, function(cached, i) {\n      t.equal(i, order[o++])\n      t.equal(i % 2, cached ? 0 : 1)\n      called++\n    })\n    t.equal(called, 0)\n  }\n\n  setTimeout(function() {\n    t.equal(called, 10)\n    t.end()\n  })\n})\n"]}