{"version":3,"sources":["../../../../../node_modules/npm/node_modules/unpipe/index.js"],"names":["module","exports","unpipe","hasPipeDataListeners","stream","listeners","i","length","name","TypeError","listener","call"],"mappings":"AAAA;;;;;;AAMA;;AAEA;;;;;AAKAA,OAAOC,OAAP,GAAiBC,MAAjB;;AAEA;;;;;AAKA,SAASC,oBAAT,CAA8BC,MAA9B,EAAsC;AACpC,MAAIC,YAAYD,OAAOC,SAAP,CAAiB,MAAjB,CAAhB;;AAEA,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,UAAUE,MAA9B,EAAsCD,GAAtC,EAA2C;AACzC,QAAID,UAAUC,CAAV,EAAaE,IAAb,KAAsB,QAA1B,EAAoC;AAClC,aAAO,IAAP;AACD;AACF;;AAED,SAAO,KAAP;AACD;;AAED;;;;;;;AAOA,SAASN,MAAT,CAAgBE,MAAhB,EAAwB;AACtB,MAAI,CAACA,MAAL,EAAa;AACX,UAAM,IAAIK,SAAJ,CAAc,6BAAd,CAAN;AACD;;AAED,MAAI,OAAOL,OAAOF,MAAd,KAAyB,UAA7B,EAAyC;AACvC;AACAE,WAAOF,MAAP;AACA;AACD;;AAED;AACA,MAAI,CAACC,qBAAqBC,MAArB,CAAL,EAAmC;AACjC;AACD;;AAED,MAAIM,QAAJ;AACA,MAAIL,YAAYD,OAAOC,SAAP,CAAiB,OAAjB,CAAhB;;AAEA,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,UAAUE,MAA9B,EAAsCD,GAAtC,EAA2C;AACzCI,eAAWL,UAAUC,CAAV,CAAX;;AAEA,QAAII,SAASF,IAAT,KAAkB,SAAlB,IAA+BE,SAASF,IAAT,KAAkB,SAArD,EAAgE;AAC9D;AACD;;AAED;AACAE,aAASC,IAAT,CAAcP,MAAd;AACD;AACF","file":"index.js","sourcesContent":["/*!\n * unpipe\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = unpipe\n\n/**\n * Determine if there are Node.js pipe-like data listeners.\n * @private\n */\n\nfunction hasPipeDataListeners(stream) {\n  var listeners = stream.listeners('data')\n\n  for (var i = 0; i < listeners.length; i++) {\n    if (listeners[i].name === 'ondata') {\n      return true\n    }\n  }\n\n  return false\n}\n\n/**\n * Unpipe a stream from all destinations.\n *\n * @param {object} stream\n * @public\n */\n\nfunction unpipe(stream) {\n  if (!stream) {\n    throw new TypeError('argument stream is required')\n  }\n\n  if (typeof stream.unpipe === 'function') {\n    // new-style\n    stream.unpipe()\n    return\n  }\n\n  // Node.js 0.8 hack\n  if (!hasPipeDataListeners(stream)) {\n    return\n  }\n\n  var listener\n  var listeners = stream.listeners('close')\n\n  for (var i = 0; i < listeners.length; i++) {\n    listener = listeners[i]\n\n    if (listener.name !== 'cleanup' && listener.name !== 'onclose') {\n      continue\n    }\n\n    // invoke the listener\n    listener.call(stream)\n  }\n}\n"]}