{"version":3,"sources":["../../../../../node_modules/npm/node_modules/fs.realpath/index.js"],"names":["module","exports","realpath","sync","realpathSync","monkeypatch","unmonkeypatch","fs","require","origRealpath","origRealpathSync","version","process","ok","test","old","newError","er","syscall","code","p","cache","cb","result"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiBC,QAAjB;AACAA,SAASA,QAAT,GAAoBA,QAApB;AACAA,SAASC,IAAT,GAAgBC,YAAhB;AACAF,SAASE,YAAT,GAAwBA,YAAxB;AACAF,SAASG,WAAT,GAAuBA,WAAvB;AACAH,SAASI,aAAT,GAAyBA,aAAzB;;AAEA,IAAIC,KAAKC,QAAQ,IAAR,CAAT;AACA,IAAIC,eAAeF,GAAGL,QAAtB;AACA,IAAIQ,mBAAmBH,GAAGH,YAA1B;;AAEA,IAAIO,UAAUC,QAAQD,OAAtB;AACA,IAAIE,KAAK,YAAYC,IAAZ,CAAiBH,OAAjB,CAAT;AACA,IAAII,MAAMP,QAAQ,UAAR,CAAV;;AAEA,SAASQ,QAAT,CAAmBC,EAAnB,EAAuB;AACrB,SAAOA,MAAMA,GAAGC,OAAH,KAAe,UAArB,KACLD,GAAGE,IAAH,KAAY,OAAZ,IACAF,GAAGE,IAAH,KAAY,QADZ,IAEAF,GAAGE,IAAH,KAAY,cAHP,CAAP;AAKD;;AAED,SAASjB,QAAT,CAAmBkB,CAAnB,EAAsBC,KAAtB,EAA6BC,EAA7B,EAAiC;AAC/B,MAAIT,EAAJ,EAAQ;AACN,WAAOJ,aAAaW,CAAb,EAAgBC,KAAhB,EAAuBC,EAAvB,CAAP;AACD;;AAED,MAAI,OAAOD,KAAP,KAAiB,UAArB,EAAiC;AAC/BC,SAAKD,KAAL;AACAA,YAAQ,IAAR;AACD;AACDZ,eAAaW,CAAb,EAAgBC,KAAhB,EAAuB,UAAUJ,EAAV,EAAcM,MAAd,EAAsB;AAC3C,QAAIP,SAASC,EAAT,CAAJ,EAAkB;AAChBF,UAAIb,QAAJ,CAAakB,CAAb,EAAgBC,KAAhB,EAAuBC,EAAvB;AACD,KAFD,MAEO;AACLA,SAAGL,EAAH,EAAOM,MAAP;AACD;AACF,GAND;AAOD;;AAED,SAASnB,YAAT,CAAuBgB,CAAvB,EAA0BC,KAA1B,EAAiC;AAC/B,MAAIR,EAAJ,EAAQ;AACN,WAAOH,iBAAiBU,CAAjB,EAAoBC,KAApB,CAAP;AACD;;AAED,MAAI;AACF,WAAOX,iBAAiBU,CAAjB,EAAoBC,KAApB,CAAP;AACD,GAFD,CAEE,OAAOJ,EAAP,EAAW;AACX,QAAID,SAASC,EAAT,CAAJ,EAAkB;AAChB,aAAOF,IAAIX,YAAJ,CAAiBgB,CAAjB,EAAoBC,KAApB,CAAP;AACD,KAFD,MAEO;AACL,YAAMJ,EAAN;AACD;AACF;AACF;;AAED,SAASZ,WAAT,GAAwB;AACtBE,KAAGL,QAAH,GAAcA,QAAd;AACAK,KAAGH,YAAH,GAAkBA,YAAlB;AACD;;AAED,SAASE,aAAT,GAA0B;AACxBC,KAAGL,QAAH,GAAcO,YAAd;AACAF,KAAGH,YAAH,GAAkBM,gBAAlB;AACD","file":"index.js","sourcesContent":["module.exports = realpath\nrealpath.realpath = realpath\nrealpath.sync = realpathSync\nrealpath.realpathSync = realpathSync\nrealpath.monkeypatch = monkeypatch\nrealpath.unmonkeypatch = unmonkeypatch\n\nvar fs = require('fs')\nvar origRealpath = fs.realpath\nvar origRealpathSync = fs.realpathSync\n\nvar version = process.version\nvar ok = /^v[0-5]\\./.test(version)\nvar old = require('./old.js')\n\nfunction newError (er) {\n  return er && er.syscall === 'realpath' && (\n    er.code === 'ELOOP' ||\n    er.code === 'ENOMEM' ||\n    er.code === 'ENAMETOOLONG'\n  )\n}\n\nfunction realpath (p, cache, cb) {\n  if (ok) {\n    return origRealpath(p, cache, cb)\n  }\n\n  if (typeof cache === 'function') {\n    cb = cache\n    cache = null\n  }\n  origRealpath(p, cache, function (er, result) {\n    if (newError(er)) {\n      old.realpath(p, cache, cb)\n    } else {\n      cb(er, result)\n    }\n  })\n}\n\nfunction realpathSync (p, cache) {\n  if (ok) {\n    return origRealpathSync(p, cache)\n  }\n\n  try {\n    return origRealpathSync(p, cache)\n  } catch (er) {\n    if (newError(er)) {\n      return old.realpathSync(p, cache)\n    } else {\n      throw er\n    }\n  }\n}\n\nfunction monkeypatch () {\n  fs.realpath = realpath\n  fs.realpathSync = realpathSync\n}\n\nfunction unmonkeypatch () {\n  fs.realpath = origRealpath\n  fs.realpathSync = origRealpathSync\n}\n"]}