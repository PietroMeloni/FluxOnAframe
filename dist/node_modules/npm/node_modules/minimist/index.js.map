{"version":3,"sources":["../../../../../node_modules/npm/node_modules/minimist/index.js"],"names":["module","exports","args","opts","flags","bools","strings","concat","filter","Boolean","forEach","key","string","aliases","Object","keys","alias","x","y","defaults","argv","_","setArg","undefined","notFlags","indexOf","slice","val","value","isNumber","Number","setKey","split","i","length","arg","test","m","match","next","letters","broken","j","push","hasKey","obj","o","Array","isArray","longest","xs","Math","max","apply","map"],"mappings":"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","file":"index.js","sourcesContent":["module.exports = function (args, opts) {\n    if (!opts) opts = {};\n    \n    var flags = { bools : {}, strings : {} };\n    \n    [].concat(opts['boolean']).filter(Boolean).forEach(function (key) {\n        flags.bools[key] = true;\n    });\n    \n    [].concat(opts.string).filter(Boolean).forEach(function (key) {\n        flags.strings[key] = true;\n    });\n    \n    var aliases = {};\n    Object.keys(opts.alias || {}).forEach(function (key) {\n        aliases[key] = [].concat(opts.alias[key]);\n        aliases[key].forEach(function (x) {\n            aliases[x] = [key].concat(aliases[key].filter(function (y) {\n                return x !== y;\n            }));\n        });\n    });\n    \n    var defaults = opts['default'] || {};\n    \n    var argv = { _ : [] };\n    Object.keys(flags.bools).forEach(function (key) {\n        setArg(key, defaults[key] === undefined ? false : defaults[key]);\n    });\n    \n    var notFlags = [];\n\n    if (args.indexOf('--') !== -1) {\n        notFlags = args.slice(args.indexOf('--')+1);\n        args = args.slice(0, args.indexOf('--'));\n    }\n\n    function setArg (key, val) {\n        var value = !flags.strings[key] && isNumber(val)\n            ? Number(val) : val\n        ;\n        setKey(argv, key.split('.'), value);\n        \n        (aliases[key] || []).forEach(function (x) {\n            setKey(argv, x.split('.'), value);\n        });\n    }\n    \n    for (var i = 0; i < args.length; i++) {\n        var arg = args[i];\n        \n        if (/^--.+=/.test(arg)) {\n            // Using [\\s\\S] instead of . because js doesn't support the\n            // 'dotall' regex modifier. See:\n            // http://stackoverflow.com/a/1068308/13216\n            var m = arg.match(/^--([^=]+)=([\\s\\S]*)$/);\n            setArg(m[1], m[2]);\n        }\n        else if (/^--no-.+/.test(arg)) {\n            var key = arg.match(/^--no-(.+)/)[1];\n            setArg(key, false);\n        }\n        else if (/^--.+/.test(arg)) {\n            var key = arg.match(/^--(.+)/)[1];\n            var next = args[i + 1];\n            if (next !== undefined && !/^-/.test(next)\n            && !flags.bools[key]\n            && (aliases[key] ? !flags.bools[aliases[key]] : true)) {\n                setArg(key, next);\n                i++;\n            }\n            else if (/^(true|false)$/.test(next)) {\n                setArg(key, next === 'true');\n                i++;\n            }\n            else {\n                setArg(key, flags.strings[key] ? '' : true);\n            }\n        }\n        else if (/^-[^-]+/.test(arg)) {\n            var letters = arg.slice(1,-1).split('');\n            \n            var broken = false;\n            for (var j = 0; j < letters.length; j++) {\n                var next = arg.slice(j+2);\n                \n                if (next === '-') {\n                    setArg(letters[j], next)\n                    continue;\n                }\n                \n                if (/[A-Za-z]/.test(letters[j])\n                && /-?\\d+(\\.\\d*)?(e-?\\d+)?$/.test(next)) {\n                    setArg(letters[j], next);\n                    broken = true;\n                    break;\n                }\n                \n                if (letters[j+1] && letters[j+1].match(/\\W/)) {\n                    setArg(letters[j], arg.slice(j+2));\n                    broken = true;\n                    break;\n                }\n                else {\n                    setArg(letters[j], flags.strings[letters[j]] ? '' : true);\n                }\n            }\n            \n            var key = arg.slice(-1)[0];\n            if (!broken && key !== '-') {\n                if (args[i+1] && !/^(-|--)[^-]/.test(args[i+1])\n                && !flags.bools[key]\n                && (aliases[key] ? !flags.bools[aliases[key]] : true)) {\n                    setArg(key, args[i+1]);\n                    i++;\n                }\n                else if (args[i+1] && /true|false/.test(args[i+1])) {\n                    setArg(key, args[i+1] === 'true');\n                    i++;\n                }\n                else {\n                    setArg(key, flags.strings[key] ? '' : true);\n                }\n            }\n        }\n        else {\n            argv._.push(\n                flags.strings['_'] || !isNumber(arg) ? arg : Number(arg)\n            );\n        }\n    }\n    \n    Object.keys(defaults).forEach(function (key) {\n        if (!hasKey(argv, key.split('.'))) {\n            setKey(argv, key.split('.'), defaults[key]);\n            \n            (aliases[key] || []).forEach(function (x) {\n                setKey(argv, x.split('.'), defaults[key]);\n            });\n        }\n    });\n    \n    notFlags.forEach(function(key) {\n        argv._.push(key);\n    });\n\n    return argv;\n};\n\nfunction hasKey (obj, keys) {\n    var o = obj;\n    keys.slice(0,-1).forEach(function (key) {\n        o = (o[key] || {});\n    });\n\n    var key = keys[keys.length - 1];\n    return key in o;\n}\n\nfunction setKey (obj, keys, value) {\n    var o = obj;\n    keys.slice(0,-1).forEach(function (key) {\n        if (o[key] === undefined) o[key] = {};\n        o = o[key];\n    });\n    \n    var key = keys[keys.length - 1];\n    if (o[key] === undefined || typeof o[key] === 'boolean') {\n        o[key] = value;\n    }\n    else if (Array.isArray(o[key])) {\n        o[key].push(value);\n    }\n    else {\n        o[key] = [ o[key], value ];\n    }\n}\n\nfunction isNumber (x) {\n    if (typeof x === 'number') return true;\n    if (/^0x[0-9a-f]+$/i.test(x)) return true;\n    return /^[-+]?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(e[-+]?\\d+)?$/.test(x);\n}\n\nfunction longest (xs) {\n    return Math.max.apply(null, xs.map(function (x) { return x.length }));\n}\n"]}