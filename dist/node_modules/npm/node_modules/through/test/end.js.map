{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/through/test/end.js"],"names":["test","require","through","assert","ts","ended","closed","on","ok","write","end","t","equal","queue","resume"],"mappings":";;AAAA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;AACA,IAAIC,UAAUD,QAAQ,KAAR,CAAd;;AAEA;;AAEAD,KAAK,kBAAL,EAAyB,UAAUG,MAAV,EAAkB;AACzC,MAAIC,KAAKF,SAAT;AACA,MAAIG,QAAQ,KAAZ;AAAA,MAAmBC,SAAS,KAA5B;;AAEAF,KAAGG,EAAH,CAAM,KAAN,EAAa,YAAY;AACvBJ,WAAOK,EAAP,CAAU,CAACF,MAAX;AACAD,YAAQ,IAAR;AACD,GAHD;AAIAD,KAAGG,EAAH,CAAM,OAAN,EAAe,YAAY;AACzBJ,WAAOK,EAAP,CAAUH,KAAV;AACAC,aAAS,IAAT;AACD,GAHD;;AAKAF,KAAGK,KAAH,CAAS,CAAT;AACAL,KAAGK,KAAH,CAAS,CAAT;AACAL,KAAGK,KAAH,CAAS,CAAT;AACAL,KAAGM,GAAH;AACAP,SAAOK,EAAP,CAAUH,KAAV;AACAF,SAAOK,EAAP,CAAUF,MAAV;AACAH,SAAOO,GAAP;AACD,CApBD;;AAsBAV,KAAK,eAAL,EAAsB,UAAUW,CAAV,EAAa;;AAEjC,MAAIP,KAAKF,SAAT;AACA,MAAIG,QAAQ,KAAZ;AAAA,MAAmBC,SAAS,KAA5B;;AAEAF,KAAGG,EAAH,CAAM,KAAN,EAAa,YAAY;AACvBI,MAAEC,KAAF,CAAQP,KAAR,EAAe,KAAf;AACAA,YAAQ,IAAR;AACD,GAHD;;AAKAD,KAAGS,KAAH,CAAS,IAAT;AACAT,KAAGS,KAAH,CAAS,IAAT;AACAT,KAAGS,KAAH,CAAS,IAAT;;AAEAT,KAAGU,MAAH;;AAEAH,IAAED,GAAF;AACD,CAjBD","file":"end.js","sourcesContent":["var test = require('tape')\nvar through = require('../')\n\n// must emit end before close.\n\ntest('end before close', function (assert) {\n  var ts = through()\n  var ended = false, closed = false\n\n  ts.on('end', function () {\n    assert.ok(!closed)\n    ended = true\n  })\n  ts.on('close', function () {\n    assert.ok(ended)\n    closed = true\n  })\n\n  ts.write(1)\n  ts.write(2)\n  ts.write(3)\n  ts.end()\n  assert.ok(ended)\n  assert.ok(closed)\n  assert.end()\n})\n\ntest('end only once', function (t) {\n\n  var ts = through()\n  var ended = false, closed = false\n\n  ts.on('end', function () {\n    t.equal(ended, false)\n    ended = true\n  })\n\n  ts.queue(null)\n  ts.queue(null)\n  ts.queue(null)\n\n  ts.resume()\n\n  t.end()\n})\n"]}