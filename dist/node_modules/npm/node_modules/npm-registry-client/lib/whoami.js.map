{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/npm-registry-client/lib/whoami.js"],"names":["module","exports","whoami","url","require","assert","uri","params","cb","auth","username","process","nextTick","bind","request","resolve","er","userdata"],"mappings":";;;;AAAAA,OAAOC,OAAP,GAAiBC,MAAjB;;AAEA,IAAIC,MAAMC,QAAQ,KAAR,CAAV;AACA,IAAIC,SAASD,QAAQ,QAAR,CAAb;;AAEA,SAASF,MAAT,CAAiBI,GAAjB,EAAsBC,MAAtB,EAA8BC,EAA9B,EAAkC;AAChCH,SAAO,OAAOC,GAAP,KAAe,QAAtB,EAAgC,kCAAhC;AACAD,SAAOE,UAAU,QAAOA,MAAP,yCAAOA,MAAP,OAAkB,QAAnC,EAA6C,4BAA7C;AACAF,SAAO,OAAOG,EAAP,KAAc,UAArB,EAAiC,8BAAjC;;AAEA,MAAIC,OAAOF,OAAOE,IAAlB;AACAJ,SAAOI,QAAQ,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAA/B,EAAyC,0BAAzC;;AAEA,MAAIA,KAAKC,QAAT,EAAmB,OAAOC,QAAQC,QAAR,CAAiBJ,GAAGK,IAAH,CAAQ,IAAR,EAAc,IAAd,EAAoBJ,KAAKC,QAAzB,CAAjB,CAAP;;AAEnB,OAAKI,OAAL,CAAaX,IAAIY,OAAJ,CAAYT,GAAZ,EAAiB,UAAjB,CAAb,EAA2C,EAAEG,MAAMA,IAAR,EAA3C,EAA2D,UAAUO,EAAV,EAAcC,QAAd,EAAwB;AACjF,QAAID,EAAJ,EAAQ,OAAOR,GAAGQ,EAAH,CAAP;;AAERR,OAAG,IAAH,EAASS,SAASP,QAAlB;AACD,GAJD;AAKD","file":"whoami.js","sourcesContent":["module.exports = whoami\n\nvar url = require('url')\nvar assert = require('assert')\n\nfunction whoami (uri, params, cb) {\n  assert(typeof uri === 'string', 'must pass registry URI to whoami')\n  assert(params && typeof params === 'object', 'must pass params to whoami')\n  assert(typeof cb === 'function', 'must pass callback to whoami')\n\n  var auth = params.auth\n  assert(auth && typeof auth === 'object', 'must pass auth to whoami')\n\n  if (auth.username) return process.nextTick(cb.bind(this, null, auth.username))\n\n  this.request(url.resolve(uri, '-/whoami'), { auth: auth }, function (er, userdata) {\n    if (er) return cb(er)\n\n    cb(null, userdata.username)\n  })\n}\n"]}