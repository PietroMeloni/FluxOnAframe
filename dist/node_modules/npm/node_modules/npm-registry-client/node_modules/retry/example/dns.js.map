{"version":3,"sources":["../../../../../../../../node_modules/npm/node_modules/npm-registry-client/node_modules/retry/example/dns.js"],"names":["dns","require","retry","faultTolerantResolve","address","cb","opts","retries","factor","minTimeout","maxTimeout","randomize","operation","attempt","currentAttempt","resolve","err","addresses","mainError","errors","console","warn","log"],"mappings":";;AAAA,IAAIA,MAAMC,QAAQ,KAAR,CAAV;AACA,IAAIC,QAAQD,QAAQ,cAAR,CAAZ;;AAEA,SAASE,oBAAT,CAA8BC,OAA9B,EAAuCC,EAAvC,EAA2C;AACzC,MAAIC,OAAO;AACTC,aAAS,CADA;AAETC,YAAQ,CAFC;AAGTC,gBAAY,IAAI,IAHP;AAITC,gBAAY,IAAI,IAJP;AAKTC,eAAW;AALF,GAAX;AAOA,MAAIC,YAAYV,MAAMU,SAAN,CAAgBN,IAAhB,CAAhB;;AAEAM,YAAUC,OAAV,CAAkB,UAASC,cAAT,EAAyB;AACzCd,QAAIe,OAAJ,CAAYX,OAAZ,EAAqB,UAASY,GAAT,EAAcC,SAAd,EAAyB;AAC5C,UAAIL,UAAUV,KAAV,CAAgBc,GAAhB,CAAJ,EAA0B;AACxB;AACD;;AAEDX,SAAGO,UAAUM,SAAV,EAAH,EAA0BN,UAAUO,MAAV,EAA1B,EAA8CF,SAA9C;AACD,KAND;AAOD,GARD;AASD;;AAEDd,qBAAqB,YAArB,EAAmC,UAASa,GAAT,EAAcG,MAAd,EAAsBF,SAAtB,EAAiC;AAClEG,UAAQC,IAAR,CAAa,MAAb;AACAD,UAAQE,GAAR,CAAYN,GAAZ;;AAEAI,UAAQC,IAAR,CAAa,YAAb;AACAD,UAAQE,GAAR,CAAYL,SAAZ;AACD,CAND","file":"dns.js","sourcesContent":["var dns = require('dns');\nvar retry = require('../lib/retry');\n\nfunction faultTolerantResolve(address, cb) {\n  var opts = {\n    retries: 2,\n    factor: 2,\n    minTimeout: 1 * 1000,\n    maxTimeout: 2 * 1000,\n    randomize: true\n  };\n  var operation = retry.operation(opts);\n\n  operation.attempt(function(currentAttempt) {\n    dns.resolve(address, function(err, addresses) {\n      if (operation.retry(err)) {\n        return;\n      }\n\n      cb(operation.mainError(), operation.errors(), addresses);\n    });\n  });\n}\n\nfaultTolerantResolve('nodejs.org', function(err, errors, addresses) {\n  console.warn('err:');\n  console.log(err);\n\n  console.warn('addresses:');\n  console.log(addresses);\n});"]}