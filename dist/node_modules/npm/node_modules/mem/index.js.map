{"version":3,"sources":["../../../../../node_modules/npm/node_modules/mem/index.js"],"names":["mimicFn","require","cacheStore","WeakMap","defaultCacheKey","x","arguments","length","undefined","JSON","stringify","module","exports","fn","opts","Object","assign","cacheKey","cache","Map","memoized","get","key","apply","has","c","maxAge","Date","now","data","ret","set","clear"],"mappings":"AAAA;;;;AACA,IAAMA,UAAUC,QAAQ,UAAR,CAAhB;;AAEA,IAAMC,aAAa,IAAIC,OAAJ,EAAnB;;AAEA,IAAMC,kBAAkB,SAAlBA,eAAkB,CAAUC,CAAV,EAAa;AACpC,KAAIC,UAAUC,MAAV,KAAqB,CAArB,KAA2BF,MAAM,IAAN,IAAcA,MAAMG,SAApB,IAAkC,OAAOH,CAAP,KAAa,UAAb,IAA2B,QAAOA,CAAP,yCAAOA,CAAP,OAAa,QAArG,CAAJ,EAAqH;AACpH,SAAOA,CAAP;AACA;;AAED,QAAOI,KAAKC,SAAL,CAAeJ,SAAf,CAAP;AACA,CAND;;AAQAK,OAAOC,OAAP,GAAiB,UAACC,EAAD,EAAKC,IAAL,EAAc;AAC9BA,QAAOC,OAAOC,MAAP,CAAc;AACpBC,YAAUb,eADU;AAEpBc,SAAO,IAAIC,GAAJ;AAFa,EAAd,EAGJL,IAHI,CAAP;;AAKA,KAAMM,WAAW,SAAXA,QAAW,GAAY;AAC5B,MAAMF,QAAQhB,WAAWmB,GAAX,CAAeD,QAAf,CAAd;AACA,MAAME,MAAMR,KAAKG,QAAL,CAAcM,KAAd,CAAoB,IAApB,EAA0BjB,SAA1B,CAAZ;;AAEA,MAAIY,MAAMM,GAAN,CAAUF,GAAV,CAAJ,EAAoB;AACnB,OAAMG,IAAIP,MAAMG,GAAN,CAAUC,GAAV,CAAV;;AAEA,OAAI,OAAOR,KAAKY,MAAZ,KAAuB,QAAvB,IAAmCC,KAAKC,GAAL,KAAaH,EAAEC,MAAtD,EAA8D;AAC7D,WAAOD,EAAEI,IAAT;AACA;AACD;;AAED,MAAMC,MAAMjB,GAAGU,KAAH,CAAS,IAAT,EAAejB,SAAf,CAAZ;;AAEAY,QAAMa,GAAN,CAAUT,GAAV,EAAe;AACdO,SAAMC,GADQ;AAEdJ,WAAQC,KAAKC,GAAL,MAAcd,KAAKY,MAAL,IAAe,CAA7B;AAFM,GAAf;;AAKA,SAAOI,GAAP;AACA,EApBD;;AAsBA9B,SAAQoB,QAAR,EAAkBP,EAAlB;;AAEAX,YAAW6B,GAAX,CAAeX,QAAf,EAAyBN,KAAKI,KAA9B;;AAEA,QAAOE,QAAP;AACA,CAjCD;;AAmCAT,OAAOC,OAAP,CAAeoB,KAAf,GAAuB,cAAM;AAC5B,KAAMd,QAAQhB,WAAWmB,GAAX,CAAeR,EAAf,CAAd;;AAEA,KAAIK,SAAS,OAAOA,MAAMc,KAAb,KAAuB,UAApC,EAAgD;AAC/Cd,QAAMc,KAAN;AACA;AACD,CAND","file":"index.js","sourcesContent":["'use strict';\nconst mimicFn = require('mimic-fn');\n\nconst cacheStore = new WeakMap();\n\nconst defaultCacheKey = function (x) {\n\tif (arguments.length === 1 && (x === null || x === undefined || (typeof x !== 'function' && typeof x !== 'object'))) {\n\t\treturn x;\n\t}\n\n\treturn JSON.stringify(arguments);\n};\n\nmodule.exports = (fn, opts) => {\n\topts = Object.assign({\n\t\tcacheKey: defaultCacheKey,\n\t\tcache: new Map()\n\t}, opts);\n\n\tconst memoized = function () {\n\t\tconst cache = cacheStore.get(memoized);\n\t\tconst key = opts.cacheKey.apply(null, arguments);\n\n\t\tif (cache.has(key)) {\n\t\t\tconst c = cache.get(key);\n\n\t\t\tif (typeof opts.maxAge !== 'number' || Date.now() < c.maxAge) {\n\t\t\t\treturn c.data;\n\t\t\t}\n\t\t}\n\n\t\tconst ret = fn.apply(null, arguments);\n\n\t\tcache.set(key, {\n\t\t\tdata: ret,\n\t\t\tmaxAge: Date.now() + (opts.maxAge || 0)\n\t\t});\n\n\t\treturn ret;\n\t};\n\n\tmimicFn(memoized, fn);\n\n\tcacheStore.set(memoized, opts.cache);\n\n\treturn memoized;\n};\n\nmodule.exports.clear = fn => {\n\tconst cache = cacheStore.get(fn);\n\n\tif (cache && typeof cache.clear === 'function') {\n\t\tcache.clear();\n\t}\n};\n"]}