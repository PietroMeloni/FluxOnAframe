{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/yargs/lib/apply-extends.js"],"names":["fs","require","path","YError","previouslyVisitedConfigs","checkForCircularExtends","indexOf","getPathToDefaultConfig","cwd","pathToExtend","resolve","applyExtends","config","defaultConfig","hasOwnProperty","extends","isPath","test","pathToDefault","err","push","JSON","parse","readFileSync","dirname","Object","assign","module","exports"],"mappings":";AACA;;AACA,IAAMA,KAAKC,QAAQ,IAAR,CAAX;AACA,IAAMC,OAAOD,QAAQ,MAAR,CAAb;AACA,IAAME,SAASF,QAAQ,UAAR,CAAf;;AAEA,IAAIG,2BAA2B,EAA/B;;AAEA,SAASC,uBAAT,CAAkCH,IAAlC,EAAwC;AACtC,MAAIE,yBAAyBE,OAAzB,CAAiCJ,IAAjC,IAAyC,CAAC,CAA9C,EAAiD;AAC/C,UAAM,IAAIC,MAAJ,0CAAiDD,IAAjD,SAAN;AACD;AACF;;AAED,SAASK,sBAAT,CAAiCC,GAAjC,EAAsCC,YAAtC,EAAoD;AAClD,SAAOP,KAAKQ,OAAL,CAAaF,GAAb,EAAkBC,YAAlB,CAAP;AACD;;AAED,SAASE,YAAT,CAAuBC,MAAvB,EAA+BJ,GAA/B,EAAoC;AAClC,MAAIK,gBAAgB,EAApB;;AAEA,MAAID,OAAOE,cAAP,CAAsB,SAAtB,CAAJ,EAAsC;AACpC,QAAI,OAAOF,OAAOG,OAAd,KAA0B,QAA9B,EAAwC,OAAOF,aAAP;AACxC,QAAMG,SAAS,UAAUC,IAAV,CAAeL,OAAOG,OAAtB,CAAf;AACA,QAAIG,gBAAgB,IAApB;AACA,QAAI,CAACF,MAAL,EAAa;AACX,UAAI;AACFE,wBAAgBjB,QAAQS,OAAR,CAAgBE,OAAOG,OAAvB,CAAhB;AACD,OAFD,CAEE,OAAOI,GAAP,EAAY;AACZ;AACD;AACF,KAND,MAMO;AACLD,sBAAgBX,uBAAuBC,GAAvB,EAA4BI,OAAOG,OAAnC,CAAhB;AACD;AACD;AACA;AACA,QAAI,CAACG,aAAD,IAAkB,CAACF,MAAvB,EAA+B,OAAOJ,MAAP;;AAE/BP,4BAAwBa,aAAxB;;AAEAd,6BAAyBgB,IAAzB,CAA8BF,aAA9B;;AAEAL,oBAAgBG,SAASK,KAAKC,KAAL,CAAWtB,GAAGuB,YAAH,CAAgBL,aAAhB,EAA+B,MAA/B,CAAX,CAAT,GAA8DjB,QAAQW,OAAOG,OAAf,CAA9E;AACA,WAAOH,OAAOG,OAAd;AACAF,oBAAgBF,aAAaE,aAAb,EAA4BX,KAAKsB,OAAL,CAAaN,aAAb,CAA5B,CAAhB;AACD;;AAEDd,6BAA2B,EAA3B;;AAEA,SAAOqB,OAAOC,MAAP,CAAc,EAAd,EAAkBb,aAAlB,EAAiCD,MAAjC,CAAP;AACD;;AAEDe,OAAOC,OAAP,GAAiBjB,YAAjB","file":"apply-extends.js","sourcesContent":["\n'use strict'\nconst fs = require('fs')\nconst path = require('path')\nconst YError = require('./yerror')\n\nlet previouslyVisitedConfigs = []\n\nfunction checkForCircularExtends (path) {\n  if (previouslyVisitedConfigs.indexOf(path) > -1) {\n    throw new YError(`Circular extended configurations: '${path}'.`)\n  }\n}\n\nfunction getPathToDefaultConfig (cwd, pathToExtend) {\n  return path.resolve(cwd, pathToExtend)\n}\n\nfunction applyExtends (config, cwd) {\n  let defaultConfig = {}\n\n  if (config.hasOwnProperty('extends')) {\n    if (typeof config.extends !== 'string') return defaultConfig\n    const isPath = /\\.json$/.test(config.extends)\n    let pathToDefault = null\n    if (!isPath) {\n      try {\n        pathToDefault = require.resolve(config.extends)\n      } catch (err) {\n        // most likely this simply isn't a module.\n      }\n    } else {\n      pathToDefault = getPathToDefaultConfig(cwd, config.extends)\n    }\n    // maybe the module uses key for some other reason,\n    // err on side of caution.\n    if (!pathToDefault && !isPath) return config\n\n    checkForCircularExtends(pathToDefault)\n\n    previouslyVisitedConfigs.push(pathToDefault)\n\n    defaultConfig = isPath ? JSON.parse(fs.readFileSync(pathToDefault, 'utf8')) : require(config.extends)\n    delete config.extends\n    defaultConfig = applyExtends(defaultConfig, path.dirname(pathToDefault))\n  }\n\n  previouslyVisitedConfigs = []\n\n  return Object.assign({}, defaultConfig, config)\n}\n\nmodule.exports = applyExtends\n"]}