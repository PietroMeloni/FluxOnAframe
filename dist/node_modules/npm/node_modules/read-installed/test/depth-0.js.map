{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/read-installed/test/depth-0.js"],"names":["readInstalled","require","test","json","path","known","concat","Object","keys","dependencies","optionalDependencies","devDependencies","sort","t","join","__dirname","depth","er","map","notOk","ok","console","error","stack","message","name","subdeps","reduce","acc","dep","length","equal","end"],"mappings":";;AAAA,IAAIA,gBAAgBC,QAAQ,sBAAR,CAApB;AACA,IAAIC,OAAOD,QAAQ,KAAR,EAAeC,IAA1B;AACA,IAAIC,OAAOF,QAAQ,iBAAR,CAAX;AACA,IAAIG,OAAOH,QAAQ,MAAR,CAAX;AACA,IAAII,QAAQ,GAAGC,MAAH,CAAUC,OAAOC,IAAP,CAAYL,KAAKM,YAAjB,CAAV,EACRF,OAAOC,IAAP,CAAYL,KAAKO,oBAAjB,CADQ,EAERH,OAAOC,IAAP,CAAYL,KAAKQ,eAAjB,CAFQ,EAE2BC,IAF3B,EAAZ;;AAIAV,KAAK,sCAAL,EAA6C,UAAUW,CAAV,EAAa;AACxDb,gBAAcI,KAAKU,IAAL,CAAUC,SAAV,EAAqB,KAArB,CAAd,EAA2C;AACzCC,WAAO;AADkC,GAA3C,EAEG,UAAUC,EAAV,EAAcC,GAAd,EAAmB;AACpBL,MAAEM,KAAF,CAAQF,EAAR,EAAY,mBAAZ;AACAJ,MAAEO,EAAF,CAAKF,GAAL,EAAU,oBAAV;AACA,QAAID,EAAJ,EAAQ,OAAOI,QAAQC,KAAR,CAAcL,GAAGM,KAAH,IAAYN,GAAGO,OAA7B,CAAP;AACR;AACA,WAAON,IAAIT,YAAJ,CAAiBN,KAAKsB,IAAtB,CAAP;AACA,QAAIC,UAAUnB,OAAOC,IAAP,CAAYU,IAAIT,YAAhB,EAA8BkB,MAA9B,CAAqC,UAASC,GAAT,EAAcC,GAAd,EAAmB;AACpE;AACA,aAAOX,IAAIT,YAAJ,CAAiBoB,GAAjB,EAAsBpB,YAAtB,CAAmCoB,GAAnC,CAAP;AACAD,aAAOrB,OAAOC,IAAP,CAAYU,IAAIT,YAAJ,CAAiBoB,GAAjB,EAAsBpB,YAAlC,EAAgDqB,MAAvD;AACA,aAAOF,GAAP;AACD,KALa,EAKX,CALW,CAAd;AAMAf,MAAEkB,KAAF,CAAQL,OAAR,EAAiB,CAAjB,EAAoB,qCAApB;AACAb,MAAEmB,GAAF;AACD,GAhBD;AAiBD,CAlBD","file":"depth-0.js","sourcesContent":["var readInstalled = require(\"../read-installed.js\")\nvar test = require(\"tap\").test\nvar json = require(\"../package.json\")\nvar path = require(\"path\")\nvar known = [].concat(Object.keys(json.dependencies)\n  , Object.keys(json.optionalDependencies)\n  , Object.keys(json.devDependencies)).sort()\n\ntest(\"make sure that it works with depth=0\", function (t) {\n  readInstalled(path.join(__dirname, \"../\"), {\n    depth: 0\n  }, function (er, map) {\n    t.notOk(er, \"er should be bull\")\n    t.ok(map, \"map should be data\")\n    if (er) return console.error(er.stack || er.message)\n    // Exclude self from dependencies when depth = 0\n    delete map.dependencies[json.name]\n    var subdeps = Object.keys(map.dependencies).reduce(function(acc, dep) {\n      // Exclude self from dependencies when depth = current depth\n      delete map.dependencies[dep].dependencies[dep]\n      acc += Object.keys(map.dependencies[dep].dependencies).length;\n      return acc;\n    }, 0);\n    t.equal(subdeps, 0, \"there should be no sub dependencies\")\n    t.end()\n  })\n})\n"]}