{"version":3,"sources":["../../../../../node_modules/npm/node_modules/duplexer3/index.js"],"names":["stream","require","DuplexWrapper","options","writable","readable","Duplex","call","read","Readable","wrap","_writable","_readable","_waiting","self","once","end","on","_read","push","bubbleErrors","err","emit","prototype","Object","create","constructor","value","_write","input","encoding","done","write","buf","reads","module","exports","duplex2"],"mappings":"AAAA;;AAEA,IAAIA,SAASC,QAAQ,QAAR,CAAb;;AAEA,SAASC,aAAT,CAAuBC,OAAvB,EAAgCC,QAAhC,EAA0CC,QAA1C,EAAoD;AAClD,MAAI,OAAOA,QAAP,KAAoB,WAAxB,EAAqC;AACnCA,eAAWD,QAAX;AACAA,eAAWD,OAAX;AACAA,cAAU,IAAV;AACD;;AAEDH,SAAOM,MAAP,CAAcC,IAAd,CAAmB,IAAnB,EAAyBJ,OAAzB;;AAEA,MAAI,OAAOE,SAASG,IAAhB,KAAyB,UAA7B,EAAyC;AACvCH,eAAY,IAAIL,OAAOS,QAAX,CAAoBN,OAApB,CAAD,CAA+BO,IAA/B,CAAoCL,QAApC,CAAX;AACD;;AAED,OAAKM,SAAL,GAAiBP,QAAjB;AACA,OAAKQ,SAAL,GAAiBP,QAAjB;AACA,OAAKQ,QAAL,GAAgB,KAAhB;;AAEA,MAAIC,OAAO,IAAX;;AAEAV,WAASW,IAAT,CAAc,QAAd,EAAwB,YAAW;AACjCD,SAAKE,GAAL;AACD,GAFD;;AAIA,OAAKD,IAAL,CAAU,QAAV,EAAoB,YAAW;AAC7BX,aAASY,GAAT;AACD,GAFD;;AAIAX,WAASY,EAAT,CAAY,UAAZ,EAAwB,YAAW;AACjC,QAAIH,KAAKD,QAAT,EAAmB;AACjBC,WAAKD,QAAL,GAAgB,KAAhB;AACAC,WAAKI,KAAL;AACD;AACF,GALD;;AAOAb,WAASU,IAAT,CAAc,KAAd,EAAqB,YAAW;AAC9BD,SAAKK,IAAL,CAAU,IAAV;AACD,GAFD;;AAIA,MAAI,CAAChB,OAAD,IAAY,OAAOA,QAAQiB,YAAf,KAAgC,WAA5C,IAA2DjB,QAAQiB,YAAvE,EAAqF;AACnFhB,aAASa,EAAT,CAAY,OAAZ,EAAqB,UAASI,GAAT,EAAc;AACjCP,WAAKQ,IAAL,CAAU,OAAV,EAAmBD,GAAnB;AACD,KAFD;;AAIAhB,aAASY,EAAT,CAAY,OAAZ,EAAqB,UAASI,GAAT,EAAc;AACjCP,WAAKQ,IAAL,CAAU,OAAV,EAAmBD,GAAnB;AACD,KAFD;AAGD;AACF;;AAEDnB,cAAcqB,SAAd,GAA0BC,OAAOC,MAAP,CAAczB,OAAOM,MAAP,CAAciB,SAA5B,EAAuC,EAACG,aAAa,EAACC,OAAOzB,aAAR,EAAd,EAAvC,CAA1B;;AAEAA,cAAcqB,SAAd,CAAwBK,MAAxB,GAAiC,SAASA,MAAT,CAAgBC,KAAhB,EAAuBC,QAAvB,EAAiCC,IAAjC,EAAuC;AACtE,OAAKpB,SAAL,CAAeqB,KAAf,CAAqBH,KAArB,EAA4BC,QAA5B,EAAsCC,IAAtC;AACD,CAFD;;AAIA7B,cAAcqB,SAAd,CAAwBL,KAAxB,GAAgC,SAASA,KAAT,GAAiB;AAC/C,MAAIe,GAAJ;AACA,MAAIC,QAAQ,CAAZ;AACA,SAAO,CAACD,MAAM,KAAKrB,SAAL,CAAeJ,IAAf,EAAP,MAAkC,IAAzC,EAA+C;AAC7C,SAAKW,IAAL,CAAUc,GAAV;AACAC;AACD;AACD,MAAIA,UAAU,CAAd,EAAiB;AACf,SAAKrB,QAAL,GAAgB,IAAhB;AACD;AACF,CAVD;;AAYAsB,OAAOC,OAAP,GAAiB,SAASC,OAAT,CAAiBlC,OAAjB,EAA0BC,QAA1B,EAAoCC,QAApC,EAA8C;AAC7D,SAAO,IAAIH,aAAJ,CAAkBC,OAAlB,EAA2BC,QAA3B,EAAqCC,QAArC,CAAP;AACD,CAFD;;AAIA8B,OAAOC,OAAP,CAAelC,aAAf,GAA+BA,aAA/B","file":"index.js","sourcesContent":["\"use strict\";\n\nvar stream = require(\"stream\");\n\nfunction DuplexWrapper(options, writable, readable) {\n  if (typeof readable === \"undefined\") {\n    readable = writable;\n    writable = options;\n    options = null;\n  }\n\n  stream.Duplex.call(this, options);\n\n  if (typeof readable.read !== \"function\") {\n    readable = (new stream.Readable(options)).wrap(readable);\n  }\n\n  this._writable = writable;\n  this._readable = readable;\n  this._waiting = false;\n\n  var self = this;\n\n  writable.once(\"finish\", function() {\n    self.end();\n  });\n\n  this.once(\"finish\", function() {\n    writable.end();\n  });\n\n  readable.on(\"readable\", function() {\n    if (self._waiting) {\n      self._waiting = false;\n      self._read();\n    }\n  });\n\n  readable.once(\"end\", function() {\n    self.push(null);\n  });\n\n  if (!options || typeof options.bubbleErrors === \"undefined\" || options.bubbleErrors) {\n    writable.on(\"error\", function(err) {\n      self.emit(\"error\", err);\n    });\n\n    readable.on(\"error\", function(err) {\n      self.emit(\"error\", err);\n    });\n  }\n}\n\nDuplexWrapper.prototype = Object.create(stream.Duplex.prototype, {constructor: {value: DuplexWrapper}});\n\nDuplexWrapper.prototype._write = function _write(input, encoding, done) {\n  this._writable.write(input, encoding, done);\n};\n\nDuplexWrapper.prototype._read = function _read() {\n  var buf;\n  var reads = 0;\n  while ((buf = this._readable.read()) !== null) {\n    this.push(buf);\n    reads++;\n  }\n  if (reads === 0) {\n    this._waiting = true;\n  }\n};\n\nmodule.exports = function duplex2(options, writable, readable) {\n  return new DuplexWrapper(options, writable, readable);\n};\n\nmodule.exports.DuplexWrapper = DuplexWrapper;\n"]}