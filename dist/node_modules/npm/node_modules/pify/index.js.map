{"version":3,"sources":["../../../../../node_modules/npm/node_modules/pify/index.js"],"names":["processFn","fn","opts","P","promiseModule","args","Array","arguments","length","i","resolve","reject","errorFirst","push","err","result","multiArgs","results","unshift","apply","module","exports","obj","Object","assign","exclude","Promise","filter","match","pattern","key","test","include","some","ret","excludeMain","create","getPrototypeOf","x"],"mappings":"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","file":"index.js","sourcesContent":["'use strict';\n\nconst processFn = (fn, opts) => function () {\n\tconst P = opts.promiseModule;\n\tconst args = new Array(arguments.length);\n\n\tfor (let i = 0; i < arguments.length; i++) {\n\t\targs[i] = arguments[i];\n\t}\n\n\treturn new P((resolve, reject) => {\n\t\tif (opts.errorFirst) {\n\t\t\targs.push(function (err, result) {\n\t\t\t\tif (opts.multiArgs) {\n\t\t\t\t\tconst results = new Array(arguments.length - 1);\n\n\t\t\t\t\tfor (let i = 1; i < arguments.length; i++) {\n\t\t\t\t\t\tresults[i - 1] = arguments[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tresults.unshift(err);\n\t\t\t\t\t\treject(results);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(results);\n\t\t\t\t\t}\n\t\t\t\t} else if (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\targs.push(function (result) {\n\t\t\t\tif (opts.multiArgs) {\n\t\t\t\t\tconst results = new Array(arguments.length - 1);\n\n\t\t\t\t\tfor (let i = 0; i < arguments.length; i++) {\n\t\t\t\t\t\tresults[i] = arguments[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(results);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(result);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfn.apply(this, args);\n\t});\n};\n\nmodule.exports = (obj, opts) => {\n\topts = Object.assign({\n\t\texclude: [/.+(Sync|Stream)$/],\n\t\terrorFirst: true,\n\t\tpromiseModule: Promise\n\t}, opts);\n\n\tconst filter = key => {\n\t\tconst match = pattern => typeof pattern === 'string' ? key === pattern : pattern.test(key);\n\t\treturn opts.include ? opts.include.some(match) : !opts.exclude.some(match);\n\t};\n\n\tlet ret;\n\tif (typeof obj === 'function') {\n\t\tret = function () {\n\t\t\tif (opts.excludeMain) {\n\t\t\t\treturn obj.apply(this, arguments);\n\t\t\t}\n\n\t\t\treturn processFn(obj, opts).apply(this, arguments);\n\t\t};\n\t} else {\n\t\tret = Object.create(Object.getPrototypeOf(obj));\n\t}\n\n\tfor (const key in obj) { // eslint-disable-line guard-for-in\n\t\tconst x = obj[key];\n\t\tret[key] = typeof x === 'function' && filter(key) ? processFn(x, opts) : x;\n\t}\n\n\treturn ret;\n};\n"]}