{"version":3,"sources":["../../../../../node_modules/npm/node_modules/stream-iterate/test.js"],"names":["tape","require","from","iterate","t","a","obj","b","output","readA","readB","loop","err","dataA","nextA","dataB","nextB","same","end","push","read","destroy","Error","ok","message"],"mappings":";;AAAA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;AACA,IAAIC,OAAOD,QAAQ,OAAR,CAAX;AACA,IAAIE,UAAUF,QAAQ,IAAR,CAAd;;AAEAD,KAAK,YAAL,EAAmB,UAAUI,CAAV,EAAa;AAC9B,MAAIC,IAAIH,KAAKI,GAAL,CAAS,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,CAAT,CAAR;AACA,MAAIC,IAAIL,KAAKI,GAAL,CAAS,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAT,CAAR;AACA,MAAIE,SAAS,EAAb;;AAEA,MAAIC,QAAQN,QAAQE,CAAR,CAAZ;AACA,MAAIK,QAAQP,QAAQI,CAAR,CAAZ;;AAEA,MAAII,OAAO,SAAPA,IAAO,GAAY;AACrBF,UAAM,UAAUG,GAAV,EAAeC,KAAf,EAAsBC,KAAtB,EAA6B;AACjC,UAAIF,GAAJ,EAAS,MAAMA,GAAN;AACTF,YAAM,UAAUE,GAAV,EAAeG,KAAf,EAAsBC,KAAtB,EAA6B;AACjC,YAAIJ,GAAJ,EAAS,MAAMA,GAAN;;AAET,YAAI,CAACC,KAAD,IAAU,CAACE,KAAf,EAAsB;AACpBX,YAAEa,IAAF,CAAOT,MAAP,EAAe,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,CAAf,EAA8D,YAA9D;AACAJ,YAAEc,GAAF;AACA;AACD;;AAED,YAAI,CAACH,KAAD,IAAUF,QAAQE,KAAtB,EAA6B;AAC3BP,iBAAOW,IAAP,CAAYN,KAAZ;AACAC;AACA,iBAAOH,MAAP;AACD;;AAED,YAAI,CAACE,KAAD,IAAUA,QAAQE,KAAtB,EAA6B;AAC3BP,iBAAOW,IAAP,CAAYJ,KAAZ;AACAC;AACA,iBAAOL,MAAP;AACD;;AAEDH,eAAOW,IAAP,CAAYN,KAAZ;AACAL,eAAOW,IAAP,CAAYJ,KAAZ;AACAD;AACAE;AACAL;AACD,OA1BD;AA2BD,KA7BD;AA8BD,GA/BD;;AAiCAA;AACD,CA1CD;;AA4CAX,KAAK,gBAAL,EAAuB,UAAUI,CAAV,EAAa;AAClC,MAAIC,IAAIH,KAAKI,GAAL,CAAS,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,CAAT,CAAR;AACA,MAAIc,OAAOjB,QAAQE,CAAR,CAAX;;AAEAA,IAAEgB,OAAF,CAAU,IAAIC,KAAJ,CAAU,OAAV,CAAV;;AAEAF,OAAK,UAAUR,GAAV,EAAe;AAClBR,MAAEmB,EAAF,CAAKX,GAAL,EAAU,WAAV;AACAR,MAAEa,IAAF,CAAOL,IAAIY,OAAX,EAAoB,OAApB;AACApB,MAAEc,GAAF;AACD,GAJD;AAKD,CAXD","file":"test.js","sourcesContent":["var tape = require('tape')\nvar from = require('from2')\nvar iterate = require('./')\n\ntape('merge sort', function (t) {\n  var a = from.obj(['a', 'b', 'd', 'e', 'g', 'h'])\n  var b = from.obj(['b', 'c', 'f'])\n  var output = []\n\n  var readA = iterate(a)\n  var readB = iterate(b)\n\n  var loop = function () {\n    readA(function (err, dataA, nextA) {\n      if (err) throw err\n      readB(function (err, dataB, nextB) {\n        if (err) throw err\n\n        if (!dataA && !dataB) {\n          t.same(output, ['a', 'b', 'b', 'c', 'd', 'e', 'f', 'g', 'h'], 'sorts list')\n          t.end()\n          return\n        }\n\n        if (!dataB || dataA < dataB) {\n          output.push(dataA)\n          nextA()\n          return loop()\n        }\n\n        if (!dataA || dataA > dataB) {\n          output.push(dataB)\n          nextB()\n          return loop()\n        }\n\n        output.push(dataA)\n        output.push(dataB)\n        nextA()\n        nextB()\n        loop()\n      })\n    })\n  }\n\n  loop()\n})\n\ntape('error handling', function (t) {\n  var a = from.obj(['a', 'b', 'd', 'e', 'g', 'h'])\n  var read = iterate(a)\n\n  a.destroy(new Error('oh no'))\n\n  read(function (err) {\n    t.ok(err, 'had error')\n    t.same(err.message, 'oh no')\n    t.end()\n  })\n})\n"]}