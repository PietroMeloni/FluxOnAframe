{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/JSONStream/test/error_contents.js"],"names":["fs","require","join","file","__dirname","JSONStream","it","expected","JSON","parse","readFileSync","parser","called","headerCalled","footerCalled","ended","parsed","createReadStream","pipe","on","data","deepEqual","error","message","push","process","equal","console"],"mappings":";;AAEA,IAAIA,KAAKC,QAAS,IAAT,CAAT;AAAA,IACIC,OAAOD,QAAQ,MAAR,EAAgBC,IAD3B;AAAA,IAEIC,OAAOD,KAAKE,SAAL,EAAgB,UAAhB,EAA2B,YAA3B,CAFX;AAAA,IAGIC,aAAaJ,QAAQ,KAAR,CAHjB;AAAA,IAIIK,KAAKL,QAAQ,OAAR,CAJT;;AAMA,IAAIM,WAAWC,KAAKC,KAAL,CAAWT,GAAGU,YAAH,CAAgBP,IAAhB,CAAX,CAAf;AAAA,IACIQ,SAASN,WAAWI,KAAX,CAAiB,CAAC,MAAD,CAAjB,CADb;AAAA,IAEIG,SAAS,CAFb;AAAA,IAGIC,eAAe,CAHnB;AAAA,IAIIC,eAAe,CAJnB;AAAA,IAKIC,QAAQ,KALZ;AAAA,IAMIC,SAAS,EANb;;AAQAhB,GAAGiB,gBAAH,CAAoBd,IAApB,EAA0Be,IAA1B,CAA+BP,MAA/B;;AAEAA,OAAOQ,EAAP,CAAU,QAAV,EAAoB,UAAUC,IAAV,EAAgB;AAClCP;AACAP,KAAGc,IAAH,EAASC,SAAT,CAAmB;AACjBC,WAAO,YADU;AAEjBC,aAAS;AAFQ,GAAnB;AAID,CAND;;AAQAZ,OAAOQ,EAAP,CAAU,QAAV,EAAoB,UAAUC,IAAV,EAAgB;AAClCN;AACD,CAFD;;AAIAH,OAAOQ,EAAP,CAAU,MAAV,EAAkB,UAAUC,IAAV,EAAgB;AAChCR;AACAI,SAAOQ,IAAP,CAAYJ,IAAZ;AACD,CAHD;;AAKAT,OAAOQ,EAAP,CAAU,KAAV,EAAiB,YAAY;AAC3BJ,UAAQ,IAAR;AACD,CAFD;;AAIAU,QAAQN,EAAR,CAAW,MAAX,EAAmB,YAAY;AAC7Bb,KAAGM,MAAH,EAAWc,KAAX,CAAiB,CAAjB;AACApB,KAAGO,YAAH,EAAiBa,KAAjB,CAAuB,CAAvB;AACApB,KAAGQ,YAAH,EAAiBY,KAAjB,CAAuB,CAAvB;AACAC,UAAQL,KAAR,CAAc,QAAd;AACD,CALD","file":"error_contents.js","sourcesContent":["\n\nvar fs = require ('fs')\n  , join = require('path').join\n  , file = join(__dirname, 'fixtures','error.json')\n  , JSONStream = require('../')\n  , it = require('it-is')\n\nvar expected = JSON.parse(fs.readFileSync(file))\n  , parser = JSONStream.parse(['rows'])\n  , called = 0\n  , headerCalled = 0\n  , footerCalled = 0\n  , ended = false\n  , parsed = []\n\nfs.createReadStream(file).pipe(parser)\n\nparser.on('header', function (data) {\n  headerCalled ++\n  it(data).deepEqual({\n    error: 'error_code',\n    message: 'this is an error message'\n  })\n})\n\nparser.on('footer', function (data) {\n  footerCalled ++\n})\n\nparser.on('data', function (data) {\n  called ++\n  parsed.push(data)\n})\n\nparser.on('end', function () {\n  ended = true\n})\n\nprocess.on('exit', function () {\n  it(called).equal(0)\n  it(headerCalled).equal(1)\n  it(footerCalled).equal(0)\n  console.error('PASSED')\n})\n"]}