{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/JSONStream/test/fn.js"],"names":["fs","require","join","file","__dirname","JSONStream","it","fn","s","isNaN","parseInt","expected","JSON","parse","readFileSync","parser","called","ended","parsed","createReadStream","pipe","on","data","has","id","typeof","value","rev","key","push","process","equal","rows","length","deepEqual","console","error"],"mappings":";;AAEA,IAAIA,KAAKC,QAAS,IAAT,CAAT;AAAA,IACIC,OAAOD,QAAQ,MAAR,EAAgBC,IAD3B;AAAA,IAEIC,OAAOD,KAAKE,SAAL,EAAgB,UAAhB,EAA2B,cAA3B,CAFX;AAAA,IAGIC,aAAaJ,QAAQ,KAAR,CAHjB;AAAA,IAIIK,KAAKL,QAAQ,OAAR,CAJT;;AAMA,SAASM,EAAT,CAAaC,CAAb,EAAgB;AACd,SAAO,CAACC,MAAMC,SAASF,CAAT,EAAY,EAAZ,CAAN,CAAR;AACD;;AAED,IAAIG,WAAWC,KAAKC,KAAL,CAAWb,GAAGc,YAAH,CAAgBX,IAAhB,CAAX,CAAf;AAAA,IACIY,SAASV,WAAWQ,KAAX,CAAiB,CAAC,MAAD,EAASN,EAAT,CAAjB,CADb;AAAA,IAEIS,SAAS,CAFb;AAAA,IAGIC,QAAQ,KAHZ;AAAA,IAIIC,SAAS,EAJb;;AAMAlB,GAAGmB,gBAAH,CAAoBhB,IAApB,EAA0BiB,IAA1B,CAA+BL,MAA/B;;AAEAA,OAAOM,EAAP,CAAU,MAAV,EAAkB,UAAUC,IAAV,EAAgB;AAChCN;AACAV,KAAGiB,GAAH,CAAO;AACLC,QAAIlB,GAAGmB,MAAH,CAAU,QAAV,CADC;AAELC,WAAO,EAACC,KAAKrB,GAAGmB,MAAH,CAAU,QAAV,CAAN,EAFF;AAGLG,SAAItB,GAAGmB,MAAH,CAAU,QAAV;AAHC,GAAP;AAKAP,SAAOW,IAAP,CAAYP,IAAZ;AACD,CARD;;AAUAP,OAAOM,EAAP,CAAU,KAAV,EAAiB,YAAY;AAC3BJ,UAAQ,IAAR;AACD,CAFD;;AAIAa,QAAQT,EAAR,CAAW,MAAX,EAAmB,YAAY;AAC7Bf,KAAGU,MAAH,EAAWe,KAAX,CAAiBpB,SAASqB,IAAT,CAAcC,MAA/B;AACA3B,KAAGY,MAAH,EAAWgB,SAAX,CAAqBvB,SAASqB,IAA9B;AACAG,UAAQC,KAAR,CAAc,QAAd;AACD,CAJD","file":"fn.js","sourcesContent":["\n\nvar fs = require ('fs')\n  , join = require('path').join\n  , file = join(__dirname, 'fixtures','all_npm.json')\n  , JSONStream = require('../')\n  , it = require('it-is')\n\nfunction fn (s) {\n  return !isNaN(parseInt(s, 10))\n}\n\nvar expected = JSON.parse(fs.readFileSync(file))\n  , parser = JSONStream.parse(['rows', fn])\n  , called = 0\n  , ended = false\n  , parsed = []\n\nfs.createReadStream(file).pipe(parser)\n  \nparser.on('data', function (data) {\n  called ++\n  it.has({\n    id: it.typeof('string'),\n    value: {rev: it.typeof('string')},\n    key:it.typeof('string')\n  })\n  parsed.push(data)\n})\n\nparser.on('end', function () {\n  ended = true\n})\n\nprocess.on('exit', function () {\n  it(called).equal(expected.rows.length)\n  it(parsed).deepEqual(expected.rows)\n  console.error('PASSED')\n})\n"]}