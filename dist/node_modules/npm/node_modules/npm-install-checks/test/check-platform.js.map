{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/npm-install-checks/test/check-platform.js"],"names":["test","require","c","checkPlatform","t","target","cpu","os","err","ok","equal","code","end","notOk","process","platform"],"mappings":"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","file":"check-platform.js","sourcesContent":["var test = require('tap').test\nvar c = require('../index.js').checkPlatform\n\ntest('target cpu wrong', function (t) {\n  var target = {}\n  target.cpu = 'enten-cpu'\n  target.os = 'any'\n  c(target, false, function (err) {\n    t.ok(err, 'error present')\n    t.equal(err.code, 'EBADPLATFORM')\n    t.end()\n  })\n})\n\ntest('os wrong', function (t) {\n  var target = {}\n  target.cpu = 'any'\n  target.os = 'enten-os'\n  c(target, false, function (err) {\n    t.ok(err, 'error present')\n    t.equal(err.code, 'EBADPLATFORM')\n    t.end()\n  })\n})\n\ntest('nothing wrong', function (t) {\n  var target = {}\n  target.cpu = 'any'\n  target.os = 'any'\n  c(target, false, function (err) {\n    t.notOk(err, 'no error present')\n    t.end()\n  })\n})\n\ntest('force', function (t) {\n  var target = {}\n  target.cpu = 'enten-cpu'\n  target.os = 'any'\n  c(target, true, function (err) {\n    t.notOk(err, 'no error present')\n    t.end()\n  })\n})\n\ntest('no opinions', function (t) {\n  var target = {}\n  c(target, false, function (err) {\n    t.notOk(err, 'no error present')\n    t.end()\n  })\n})\n\ntest('only target cpu wrong', function (t) {\n  var target = {}\n  target.cpu = 'enten-cpu'\n  c(target, false, function (err) {\n    t.ok(err, 'error present')\n    t.equal(err.code, 'EBADPLATFORM')\n    t.end()\n  })\n})\n\ntest('only os wrong', function (t) {\n  var target = {}\n  target.os = 'enten-os'\n  c(target, false, function (err) {\n    t.ok(err, 'error present')\n    t.equal(err.code, 'EBADPLATFORM')\n    t.end()\n  })\n})\n\ntest('everything wrong w/arrays', function (t) {\n  var target = {}\n  target.cpu = ['enten-cpu']\n  target.os = ['enten-os']\n  c(target, false, function (err) {\n    t.ok(err, 'error present')\n    t.equal(err.code, 'EBADPLATFORM')\n    t.end()\n  })\n})\n\ntest('os wrong (negation)', function (t) {\n  var target = {}\n  target.cpu = 'any'\n  target.os = '!' + process.platform\n  c(target, false, function (err) {\n    t.ok(err, 'error present')\n    t.equal(err.code, 'EBADPLATFORM')\n    t.end()\n  })\n})\n\ntest('nothing wrong (negation)', function (t) {\n  var target = {}\n  target.cpu = '!enten-cpu'\n  target.os = '!enten-os'\n  c(target, false, function (err) {\n    t.notOk(err, 'no error present')\n    t.end()\n  })\n})\n"]}