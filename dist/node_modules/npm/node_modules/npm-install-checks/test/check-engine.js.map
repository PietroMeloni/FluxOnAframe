{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/npm-install-checks/test/check-engine.js"],"names":["test","require","c","checkEngine","t","engines","err","notOk","end","target","node","ok","equals","required","npm","engineStrict","warn","_id","is","undefined"],"mappings":"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","file":"check-engine.js","sourcesContent":["var test = require('tap').test\nvar c = require('../index.js').checkEngine\n\ntest('no engine defined', function (t) {\n  c({ engines: {} }, '1.1.2', '0.2.1', false, true, function (err) {\n    t.notOk(err, 'no error present')\n    t.end()\n  })\n})\n\ntest('node version too old', function (t) {\n  var target = { engines: { node: '0.10.24' } }\n  c(target, '1.1.2', '0.10.18', false, true, function (err) {\n    t.ok(err, 'returns an error')\n    t.equals(err.required.node, '0.10.24')\n    t.end()\n  })\n})\n\ntest('npm version too old', function (t) {\n  var target = { engines: { npm: '^1.4.6' } }\n  c(target, '1.3.2', '0.2.1', false, true, function (err) {\n    t.ok(err, 'returns an error')\n    t.equals(err.required.npm, '^1.4.6')\n    t.end()\n  })\n})\n\ntest('strict=false w/engineStrict json does not return an error', function (t) {\n  var target = { engines: { npm: '1.3.6' }, engineStrict: true }\n  c(target, '1.4.2', '0.2.1', false, false, function (err, warn) {\n    t.notOk(err, 'returns no error')\n    t.ok(warn, 'returns warning object')\n    t.equals(warn.required.npm, '1.3.6')\n    t.end()\n  })\n})\n\ntest('force node version too old', function (t) {\n  var target = { _id: 'test@1.0.0', engines: { node: '0.1.0' } }\n  c(target, '1.3.2', '0.2.1', true, true, function (err, warn) {\n    t.is(err, undefined, 'returns no error')\n    t.notOk(warn, 'returns no warning')\n    t.end()\n  })\n})\n\ntest('force npm version too old', function (t) {\n  var target = { _id: 'test@1.0.0', engines: { npm: '^1.4.6' } }\n  c(target, '1.3.2', '0.2.1', true, true, function (err, warn) {\n    t.ok(err, \"can't force an npm version mismatch\")\n    t.end()\n  })\n})\n\ntest('no engine', function (t) {\n  c({}, '1.3.2', '0.2.1', false, true, function (err, warn) {\n    t.notOk(err, 'returns no error')\n    t.notOk(warn, 'returns no warning')\n    t.end()\n  })\n})\n"]}