{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/node-gyp/test/test-install.js"],"names":["test","require","install","t","plan","fs","stat","path","cb","err","Error","code","ok","gyp","devDir","__dirname","opts","ensure","commands","argv","remove","message"],"mappings":"AAAA;;AAEA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;AACA,IAAIC,UAAUD,QAAQ,gBAAR,EAA0BD,IAA1B,CAA+BE,OAA7C;;AAEAF,KAAK,mBAAL,EAA0B,UAAUG,CAAV,EAAa;AACrCA,IAAEC,IAAF,CAAO,CAAP;;AAEA,MAAIC,KAAK,EAAT;AACAA,KAAGC,IAAH,GAAU,UAAUC,IAAV,EAAgBC,EAAhB,EAAoB;AAC5B,QAAIC,MAAM,IAAIC,KAAJ,EAAV;AACAD,QAAIE,IAAJ,GAAW,QAAX;AACAH,OAAGC,GAAH;AACAN,MAAES,EAAF,CAAK,IAAL;AACD,GALD;;AAQA,MAAIC,MAAM,EAAV;AACAA,MAAIC,MAAJ,GAAaC,SAAb;AACAF,MAAIG,IAAJ,GAAW,EAAX;AACAH,MAAIG,IAAJ,CAASC,MAAT,GAAkB,IAAlB;AACAJ,MAAIK,QAAJ,GAAe,EAAf;AACAL,MAAIK,QAAJ,CAAahB,OAAb,GAAuB,UAAUiB,IAAV,EAAgBX,EAAhB,EAAoB;AACzCN,YAAQG,EAAR,EAAYQ,GAAZ,EAAiBM,IAAjB,EAAuBX,EAAvB;AACD,GAFD;AAGAK,MAAIK,QAAJ,CAAaE,MAAb,GAAsB,UAAUD,IAAV,EAAgBX,EAAhB,EAAoB;AACxCA;AACD,GAFD;;AAIAK,MAAIK,QAAJ,CAAahB,OAAb,CAAqB,EAArB,EAAyB,UAAUO,GAAV,EAAe;AACtCN,MAAES,EAAF,CAAK,IAAL;AACA,QAAI,6CAA6CZ,IAA7C,CAAkDS,IAAIY,OAAtD,CAAJ,EAAoE;AAClElB,QAAES,EAAF,CAAK,IAAL;AACAT,QAAES,EAAF,CAAK,IAAL;AACD;AACF,GAND;AAOD,CA/BD","file":"test-install.js","sourcesContent":["'use strict'\n\nvar test = require('tape')\nvar install = require('../lib/install').test.install\n\ntest('EACCES retry once', function (t) {\n  t.plan(3)\n\n  var fs = {}\n  fs.stat = function (path, cb) {\n    var err = new Error()\n    err.code = 'EACCES'\n    cb(err)\n    t.ok(true);\n  }\n\n\n  var gyp = {}\n  gyp.devDir = __dirname\n  gyp.opts = {}\n  gyp.opts.ensure = true\n  gyp.commands = {}\n  gyp.commands.install = function (argv, cb) {\n    install(fs, gyp, argv, cb)\n  }\n  gyp.commands.remove = function (argv, cb) {\n    cb()\n  }\n\n  gyp.commands.install([], function (err) {\n    t.ok(true)\n    if (/\"pre\" versions of node cannot be installed/.test(err.message)) {\n      t.ok(true)\n      t.ok(true)\n    }\n  })\n})\n"]}