{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/node-gyp/test/test-options.js"],"names":["test","require","gyp","t","plan","Object","keys","process","env","filter","key","forEach","npm_config_","npm_config_x","npm_config_loglevel","g","parseArgv","deepEqual","opts","sort"],"mappings":"AAAA;;AAEA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;AACA,IAAIC,MAAMD,QAAQ,iBAAR,CAAV;;AAEAD,KAAK,wBAAL,EAA+B,UAAUG,CAAV,EAAa;AAC1CA,IAAEC,IAAF,CAAO,CAAP;;AAEA;AACAC,SAAOC,IAAP,CAAYC,QAAQC,GAApB,EACOC,MADP,CACc,UAASC,GAAT,EAAc;AAAE,WAAO,gBAAeV,IAAf,CAAoBU,GAApB;AAAP;AAAiC,GAD/D,EAEOC,OAFP,CAEe,UAASD,GAAT,EAAc;AAAE,WAAOH,QAAQC,GAAR,CAAYE,GAAZ,CAAP;AAAyB,GAFxD;;AAIA;AACAH,UAAQC,GAAR,CAAYI,WAAZ,GAA0B,IAA1B;AACA;AACAL,UAAQC,GAAR,CAAYK,YAAZ,GAA2B,IAA3B;AACA;AACAN,UAAQC,GAAR,CAAYM,mBAAZ,GAAkC,OAAlC;;AAEA,MAAIC,IAAIb,KAAR;AACAa,IAAEC,SAAF,CAAY,CAAC,SAAD,CAAZ,EAhB0C,CAgBhB;;AAE1Bb,IAAEc,SAAF,CAAYZ,OAAOC,IAAP,CAAYS,EAAEG,IAAd,EAAoBC,IAApB,EAAZ,EAAwC,CAAC,MAAD,EAAS,GAAT,CAAxC;AACD,CAnBD","file":"test-options.js","sourcesContent":["'use strict';\n\nvar test = require('tape')\nvar gyp = require('../lib/node-gyp')\n\ntest('options in environment', function (t) {\n  t.plan(1)\n\n  // `npm test` dumps a ton of npm_config_* variables in the environment.\n  Object.keys(process.env)\n        .filter(function(key) { return /^npm_config_/.test(key) })\n        .forEach(function(key) { delete process.env[key] })\n\n  // Zero-length keys should get filtered out.\n  process.env.npm_config_ = '42'\n  // Other keys should get added.\n  process.env.npm_config_x = '42'\n  // Except loglevel.\n  process.env.npm_config_loglevel = 'debug'\n\n  var g = gyp();\n  g.parseArgv(['rebuild'])  // Also sets opts.argv.\n\n  t.deepEqual(Object.keys(g.opts).sort(), ['argv', 'x'])\n})\n"]}