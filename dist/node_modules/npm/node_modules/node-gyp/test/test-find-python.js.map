{"version":3,"sources":["../../../../../../node_modules/npm/node_modules/node-gyp/test/test-find-python.js"],"names":["test","require","path","configure","execFile","PythonFinder","t","plan","findPython","err","found","strictEqual","proc","stdout","stderr","ok","setEncoding","poison","object","property","fail","Error","descriptor","configurable","enumerable","writable","getter","setter","Object","defineProperty","resolve","win32","rstrip","s","replace","slice","call","arguments","map","join","TestPythonFinder","apply","prototype","create","f","done","which","program","cb","args","opts","checkPython","python","win","env","notEqual","indexOf","checkedPythonLauncher","re","stat","SystemDrive","code"],"mappings":"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","file":"test-find-python.js","sourcesContent":["'use strict'\n\nvar test = require('tape')\nvar path = require('path')\nvar configure = require('../lib/configure')\nvar execFile = require('child_process').execFile\nvar PythonFinder = configure.test.PythonFinder\n\ntest('find python', function (t) {\n  t.plan(4)\n\n  configure.test.findPython('python', function (err, found) {\n    t.strictEqual(err, null)\n    var proc = execFile(found, ['-V'], function (err, stdout, stderr) {\n      t.strictEqual(err, null)\n      t.strictEqual(stdout, '')\n      t.ok(/Python 2/.test(stderr))\n    })\n    proc.stdout.setEncoding('utf-8')\n    proc.stderr.setEncoding('utf-8')\n  })\n})\n\nfunction poison(object, property) {\n  function fail() {\n    throw new Error('Property ' + property + ' should not have been accessed.')\n  }\n  var descriptor = {\n    configurable: true,\n    enumerable: false,\n    writable: true,\n    getter: fail,\n    setter: fail,\n  }\n  Object.defineProperty(object, property, descriptor)\n}\n\n// Work around a v0.10.x CI issue where path.resolve() on UNIX systems prefixes\n// Windows paths with the current working directory.  v0.12 and up are free of\n// this issue because they use path.win32.resolve() which does the right thing.\nvar resolve = path.win32 && path.win32.resolve || function() {\n  function rstrip(s) { return s.replace(/\\\\+$/, '') }\n  return [].slice.call(arguments).map(rstrip).join('\\\\')\n}\n\nfunction TestPythonFinder() { PythonFinder.apply(this, arguments) }\nTestPythonFinder.prototype = Object.create(PythonFinder.prototype)\npoison(TestPythonFinder.prototype, 'env')\npoison(TestPythonFinder.prototype, 'execFile')\npoison(TestPythonFinder.prototype, 'resolve')\npoison(TestPythonFinder.prototype, 'stat')\npoison(TestPythonFinder.prototype, 'which')\npoison(TestPythonFinder.prototype, 'win')\n\ntest('find python - python', function (t) {\n  t.plan(5)\n\n  var f = new TestPythonFinder('python', done)\n  f.which = function(program, cb) {\n    t.strictEqual(program, 'python')\n    cb(null, program)\n  }\n  f.execFile = function(program, args, opts, cb) {\n    t.strictEqual(program, 'python')\n    t.ok(/import platform/.test(args[1]))\n    cb(null, '2.7.0')\n  }\n  f.checkPython()\n\n  function done(err, python) {\n    t.strictEqual(err, null)\n    t.strictEqual(python, 'python')\n  }\n})\n\ntest('find python - python too old', function (t) {\n  t.plan(4)\n\n  var f = new TestPythonFinder('python', done)\n  f.which = function(program, cb) {\n    t.strictEqual(program, 'python')\n    cb(null, program)\n  }\n  f.execFile = function(program, args, opts, cb) {\n    t.strictEqual(program, 'python')\n    t.ok(/import platform/.test(args[1]))\n    cb(null, '2.3.4')\n  }\n  f.checkPython()\n\n  function done(err, python) {\n    t.ok(/is not supported by gyp/.test(err))\n  }\n})\n\ntest('find python - python too new', function (t) {\n  t.plan(4)\n\n  var f = new TestPythonFinder('python', done)\n  f.which = function(program, cb) {\n    t.strictEqual(program, 'python')\n    cb(null, program)\n  }\n  f.execFile = function(program, args, opts, cb) {\n    t.strictEqual(program, 'python')\n    t.ok(/import platform/.test(args[1]))\n    cb(null, '3.0.0')\n  }\n  f.checkPython()\n\n  function done(err, python) {\n    t.ok(/is not supported by gyp/.test(err))\n  }\n})\n\ntest('find python - no python', function (t) {\n  t.plan(2)\n\n  var f = new TestPythonFinder('python', done)\n  f.which = function(program, cb) {\n    t.strictEqual(program, 'python')\n    cb(new Error('not found'))\n  }\n  f.checkPython()\n\n  function done(err, python) {\n    t.ok(/Can't find Python executable/.test(err))\n  }\n})\n\ntest('find python - no python2', function (t) {\n  t.plan(6)\n\n  var f = new TestPythonFinder('python2', done)\n  f.which = function(program, cb) {\n    f.which = function(program, cb) {\n      t.strictEqual(program, 'python')\n      cb(null, program)\n    }\n    t.strictEqual(program, 'python2')\n    cb(new Error('not found'))\n  }\n  f.execFile = function(program, args, opts, cb) {\n    t.strictEqual(program, 'python')\n    t.ok(/import platform/.test(args[1]))\n    cb(null, '2.7.0')\n  }\n  f.checkPython()\n\n  function done(err, python) {\n    t.strictEqual(err, null)\n    t.strictEqual(python, 'python')\n  }\n})\n\ntest('find python - no python2, no python, unix', function (t) {\n  t.plan(3)\n\n  var f = new TestPythonFinder('python2', done)\n  poison(f, 'checkPythonLauncher')\n  f.win = false\n\n  f.which = function(program, cb) {\n    f.which = function(program, cb) {\n      t.strictEqual(program, 'python')\n      cb(new Error('not found'))\n    }\n    t.strictEqual(program, 'python2')\n    cb(new Error('not found'))\n  }\n  f.checkPython()\n\n  function done(err, python) {\n    t.ok(/Can't find Python executable/.test(err))\n  }\n})\n\ntest('find python - no python, use python launcher', function (t) {\n  t.plan(8)\n\n  var f = new TestPythonFinder('python', done)\n  f.env = {}\n  f.win = true\n\n  f.which = function(program, cb) {\n    t.strictEqual(program, 'python')\n    cb(new Error('not found'))\n  }\n  f.execFile = function(program, args, opts, cb) {\n    f.execFile = function(program, args, opts, cb) {\n      t.strictEqual(program, 'Z:\\\\snake.exe')\n      t.ok(/import platform/.test(args[1]))\n      cb(null, '2.7.0')\n    }\n    t.strictEqual(program, 'py.exe')\n    t.notEqual(args.indexOf('-2'), -1)\n    t.notEqual(args.indexOf('-c'), -1)\n    cb(null, 'Z:\\\\snake.exe')\n  }\n  f.checkPython()\n\n  function done(err, python) {\n    t.strictEqual(err, null)\n    t.strictEqual(python, 'Z:\\\\snake.exe')\n  }\n})\n\ntest('find python - python 3, use python launcher', function (t) {\n  t.plan(10)\n\n  var f = new TestPythonFinder('python', done)\n  f.env = {}\n  f.win = true\n\n  f.which = function(program, cb) {\n    t.strictEqual(program, 'python')\n    cb(null, program)\n  }\n  f.execFile = function(program, args, opts, cb) {\n    f.execFile = function(program, args, opts, cb) {\n      f.execFile = function(program, args, opts, cb) {\n        t.strictEqual(program, 'Z:\\\\snake.exe')\n        t.ok(/import platform/.test(args[1]))\n        cb(null, '2.7.0')\n      }\n      t.strictEqual(program, 'py.exe')\n      t.notEqual(args.indexOf('-2'), -1)\n      t.notEqual(args.indexOf('-c'), -1)\n      cb(null, 'Z:\\\\snake.exe')\n    }\n    t.strictEqual(program, 'python')\n    t.ok(/import platform/.test(args[1]))\n    cb(null, '3.0.0')\n  }\n  f.checkPython()\n\n  function done(err, python) {\n    t.strictEqual(err, null)\n    t.strictEqual(python, 'Z:\\\\snake.exe')\n  }\n})\n\ntest('find python - python 3, use python launcher, python 2 too old',\n     function (t) {\n  t.plan(9)\n\n  var f = new TestPythonFinder('python', done)\n  f.checkedPythonLauncher = false\n  f.env = {}\n  f.win = true\n\n  f.which = function(program, cb) {\n    t.strictEqual(program, 'python')\n    cb(null, program)\n  }\n  f.execFile = function(program, args, opts, cb) {\n    f.execFile = function(program, args, opts, cb) {\n      f.execFile = function(program, args, opts, cb) {\n        t.strictEqual(program, 'Z:\\\\snake.exe')\n        t.ok(/import platform/.test(args[1]))\n        cb(null, '2.3.4')\n      }\n      t.strictEqual(program, 'py.exe')\n      t.notEqual(args.indexOf('-2'), -1)\n      t.notEqual(args.indexOf('-c'), -1)\n      cb(null, 'Z:\\\\snake.exe')\n    }\n    t.strictEqual(program, 'python')\n    t.ok(/import platform/.test(args[1]))\n    cb(null, '3.0.0')\n  }\n  f.checkPython()\n\n  function done(err, python) {\n    t.ok(/is not supported by gyp/.test(err))\n  }\n})\n\ntest('find python - no python, no python launcher, good guess', function (t) {\n  t.plan(6)\n\n  var re = /C:[\\\\\\/]Python27[\\\\\\/]python[.]exe/\n  var f = new TestPythonFinder('python', done)\n  f.env = {}\n  f.win = true\n\n  f.which = function(program, cb) {\n    t.strictEqual(program, 'python')\n    cb(new Error('not found'))\n  }\n  f.execFile = function(program, args, opts, cb) {\n    f.execFile = function(program, args, opts, cb) {\n      t.ok(re.test(program))\n      t.ok(/import platform/.test(args[1]))\n      cb(null, '2.7.0')\n    }\n    t.strictEqual(program, 'py.exe')\n    cb(new Error('not found'))\n  }\n  f.resolve = resolve\n  f.stat = function(path, cb) {\n    t.ok(re.test(path))\n    cb(null, {})\n  }\n  f.checkPython()\n\n  function done(err, python) {\n    t.ok(re.test(python))\n  }\n})\n\ntest('find python - no python, no python launcher, bad guess', function (t) {\n  t.plan(4)\n\n  var f = new TestPythonFinder('python', done)\n  f.env = { SystemDrive: 'Z:\\\\' }\n  f.win = true\n\n  f.which = function(program, cb) {\n    t.strictEqual(program, 'python')\n    cb(new Error('not found'))\n  }\n  f.execFile = function(program, args, opts, cb) {\n    t.strictEqual(program, 'py.exe')\n    cb(new Error('not found'))\n  }\n  f.resolve = resolve\n  f.stat = function(path, cb) {\n    t.ok(/Z:[\\\\\\/]Python27[\\\\\\/]python.exe/.test(path))\n    var err = new Error('not found')\n    err.code = 'ENOENT'\n    cb(err)\n  }\n  f.checkPython()\n\n  function done(err, python) {\n    t.ok(/Can't find Python executable/.test(err))\n  }\n})\n"]}