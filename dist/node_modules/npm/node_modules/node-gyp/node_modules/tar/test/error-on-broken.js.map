{"version":3,"sources":["../../../../../../../../node_modules/npm/node_modules/node-gyp/node_modules/tar/test/error-on-broken.js"],"names":["fs","require","path","zlib","tap","tar","file","join","__dirname","target","test","t","sync","pass","end","extract","Extract","inp","createReadStream","pipe","createGunzip","on","er","equal","message","fail"],"mappings":";;AAAA,IAAIA,KAAKC,QAAQ,IAAR,CAAT;AACA,IAAIC,OAAOD,QAAQ,MAAR,CAAX;AACA,IAAIE,OAAOF,QAAQ,MAAR,CAAX;;AAEA,IAAIG,MAAMH,QAAQ,KAAR,CAAV;;AAEA,IAAII,MAAMJ,QAAQ,WAAR,CAAV;;AAEA,IAAIK,OAAOJ,KAAKK,IAAL,CAAUC,SAAV,EAAqB,2BAArB,CAAX;AACA,IAAIC,SAASP,KAAKK,IAAL,CAAUC,SAAV,EAAqB,kBAArB,CAAb;;AAEAJ,IAAIM,IAAJ,CAAS,UAAT,EAAqB,UAAUC,CAAV,EAAa;AAChCV,UAAQ,QAAR,EAAkBW,IAAlB,CAAuBJ,YAAY,mBAAnC;AACAG,IAAEE,IAAF,CAAO,UAAP;AACAF,IAAEG,GAAF;AACD,CAJD;;AAMAV,IAAIM,IAAJ,CAAS,cAAT,EAAyB,UAAUC,CAAV,EAAa;AACpC,MAAII,UAAUV,IAAIW,OAAJ,CAAYP,MAAZ,CAAd;AACA,MAAIQ,MAAMjB,GAAGkB,gBAAH,CAAoBZ,IAApB,CAAV;;AAEAW,MAAIE,IAAJ,CAAShB,KAAKiB,YAAL,EAAT,EAA8BD,IAA9B,CAAmCJ,OAAnC;;AAEAA,UAAQM,EAAR,CAAW,OAAX,EAAoB,UAAUC,EAAV,EAAc;AAChCX,MAAEY,KAAF,CAAQD,GAAGE,OAAX,EAAoB,gBAApB,EAAsC,eAAtC;AACAb,MAAEG,GAAF;AACD,GAHD;;AAKAC,UAAQM,EAAR,CAAW,KAAX,EAAkB,YAAY;AAC5BV,MAAEc,IAAF,CAAO,2CAAP;AACAd,MAAEG,GAAF;AACD,GAHD;AAID,CAfD","file":"error-on-broken.js","sourcesContent":["var fs = require('fs')\nvar path = require('path')\nvar zlib = require('zlib')\n\nvar tap = require('tap')\n\nvar tar = require('../tar.js')\n\nvar file = path.join(__dirname, 'cb-never-called-1.0.1.tgz')\nvar target = path.join(__dirname, 'tmp/extract-test')\n\ntap.test('preclean', function (t) {\n  require('rimraf').sync(__dirname + '/tmp/extract-test')\n  t.pass('cleaned!')\n  t.end()\n})\n\ntap.test('extract test', function (t) {\n  var extract = tar.Extract(target)\n  var inp = fs.createReadStream(file)\n\n  inp.pipe(zlib.createGunzip()).pipe(extract)\n\n  extract.on('error', function (er) {\n    t.equal(er.message, 'unexpected eof', 'error noticed')\n    t.end()\n  })\n\n  extract.on('end', function () {\n    t.fail('shouldn\\'t reach this point due to errors')\n    t.end()\n  })\n})\n"]}