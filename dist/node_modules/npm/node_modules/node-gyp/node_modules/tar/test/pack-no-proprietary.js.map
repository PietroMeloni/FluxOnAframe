{"version":3,"sources":["../../../../../../../../node_modules/npm/node_modules/node-gyp/node_modules/tar/test/pack-no-proprietary.js"],"names":["fs","require","path","symlink","resolve","__dirname","unlinkSync","e","symlinkSync","process","on","tap","tar","pkg","Pack","fstream","Reader","Writer","input","target","uid","getuid","gid","getgid","entries","mode","size","type","linkpath","ustar","ustarver","uname","gname","devmaj","devmin","fill","hard1","hard2","linkSync","test","timeout","t","runTest","alphasort","a","b","toLowerCase","doGH","reader","filter","match","sort","props","noProprietary","pack","writer","entry","ok","pipe","parse","Parse","c","length","equal","write","pass","end","er","fail","ev","wanted","console","error","fields","has"],"mappings":"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","file":"pack-no-proprietary.js","sourcesContent":["// This is exactly like test/pack.js, except that it's excluding\n// any proprietary headers.\n//\n// This loses some information about the filesystem, but creates\n// tarballs that are supported by more versions of tar, especially\n// old non-spec-compliant copies of gnutar.\n\n// the symlink file is excluded from git, because it makes\n// windows freak the hell out.\nvar fs = require(\"fs\")\n  , path = require(\"path\")\n  , symlink = path.resolve(__dirname, \"fixtures/symlink\")\ntry { fs.unlinkSync(symlink) } catch (e) {}\nfs.symlinkSync(\"./hardlink-1\", symlink)\nprocess.on(\"exit\", function () {\n  fs.unlinkSync(symlink)\n})\n\nvar tap = require(\"tap\")\n  , tar = require(\"../tar.js\")\n  , pkg = require(\"../package.json\")\n  , Pack = tar.Pack\n  , fstream = require(\"fstream\")\n  , Reader = fstream.Reader\n  , Writer = fstream.Writer\n  , input = path.resolve(__dirname, \"fixtures/\")\n  , target = path.resolve(__dirname, \"tmp/pack.tar\")\n  , uid = process.getuid ? process.getuid() : 0\n  , gid = process.getgid ? process.getgid() : 0\n\n  , entries =\n\n    // the global header and root fixtures/ dir are going to get\n    // a different date each time, so omit that bit.\n    // Also, dev/ino values differ across machines, so that's not\n    // included.\n    [ [ 'entry',\n      { path: 'fixtures/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'extendedHeader',\n      { path: 'PaxHeader/fixtures/200cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        type: 'x',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' },\n      { path: 'fixtures/200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n        uid: uid,\n        gid: gid,\n        size: 200 } ]\n\n    , [ 'entry',\n      { path: 'fixtures/200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 200,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/a.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 257,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/b.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 512,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/c.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 513,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/cc.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 513,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/dir/',\n        mode: 488,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/dir/sub/',\n        mode: 488,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/foo.js',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 4,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/hardlink-1',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 200,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/hardlink-2',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '1',\n        linkpath: 'fixtures/hardlink-1',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/omega.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 2,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/packtest/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/packtest/omega.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 2,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/packtest/star.4.html',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 54081,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'extendedHeader',\n      { path: 'PaxHeader/fixtures/packtest/Ω.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        type: 'x',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' },\n      { path: 'fixtures/packtest/Ω.txt',\n        uid: uid,\n        gid: gid,\n        size: 2 } ]\n\n    , [ 'entry',\n      { path: 'fixtures/packtest/Ω.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 2,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t/h/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t/h/cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 100,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/symlink',\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '2',\n        linkpath: 'hardlink-1',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'extendedHeader',\n      { path: 'PaxHeader/fixtures/Ω.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        type: 'x',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' },\n      { path: \"fixtures/Ω.txt\"\n      , uid: uid\n      , gid: gid\n      , size: 2 } ]\n\n    , [ 'entry',\n      { path: 'fixtures/Ω.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 2,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n    ]\n\n\n// first, make sure that the hardlinks are actually hardlinks, or this\n// won't work.  Git has a way of replacing them with a copy.\nvar hard1 = path.resolve(__dirname, \"fixtures/hardlink-1\")\n  , hard2 = path.resolve(__dirname, \"fixtures/hardlink-2\")\n  , fs = require(\"fs\")\n\ntry { fs.unlinkSync(hard2) } catch (e) {}\nfs.linkSync(hard1, hard2)\n\ntap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  runTest(t, true)\n})\n\ntap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  runTest(t, false)\n})\n\nfunction alphasort (a, b) {\n  return a === b ? 0\n       : a.toLowerCase() > b.toLowerCase() ? 1\n       : a.toLowerCase() < b.toLowerCase() ? -1\n       : a > b ? 1\n       : -1\n}\n\n\nfunction runTest (t, doGH) {\n  var reader = Reader({ path: input\n                      , filter: function () {\n                          return !this.path.match(/\\.(tar|hex)$/)\n                        }\n                      , sort: alphasort\n                      })\n\n  var props = doGH ? pkg : {}\n  props.noProprietary = true\n  var pack = Pack(props)\n  var writer = Writer(target)\n\n  // global header should be skipped regardless, since it has no content.\n  var entry = 0\n\n  t.ok(reader, \"reader ok\")\n  t.ok(pack, \"pack ok\")\n  t.ok(writer, \"writer ok\")\n\n  pack.pipe(writer)\n\n  var parse = tar.Parse()\n  t.ok(parse, \"parser should be ok\")\n\n  pack.on(\"data\", function (c) {\n    // console.error(\"PACK DATA\")\n    if (c.length !== 512) {\n      // this one is too noisy, only assert if it'll be relevant\n      t.equal(c.length, 512, \"parser should emit data in 512byte blocks\")\n    }\n    parse.write(c)\n  })\n\n  pack.on(\"end\", function () {\n    // console.error(\"PACK END\")\n    t.pass(\"parser ends\")\n    parse.end()\n  })\n\n  pack.on(\"error\", function (er) {\n    t.fail(\"pack error\", er)\n  })\n\n  parse.on(\"error\", function (er) {\n    t.fail(\"parse error\", er)\n  })\n\n  writer.on(\"error\", function (er) {\n    t.fail(\"writer error\", er)\n  })\n\n  reader.on(\"error\", function (er) {\n    t.fail(\"reader error\", er)\n  })\n\n  parse.on(\"*\", function (ev, e) {\n    var wanted = entries[entry++]\n    if (!wanted) {\n      t.fail(\"unexpected event: \"+ev)\n      return\n    }\n    t.equal(ev, wanted[0], \"event type should be \"+wanted[0])\n\n    if (ev !== wanted[0] || e.path !== wanted[1].path) {\n      console.error(\"wanted\", wanted)\n      console.error([ev, e.props])\n      e.on(\"end\", function () {\n        console.error(e.fields)\n        throw \"break\"\n      })\n    }\n\n    t.has(e.props, wanted[1], \"properties \"+wanted[1].path)\n    if (wanted[2]) {\n      e.on(\"end\", function () {\n        if (!e.fields) {\n          t.ok(e.fields, \"should get fields\")\n        } else {\n          t.has(e.fields, wanted[2], \"should get expected fields\")\n        }\n      })\n    }\n  })\n\n  reader.pipe(pack)\n\n  writer.on(\"close\", function () {\n    t.equal(entry, entries.length, \"should get all expected entries\")\n    t.pass(\"it finished\")\n    t.end()\n  })\n\n}\n"]}