{"version":3,"sources":["../../../../../../../../node_modules/npm/node_modules/node-gyp/node_modules/tar/test/pack.js"],"names":["fs","require","path","symlink","resolve","__dirname","unlinkSync","e","symlinkSync","process","on","tap","tar","pkg","Pack","fstream","Reader","Writer","input","target","uid","getuid","gid","getgid","entries","mode","type","linkpath","ustar","ustarver","uname","gname","devmaj","devmin","fill","author","name","description","version","repository","url","main","scripts","test","size","nlink","hard1","hard2","linkSync","timeout","t","runTest","alphasort","a","b","toLowerCase","doGH","doFromBase","reader","filter","match","sort","props","fromBase","pack","writer","entry","ok","pipe","parse","Parse","c","length","equal","write","pass","end","er","fail","ev","wanted","indexOf","replace","console","error","fields","has"],"mappings":"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","file":"pack.js","sourcesContent":["\n// the symlink file is excluded from git, because it makes\n// windows freak the hell out.\nvar fs = require(\"fs\")\n  , path = require(\"path\")\n  , symlink = path.resolve(__dirname, \"fixtures/symlink\")\ntry { fs.unlinkSync(symlink) } catch (e) {}\nfs.symlinkSync(\"./hardlink-1\", symlink)\nprocess.on(\"exit\", function () {\n  fs.unlinkSync(symlink)\n})\n\n\nvar tap = require(\"tap\")\n  , tar = require(\"../tar.js\")\n  , pkg = require(\"../package.json\")\n  , Pack = tar.Pack\n  , fstream = require(\"fstream\")\n  , Reader = fstream.Reader\n  , Writer = fstream.Writer\n  , input = path.resolve(__dirname, \"fixtures/\")\n  , target = path.resolve(__dirname, \"tmp/pack.tar\")\n  , uid = process.getuid ? process.getuid() : 0\n  , gid = process.getgid ? process.getgid() : 0\n\n  , entries =\n\n    // the global header and root fixtures/ dir are going to get\n    // a different date each time, so omit that bit.\n    // Also, dev/ino values differ across machines, so that's not\n    // included.\n    [ [ 'globalExtendedHeader',\n      { path: 'PaxHeader/',\n        mode: 438,\n        uid: 0,\n        gid: 0,\n        type: 'g',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' },\n      { \"NODETAR.author\": pkg.author,\n        \"NODETAR.name\": pkg.name,\n        \"NODETAR.description\": pkg.description,\n        \"NODETAR.version\": pkg.version,\n        \"NODETAR.repository.type\": pkg.repository.type,\n        \"NODETAR.repository.url\": pkg.repository.url,\n        \"NODETAR.main\": pkg.main,\n        \"NODETAR.scripts.test\": pkg.scripts.test } ]\n\n    , [ 'entry',\n      { path: 'fixtures/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'extendedHeader',\n      { path: 'PaxHeader/fixtures/200cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        type: 'x',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' },\n      { path: 'fixtures/200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n        'NODETAR.depth': '1',\n        'NODETAR.type': 'File',\n        nlink: 1,\n        uid: uid,\n        gid: gid,\n        size: 200,\n        'NODETAR.blksize': '4096',\n        'NODETAR.blocks': '8' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/200ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 200,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '',\n        'NODETAR.depth': '1',\n        'NODETAR.type': 'File',\n        nlink: 1,\n        'NODETAR.blksize': '4096',\n        'NODETAR.blocks': '8' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/a.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 257,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/b.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 512,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/c.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 513,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/cc.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 513,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/dir/',\n        mode: 488,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/dir/sub/',\n        mode: 488,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n\n    , [ 'entry',\n      { path: 'fixtures/foo.js',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 4,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/hardlink-1',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 200,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/hardlink-2',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '1',\n        linkpath: 'fixtures/hardlink-1',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/omega.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 2,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/packtest/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/packtest/omega.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 2,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/packtest/star.4.html',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 54081,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'extendedHeader',\n      { path: 'PaxHeader/fixtures/packtest/Ω.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        type: 'x',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' },\n      { path: 'fixtures/packtest/Ω.txt',\n        'NODETAR.depth': '2',\n        'NODETAR.type': 'File',\n        nlink: 1,\n        uid: uid,\n        gid: gid,\n        size: 2,\n        'NODETAR.blksize': '4096',\n        'NODETAR.blocks': '8' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/packtest/Ω.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 2,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '',\n        'NODETAR.depth': '2',\n        'NODETAR.type': 'File',\n        nlink: 1,\n        'NODETAR.blksize': '4096',\n        'NODETAR.blocks': '8' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t/h/',\n        mode: 493,\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '5',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/r/e/a/l/l/y/-/d/e/e/p/-/f/o/l/d/e/r/-/p/a/t/h/cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 100,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'entry',\n      { path: 'fixtures/symlink',\n        uid: uid,\n        gid: gid,\n        size: 0,\n        type: '2',\n        linkpath: 'hardlink-1',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' } ]\n\n    , [ 'extendedHeader',\n      { path: 'PaxHeader/fixtures/Ω.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        type: 'x',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '' },\n      { path: \"fixtures/Ω.txt\"\n      , \"NODETAR.depth\": \"1\"\n      , \"NODETAR.type\": \"File\"\n      , nlink: 1\n      , uid: uid\n      , gid: gid\n      , size: 2\n      , \"NODETAR.blksize\": \"4096\"\n      , \"NODETAR.blocks\": \"8\" } ]\n\n    , [ 'entry',\n      { path: 'fixtures/Ω.txt',\n        mode: 420,\n        uid: uid,\n        gid: gid,\n        size: 2,\n        type: '0',\n        linkpath: '',\n        ustar: 'ustar\\u0000',\n        ustarver: '00',\n        uname: '',\n        gname: '',\n        devmaj: 0,\n        devmin: 0,\n        fill: '',\n        'NODETAR.depth': '1',\n        'NODETAR.type': 'File',\n        nlink: 1,\n        'NODETAR.blksize': '4096',\n        'NODETAR.blocks': '8' } ]\n    ]\n\n\n// first, make sure that the hardlinks are actually hardlinks, or this\n// won't work.  Git has a way of replacing them with a copy.\nvar hard1 = path.resolve(__dirname, \"fixtures/hardlink-1\")\n  , hard2 = path.resolve(__dirname, \"fixtures/hardlink-2\")\n  , fs = require(\"fs\")\n\ntry { fs.unlinkSync(hard2) } catch (e) {}\nfs.linkSync(hard1, hard2)\n\ntap.test(\"with global header\", { timeout: 10000 }, function (t) {\n  runTest(t, true)\n})\n\ntap.test(\"without global header\", { timeout: 10000 }, function (t) {\n  runTest(t, false)\n})\n\ntap.test(\"with from base\", { timeout: 10000 }, function (t) {\n  runTest(t, true, true)\n})\n\nfunction alphasort (a, b) {\n  return a === b ? 0\n       : a.toLowerCase() > b.toLowerCase() ? 1\n       : a.toLowerCase() < b.toLowerCase() ? -1\n       : a > b ? 1\n       : -1\n}\n\n\nfunction runTest (t, doGH, doFromBase) {\n  var reader = Reader({ path: input\n                      , filter: function () {\n                          return !this.path.match(/\\.(tar|hex)$/)\n                        }\n                      , sort: alphasort\n                      })\n\n  var props = doGH ? pkg : {}\n  if(doFromBase) props.fromBase = true;\n\n  var pack = Pack(props)\n  var writer = Writer(target)\n\n  // skip the global header if we're not doing that.\n  var entry = doGH ? 0 : 1\n\n  t.ok(reader, \"reader ok\")\n  t.ok(pack, \"pack ok\")\n  t.ok(writer, \"writer ok\")\n\n  pack.pipe(writer)\n\n  var parse = tar.Parse()\n  t.ok(parse, \"parser should be ok\")\n\n  pack.on(\"data\", function (c) {\n    // console.error(\"PACK DATA\")\n    if (c.length !== 512) {\n      // this one is too noisy, only assert if it'll be relevant\n      t.equal(c.length, 512, \"parser should emit data in 512byte blocks\")\n    }\n    parse.write(c)\n  })\n\n  pack.on(\"end\", function () {\n    // console.error(\"PACK END\")\n    t.pass(\"parser ends\")\n    parse.end()\n  })\n\n  pack.on(\"error\", function (er) {\n    t.fail(\"pack error\", er)\n  })\n\n  parse.on(\"error\", function (er) {\n    t.fail(\"parse error\", er)\n  })\n\n  writer.on(\"error\", function (er) {\n    t.fail(\"writer error\", er)\n  })\n\n  reader.on(\"error\", function (er) {\n    t.fail(\"reader error\", er)\n  })\n\n  parse.on(\"*\", function (ev, e) {\n    var wanted = entries[entry++]\n    if (!wanted) {\n      t.fail(\"unexpected event: \"+ev)\n      return\n    }\n    t.equal(ev, wanted[0], \"event type should be \"+wanted[0])\n\n    if(doFromBase) {\n      if(wanted[1].path.indexOf('fixtures/') && wanted[1].path.length == 100)\n        wanted[1].path = wanted[1].path.replace('fixtures/', '') + 'ccccccccc'\n\n      if(wanted[1]) wanted[1].path = wanted[1].path.replace('fixtures/', '').replace('//', '/')\n      if(wanted[1].path == '') wanted[1].path = '/'\n      if(wanted[2] && wanted[2].path) wanted[2].path = wanted[2].path.replace('fixtures', '').replace(/^\\//, '')\n\n      wanted[1].linkpath = wanted[1].linkpath.replace('fixtures/', '')\n    }\n\n    if (ev !== wanted[0] || e.path !== wanted[1].path) {\n      console.error(\"wanted\", wanted)\n      console.error([ev, e.props])\n      e.on(\"end\", function () {\n        console.error(e.fields)\n        throw \"break\"\n      })\n    }\n\n\n    t.has(e.props, wanted[1], \"properties \"+wanted[1].path)\n    if (wanted[2]) {\n      e.on(\"end\", function () {\n        if (!e.fields) {\n          t.ok(e.fields, \"should get fields\")\n        } else {\n          t.has(e.fields, wanted[2], \"should get expected fields\")\n        }\n      })\n    }\n  })\n\n  reader.pipe(pack)\n\n  writer.on(\"close\", function () {\n    t.equal(entry, entries.length, \"should get all expected entries\")\n    t.pass(\"it finished\")\n    t.end()\n  })\n\n}\n"]}