{"version":3,"sources":["../../../../../node_modules/npm/node_modules/uid-number/uid-number.js"],"names":["module","exports","uidNumber","child_process","require","path","uidSupport","process","getuid","setuid","uidCache","gidCache","uid","gid","cb","getgid","isNaN","hasOwnProperty","nextTick","bind","getter","resolve","execFile","execPath","code","out","stderr","er","Error","JSON","parse","ex","error","errno","stringify"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiBC,SAAjB;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,gBAAgBC,QAAQ,eAAR,CAApB;AAAA,IACIC,OAAOD,QAAQ,MAAR,CADX;AAAA,IAEIE,aAAaC,QAAQC,MAAR,IAAkBD,QAAQE,MAF3C;AAAA,IAGIC,WAAW,EAHf;AAAA,IAIIC,WAAW,EAJf;;AAMA,SAAST,SAAT,CAAoBU,GAApB,EAAyBC,GAAzB,EAA8BC,EAA9B,EAAkC;AAChC,MAAI,CAACR,UAAL,EAAiB,OAAOQ,IAAP;AACjB,MAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8BA,KAAKD,GAAL,EAAUA,MAAM,IAAhB;AAC9B,MAAI,OAAOC,EAAP,KAAc,UAAlB,EAA8BA,KAAKF,GAAL,EAAUA,MAAM,IAAhB;AAC9B,MAAIC,OAAO,IAAX,EAAiBA,MAAMN,QAAQQ,MAAR,EAAN;AACjB,MAAIH,OAAO,IAAX,EAAiBA,MAAML,QAAQC,MAAR,EAAN;AACjB,MAAI,CAACQ,MAAMH,GAAN,CAAL,EAAiBA,MAAMF,SAASE,GAAT,IAAgB,CAACA,GAAvB;AACjB,MAAI,CAACG,MAAMJ,GAAN,CAAL,EAAiBA,MAAMF,SAASE,GAAT,IAAgB,CAACA,GAAvB;;AAEjB,MAAIF,SAASO,cAAT,CAAwBL,GAAxB,CAAJ,EAAkCA,MAAMF,SAASE,GAAT,CAAN;AAClC,MAAID,SAASM,cAAT,CAAwBJ,GAAxB,CAAJ,EAAkCA,MAAMF,SAASE,GAAT,CAAN;;AAElC,MAAI,OAAOA,GAAP,KAAe,QAAf,IAA2B,OAAOD,GAAP,KAAe,QAA9C,EAAwD;AACtD,WAAOL,QAAQW,QAAR,CAAiBJ,GAAGK,IAAH,CAAQ,IAAR,EAAc,IAAd,EAAoBP,GAApB,EAAyBC,GAAzB,CAAjB,CAAP;AACD;;AAED,MAAIO,SAAShB,QAAQiB,OAAR,CAAgB,kBAAhB,CAAb;;AAEAlB,gBAAcmB,QAAd,CAAwBf,QAAQgB,QAAhC,EACwB,CAACH,MAAD,EAASR,GAAT,EAAcC,GAAd,CADxB,EAEwB,UAAUW,IAAV,EAAgBC,GAAhB,EAAqBC,MAArB,EAA6B;AACnD,QAAIF,IAAJ,EAAU;AACR,UAAIG,KAAK,IAAIC,KAAJ,CAAU,4BAA4BF,MAAtC,CAAT;AACAC,SAAGH,IAAH,GAAUA,IAAV;AACA,aAAOV,GAAGa,EAAH,CAAP;AACD;;AAED,QAAI;AACFF,YAAMI,KAAKC,KAAL,CAAWL,MAAI,EAAf,CAAN;AACD,KAFD,CAEE,OAAOM,EAAP,EAAW;AACX,aAAOjB,GAAGiB,EAAH,CAAP;AACD;;AAED,QAAIN,IAAIO,KAAR,EAAe;AACb,UAAIL,KAAK,IAAIC,KAAJ,CAAUH,IAAIO,KAAd,CAAT;AACAL,SAAGM,KAAH,GAAWR,IAAIQ,KAAf;AACA,aAAOnB,GAAGa,EAAH,CAAP;AACD;;AAED,QAAIX,MAAMS,IAAIb,GAAV,KAAkBI,MAAMS,IAAIZ,GAAV,CAAtB,EAAsC,OAAOC,GAAG,IAAIc,KAAJ,CAC9C,4BAA0BC,KAAKK,SAAL,CAAeT,GAAf,CADoB,CAAH,CAAP;;AAGtCX,OAAG,IAAH,EAASJ,SAASE,GAAT,IAAgB,CAACa,IAAIb,GAA9B,EAAmCD,SAASE,GAAT,IAAgB,CAACY,IAAIZ,GAAxD;AACD,GAzBD;AA0BD","file":"uid-number.js","sourcesContent":["module.exports = uidNumber\n\n// This module calls into get-uid-gid.js, which sets the\n// uid and gid to the supplied argument, in order to find out their\n// numeric value.  This can't be done in the main node process,\n// because otherwise node would be running as that user from this\n// point on.\n\nvar child_process = require(\"child_process\")\n  , path = require(\"path\")\n  , uidSupport = process.getuid && process.setuid\n  , uidCache = {}\n  , gidCache = {}\n\nfunction uidNumber (uid, gid, cb) {\n  if (!uidSupport) return cb()\n  if (typeof cb !== \"function\") cb = gid, gid = null\n  if (typeof cb !== \"function\") cb = uid, uid = null\n  if (gid == null) gid = process.getgid()\n  if (uid == null) uid = process.getuid()\n  if (!isNaN(gid)) gid = gidCache[gid] = +gid\n  if (!isNaN(uid)) uid = uidCache[uid] = +uid\n\n  if (uidCache.hasOwnProperty(uid)) uid = uidCache[uid]\n  if (gidCache.hasOwnProperty(gid)) gid = gidCache[gid]\n\n  if (typeof gid === \"number\" && typeof uid === \"number\") {\n    return process.nextTick(cb.bind(null, null, uid, gid))\n  }\n\n  var getter = require.resolve(\"./get-uid-gid.js\")\n\n  child_process.execFile( process.execPath\n                        , [getter, uid, gid]\n                        , function (code, out, stderr) {\n    if (code) {\n      var er = new Error(\"could not get uid/gid\\n\" + stderr)\n      er.code = code\n      return cb(er)\n    }\n\n    try {\n      out = JSON.parse(out+\"\")\n    } catch (ex) {\n      return cb(ex)\n    }\n\n    if (out.error) {\n      var er = new Error(out.error)\n      er.errno = out.errno\n      return cb(er)\n    }\n\n    if (isNaN(out.uid) || isNaN(out.gid)) return cb(new Error(\n      \"Could not get uid/gid: \"+JSON.stringify(out)))\n\n    cb(null, uidCache[uid] = +out.uid, gidCache[gid] = +out.gid)\n  })\n}\n"]}