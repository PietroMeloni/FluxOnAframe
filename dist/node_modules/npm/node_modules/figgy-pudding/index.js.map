{"version":3,"sources":["../../../../../node_modules/npm/node_modules/figgy-pudding/index.js"],"names":["FiggyPudding","specs","opts","providers","__specs","__opts","__providers","reverse","filter","x","__isFiggyPudding","key","pudGet","moreConfig","concat","pud","validate","spec","other","Error","ret","p","get","undefined","default","proxyHandler","has","obj","prop","slice","set","value","delete","module","exports","figgyPudding","factory","Proxy","arr","forEach","unshift"],"mappings":"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","file":"index.js","sourcesContent":["'use strict'\n\nclass FiggyPudding {\n  constructor (specs, opts, providers) {\n    this.__specs = specs || {}\n    this.__opts = opts || (() => false)\n    this.__providers = reverse((providers || []).filter(\n      x => x != null && typeof x === 'object'\n    ))\n    this.__isFiggyPudding = true\n  }\n  get (key) {\n    return pudGet(this, key, true)\n  }\n  concat (...moreConfig) {\n    return new FiggyPudding(\n      this.__specs,\n      this.__opts,\n      reverse(this.__providers).concat(moreConfig)\n    )\n  }\n}\n\nfunction pudGet (pud, key, validate) {\n  let spec = pud.__specs[key]\n  if (typeof spec === 'string') {\n    key = spec\n    spec = pud.__specs[key]\n  }\n  if (validate && !spec && (!pud.__opts.other || !pud.__opts.other(key))) {\n    throw new Error(`invalid config key requested: ${key}`)\n  } else {\n    if (!spec) { spec = {} }\n    let ret\n    for (let p of pud.__providers) {\n      if (p.__isFiggyPudding) {\n        ret = pudGet(p, key, false)\n      } else if (typeof p.get === 'function') {\n        ret = p.get(key)\n      } else {\n        ret = p[key]\n      }\n      if (ret !== undefined) {\n        break\n      }\n    }\n    if (ret === undefined && spec.default !== undefined) {\n      if (typeof spec.default === 'function') {\n        return spec.default()\n      } else {\n        return spec.default\n      }\n    } else {\n      return ret\n    }\n  }\n}\n\nconst proxyHandler = {\n  has (obj, prop) {\n    return pudGet(obj, prop, false) !== undefined\n  },\n  get (obj, prop) {\n    if (\n      prop === 'concat' ||\n      prop === 'get' ||\n      prop.slice(0, 2) === '__'\n    ) {\n      return obj[prop]\n    }\n    return obj.get(prop)\n  },\n  set (obj, prop, value) {\n    if (prop.slice(0, 2) === '__') {\n      obj[prop] = value\n    } else {\n      throw new Error('figgyPudding options cannot be modified. Use .concat() instead.')\n    }\n  },\n  delete () {\n    throw new Error('figgyPudding options cannot be deleted. Use .concat() and shadow them instead.')\n  }\n}\n\nmodule.exports = figgyPudding\nfunction figgyPudding (specs, opts) {\n  function factory (...providers) {\n    return new Proxy(new FiggyPudding(\n      specs,\n      opts,\n      providers\n    ), proxyHandler)\n  }\n  return factory\n}\n\nfunction reverse (arr) {\n  const ret = []\n  arr.forEach(x => ret.unshift(x))\n  return ret\n}\n"]}