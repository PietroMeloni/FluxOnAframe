{"version":3,"sources":["../../../../../node_modules/npm/node_modules/proto-list/proto-list.js"],"names":["module","exports","ProtoList","setProto","obj","proto","Object","setPrototypeOf","__proto__","list","root","defineProperty","get","set","r","length","enumerable","configurable","prototype","keys","k","i","push","snapshot","o","forEach","store","valueOf","pop","unshift","shift","key","val","save","hasOwnProperty","fn","thisp","call","slice","apply","arguments","splice","ret","l"],"mappings":";;;;AACAA,OAAOC,OAAP,GAAiBC,SAAjB;;AAEA,SAASC,QAAT,CAAkBC,GAAlB,EAAuBC,KAAvB,EAA8B;AAC5B,MAAI,OAAOC,OAAOC,cAAd,KAAiC,UAArC,EACE,OAAOD,OAAOC,cAAP,CAAsBH,GAAtB,EAA2BC,KAA3B,CAAP,CADF,KAGED,IAAII,SAAJ,GAAgBH,KAAhB;AACH;;AAED,SAASH,SAAT,GAAsB;AACpB,OAAKO,IAAL,GAAY,EAAZ;AACA,MAAIC,OAAO,IAAX;AACAJ,SAAOK,cAAP,CAAsB,IAAtB,EAA4B,MAA5B,EAAoC;AAClCC,SAAK,eAAY;AAAE,aAAOF,IAAP;AAAa,KADE;AAElCG,SAAK,aAAUC,CAAV,EAAa;AAChBJ,aAAOI,CAAP;AACA,UAAI,KAAKL,IAAL,CAAUM,MAAd,EAAsB;AACpBZ,iBAAS,KAAKM,IAAL,CAAU,KAAKA,IAAL,CAAUM,MAAV,GAAmB,CAA7B,CAAT,EAA0CD,CAA1C;AACD;AACF,KAPiC;AAQlCE,gBAAY,IARsB;AASlCC,kBAAc;AAToB,GAApC;AAWD;;AAEDf,UAAUgB,SAAV,GACE,EAAE,IAAIH,MAAJ,GAAc;AAAE,WAAO,KAAKN,IAAL,CAAUM,MAAjB;AAAyB,GAA3C;AACE,MAAII,IAAJ,GAAY;AACV,QAAIC,IAAI,EAAR;AACA,SAAK,IAAIC,CAAT,IAAc,KAAKZ,IAAL,CAAU,CAAV,CAAd;AAA4BW,QAAEE,IAAF,CAAOD,CAAP;AAA5B,KACA,OAAOD,CAAP;AACD,GALH;AAME,MAAIG,QAAJ,GAAgB;AACd,QAAIC,IAAI,EAAR;AACA,SAAKL,IAAL,CAAUM,OAAV,CAAkB,UAAUL,CAAV,EAAa;AAAEI,QAAEJ,CAAF,IAAO,KAAKR,GAAL,CAASQ,CAAT,CAAP;AAAoB,KAArD,EAAuD,IAAvD;AACA,WAAOI,CAAP;AACD,GAVH;AAWE,MAAIE,KAAJ,GAAa;AACX,WAAO,KAAKjB,IAAL,CAAU,CAAV,CAAP;AACD,GAbH;AAcEa,QAAO,cAAUlB,GAAV,EAAe;AACpB,QAAI,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAnB,EAA6BA,MAAM,EAACuB,SAAQvB,GAAT,EAAN;AAC7B,QAAI,KAAKK,IAAL,CAAUM,MAAV,IAAoB,CAAxB,EAA2B;AACzBZ,eAAS,KAAKM,IAAL,CAAU,KAAKA,IAAL,CAAUM,MAAV,GAAmB,CAA7B,CAAT,EAA0CX,GAA1C;AACD;AACDD,aAASC,GAAT,EAAc,KAAKM,IAAnB;AACA,WAAO,KAAKD,IAAL,CAAUa,IAAV,CAAelB,GAAf,CAAP;AACD,GArBH;AAsBEwB,OAAM,eAAY;AAChB,QAAI,KAAKnB,IAAL,CAAUM,MAAV,IAAoB,CAAxB,EAA2B;AACzBZ,eAAS,KAAKM,IAAL,CAAU,KAAKA,IAAL,CAAUM,MAAV,GAAmB,CAA7B,CAAT,EAA0C,KAAKL,IAA/C;AACD;AACD,WAAO,KAAKD,IAAL,CAAUmB,GAAV,EAAP;AACD,GA3BH;AA4BEC,WAAU,iBAAUzB,GAAV,EAAe;AACvBD,aAASC,GAAT,EAAc,KAAKK,IAAL,CAAU,CAAV,KAAgB,KAAKC,IAAnC;AACA,WAAO,KAAKD,IAAL,CAAUoB,OAAV,CAAkBzB,GAAlB,CAAP;AACD,GA/BH;AAgCE0B,SAAQ,iBAAY;AAClB,QAAI,KAAKrB,IAAL,CAAUM,MAAV,KAAqB,CAAzB,EAA4B;AAC1BZ,eAAS,KAAKM,IAAL,CAAU,CAAV,CAAT,EAAuB,KAAKC,IAA5B;AACD;AACD,WAAO,KAAKD,IAAL,CAAUqB,KAAV,EAAP;AACD,GArCH;AAsCElB,OAAM,aAAUmB,GAAV,EAAe;AACnB,WAAO,KAAKtB,IAAL,CAAU,CAAV,EAAasB,GAAb,CAAP;AACD,GAxCH;AAyCElB,OAAM,aAAUkB,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC9B,QAAI,CAAC,KAAKlB,MAAV,EAAkB,KAAKO,IAAL,CAAU,EAAV;AAClB,QAAIW,QAAQ,KAAKxB,IAAL,CAAU,CAAV,EAAayB,cAAb,CAA4BH,GAA5B,CAAZ,EAA8C,KAAKT,IAAL,CAAU,EAAV;AAC9C,WAAO,KAAKb,IAAL,CAAU,CAAV,EAAasB,GAAb,IAAoBC,GAA3B;AACD,GA7CH;AA8CEP,WAAU,iBAAUU,EAAV,EAAcC,KAAd,EAAqB;AAC7B,SAAK,IAAIL,GAAT,IAAgB,KAAKtB,IAAL,CAAU,CAAV,CAAhB;AAA8B0B,SAAGE,IAAH,CAAQD,KAAR,EAAeL,GAAf,EAAoB,KAAKtB,IAAL,CAAU,CAAV,EAAasB,GAAb,CAApB;AAA9B;AACD,GAhDH;AAiDEO,SAAQ,iBAAY;AAClB,WAAO,KAAK7B,IAAL,CAAU6B,KAAV,CAAgBC,KAAhB,CAAsB,KAAK9B,IAA3B,EAAiC+B,SAAjC,CAAP;AACD,GAnDH;AAoDEC,UAAS,kBAAY;AACnB;AACA,QAAIC,MAAM,KAAKjC,IAAL,CAAUgC,MAAV,CAAiBF,KAAjB,CAAuB,KAAK9B,IAA5B,EAAkC+B,SAAlC,CAAV;AACA,SAAK,IAAInB,IAAI,CAAR,EAAWsB,IAAI,KAAKlC,IAAL,CAAUM,MAA9B,EAAsCM,IAAIsB,CAA1C,EAA6CtB,GAA7C,EAAkD;AAChDlB,eAAS,KAAKM,IAAL,CAAUY,CAAV,CAAT,EAAuB,KAAKZ,IAAL,CAAUY,IAAI,CAAd,KAAoB,KAAKX,IAAhD;AACD;AACD,WAAOgC,GAAP;AACD;AA3DH,CADF","file":"proto-list.js","sourcesContent":["\nmodule.exports = ProtoList\n\nfunction setProto(obj, proto) {\n  if (typeof Object.setPrototypeOf === \"function\")\n    return Object.setPrototypeOf(obj, proto)\n  else\n    obj.__proto__ = proto\n}\n\nfunction ProtoList () {\n  this.list = []\n  var root = null\n  Object.defineProperty(this, 'root', {\n    get: function () { return root },\n    set: function (r) {\n      root = r\n      if (this.list.length) {\n        setProto(this.list[this.list.length - 1], r)\n      }\n    },\n    enumerable: true,\n    configurable: true\n  })\n}\n\nProtoList.prototype =\n  { get length () { return this.list.length }\n  , get keys () {\n      var k = []\n      for (var i in this.list[0]) k.push(i)\n      return k\n    }\n  , get snapshot () {\n      var o = {}\n      this.keys.forEach(function (k) { o[k] = this.get(k) }, this)\n      return o\n    }\n  , get store () {\n      return this.list[0]\n    }\n  , push : function (obj) {\n      if (typeof obj !== \"object\") obj = {valueOf:obj}\n      if (this.list.length >= 1) {\n        setProto(this.list[this.list.length - 1], obj)\n      }\n      setProto(obj, this.root)\n      return this.list.push(obj)\n    }\n  , pop : function () {\n      if (this.list.length >= 2) {\n        setProto(this.list[this.list.length - 2], this.root)\n      }\n      return this.list.pop()\n    }\n  , unshift : function (obj) {\n      setProto(obj, this.list[0] || this.root)\n      return this.list.unshift(obj)\n    }\n  , shift : function () {\n      if (this.list.length === 1) {\n        setProto(this.list[0], this.root)\n      }\n      return this.list.shift()\n    }\n  , get : function (key) {\n      return this.list[0][key]\n    }\n  , set : function (key, val, save) {\n      if (!this.length) this.push({})\n      if (save && this.list[0].hasOwnProperty(key)) this.push({})\n      return this.list[0][key] = val\n    }\n  , forEach : function (fn, thisp) {\n      for (var key in this.list[0]) fn.call(thisp, key, this.list[0][key])\n    }\n  , slice : function () {\n      return this.list.slice.apply(this.list, arguments)\n    }\n  , splice : function () {\n      // handle injections\n      var ret = this.list.splice.apply(this.list, arguments)\n      for (var i = 0, l = this.list.length; i < l; i++) {\n        setProto(this.list[i], this.list[i + 1] || this.root)\n      }\n      return ret\n    }\n  }\n"]}