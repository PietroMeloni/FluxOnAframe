{"version":3,"sources":["../../../../../../../node_modules/npm/node_modules/bluebird/js/release/race.js"],"names":["module","exports","Promise","INTERNAL","tryConvertToPromise","apiRejection","util","require","raceLater","promise","then","array","race","promises","parent","maybePromise","asArray","classString","ret","undefined","_propagateFrom","fulfill","_fulfill","reject","_reject","i","len","length","val","cast","_then","prototype"],"mappings":"AAAA;;AACAA,OAAOC,OAAP,GAAiB,UACbC,OADa,EACJC,QADI,EACMC,mBADN,EAC2BC,YAD3B,EACyC;AAC1D,QAAIC,OAAOC,QAAQ,QAAR,CAAX;;AAEA,QAAIC,YAAY,SAAZA,SAAY,CAAUC,OAAV,EAAmB;AAC/B,eAAOA,QAAQC,IAAR,CAAa,UAASC,KAAT,EAAgB;AAChC,mBAAOC,KAAKD,KAAL,EAAYF,OAAZ,CAAP;AACH,SAFM,CAAP;AAGH,KAJD;;AAMA,aAASG,IAAT,CAAcC,QAAd,EAAwBC,MAAxB,EAAgC;AAC5B,YAAIC,eAAeX,oBAAoBS,QAApB,CAAnB;;AAEA,YAAIE,wBAAwBb,OAA5B,EAAqC;AACjC,mBAAOM,UAAUO,YAAV,CAAP;AACH,SAFD,MAEO;AACHF,uBAAWP,KAAKU,OAAL,CAAaH,QAAb,CAAX;AACA,gBAAIA,aAAa,IAAjB,EACI,OAAOR,aAAa,sDAAsDC,KAAKW,WAAL,CAAiBJ,QAAjB,CAAnE,CAAP;AACP;;AAED,YAAIK,MAAM,IAAIhB,OAAJ,CAAYC,QAAZ,CAAV;AACA,YAAIW,WAAWK,SAAf,EAA0B;AACtBD,gBAAIE,cAAJ,CAAmBN,MAAnB,EAA2B,CAA3B;AACH;AACD,YAAIO,UAAUH,IAAII,QAAlB;AACA,YAAIC,SAASL,IAAIM,OAAjB;AACA,aAAK,IAAIC,IAAI,CAAR,EAAWC,MAAMb,SAASc,MAA/B,EAAuCF,IAAIC,GAA3C,EAAgD,EAAED,CAAlD,EAAqD;AACjD,gBAAIG,MAAMf,SAASY,CAAT,CAAV;;AAEA,gBAAIG,QAAQT,SAAR,IAAqB,EAAEM,KAAKZ,QAAP,CAAzB,EAA2C;AACvC;AACH;;AAEDX,oBAAQ2B,IAAR,CAAaD,GAAb,EAAkBE,KAAlB,CAAwBT,OAAxB,EAAiCE,MAAjC,EAAyCJ,SAAzC,EAAoDD,GAApD,EAAyD,IAAzD;AACH;AACD,eAAOA,GAAP;AACH;;AAEDhB,YAAQU,IAAR,GAAe,UAAUC,QAAV,EAAoB;AAC/B,eAAOD,KAAKC,QAAL,EAAeM,SAAf,CAAP;AACH,KAFD;;AAIAjB,YAAQ6B,SAAR,CAAkBnB,IAAlB,GAAyB,YAAY;AACjC,eAAOA,KAAK,IAAL,EAAWO,SAAX,CAAP;AACH,KAFD;AAIC,CA/CD","file":"race.js","sourcesContent":["\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = require(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n"]}