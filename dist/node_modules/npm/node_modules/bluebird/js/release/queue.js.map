{"version":3,"sources":["../../../../../../../node_modules/npm/node_modules/bluebird/js/release/queue.js"],"names":["arrayMove","src","srcIndex","dst","dstIndex","len","j","Queue","capacity","_capacity","_length","_front","prototype","_willBeOverCapacity","size","_pushOne","arg","length","_checkCapacity","i","push","fn","receiver","wrapMask","shift","front","ret","undefined","_resizeTo","oldCapacity","moveItemsCount","module","exports"],"mappings":"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","file":"queue.js","sourcesContent":["\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n"]}