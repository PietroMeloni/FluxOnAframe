{"version":3,"sources":["../../../../../../../node_modules/npm/node_modules/bluebird/js/release/promise.js"],"names":["module","exports","makeSelfResolutionError","TypeError","reflectHandler","Promise","PromiseInspection","_target","apiRejection","msg","reject","Proxyable","UNDEFINED_BINDING","util","require","getDomain","isNode","ret","process","domain","undefined","notEnumerableProp","es5","Async","async","defineProperty","value","errors","RangeError","CancellationError","TimeoutError","OperationalError","RejectionError","AggregateError","INTERNAL","APPLY","NEXT_FILTER","tryConvertToPromise","PromiseArray","Context","createContext","create","debug","CapturedTrace","PassThroughHandlerContext","catchFilter","nodebackForPromise","errorObj","tryCatch","check","self","executor","constructor","classString","_bitField","_fulfillmentHandler0","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","_promiseCreated","_fireEvent","prototype","toString","caught","fn","len","arguments","length","catchInstances","Array","j","i","item","isObject","then","reflect","_then","didFulfill","didReject","warnings","_warn","done","promise","_setIsFinal","spread","all","toJSON","isFulfilled","isRejected","fulfillmentValue","rejectionReason","reason","error","originatesFromRejection","getNewLibraryCopy","is","val","fromNode","fromCallback","_captureStackTrace","multiArgs","Object","result","_rejectCallback","e","_isFateSealed","_setAsyncGuaranteed","promises","cast","obj","_setFulfilled","resolve","fulfilled","rejected","setScheduler","_","receiver","internalData","haveInternalData","target","bitField","_propagateFrom","_boundValue","_boundTo","handler","settler","_settlePromiseCtx","_unsetRejectionIsUnhandled","_settlePromiseLateCancellationObserver","_attachExtraTrace","invoke","domainBind","_addCallbacks","_length","_isFollowing","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_setCancelled","_setWillBeCancelled","hasCustomScheduler","_receiverAt","index","_isBound","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","base","_proxy","proxyable","arg","_resolveCallback","shouldBind","maybePromise","_fulfill","_reject","_setFollowee","_value","_reason","synchronous","ignoreNonErrorWarnings","trace","ensureErrorObject","hasStack","message","_pushContext","r","_execute","_popContext","_settlePromiseFromHandler","x","apply","call","promiseCreated","checkForgottenReturns","_followee","_settlePromise","isPromise","asyncGuaranteed","_invokeInternalOnCancel","isFinallyHandler","cancelPromise","_promiseCancelled","_cancel","cancel","_isResolved","_promiseFulfilled","_promiseRejected","ctx","_settlePromise0","_clearCallbackDataAtIndex","err","_settlePromises","settlePromises","fatalError","_ensurePossibleRejectionHandled","_fulfillPromises","_rejectPromises","_clearCancellationData","_settledValue","deferResolve","v","deferReject","defer","pending","deprecated","version","toFastProperties","fillTypes","p","a","b","c","setBounds","firstLineError","lastLineError"],"mappings":"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","file":"promise.js","sourcesContent":["\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = require(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = require(\"./es5\");\nvar Async = require(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = require(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = require(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    require(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = require(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = require(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    require(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = require(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = require(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\nrequire(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\nrequire(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\nrequire(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\nrequire(\"./direct_resolve\")(Promise);\nrequire(\"./synchronous_inspection\")(Promise);\nrequire(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.1\";\nrequire('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\nrequire('./call_get.js')(Promise);\nrequire('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\nrequire('./timers.js')(Promise, INTERNAL, debug);\nrequire('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\nrequire('./nodeify.js')(Promise);\nrequire('./promisify.js')(Promise, INTERNAL);\nrequire('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\nrequire('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\nrequire('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\nrequire('./settle.js')(Promise, PromiseArray, debug);\nrequire('./some.js')(Promise, PromiseArray, apiRejection);\nrequire('./filter.js')(Promise, INTERNAL);\nrequire('./each.js')(Promise, INTERNAL);\nrequire('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n"]}