{"version":3,"sources":["../../../../../../../node_modules/npm/node_modules/bluebird/js/release/nodeify.js"],"names":["module","exports","Promise","util","require","async","_async","tryCatch","errorObj","spreadAdapter","val","nodeback","promise","isArray","successAdapter","call","ret","apply","_boundValue","concat","throwLater","e","receiver","undefined","errorAdapter","reason","newReason","Error","cause","prototype","asCallback","nodeify","options","adapter","Object","spread","_then"],"mappings":"AAAA;;AACAA,OAAOC,OAAP,GAAiB,UAASC,OAAT,EAAkB;AACnC,QAAIC,OAAOC,QAAQ,QAAR,CAAX;AACA,QAAIC,QAAQH,QAAQI,MAApB;AACA,QAAIC,WAAWJ,KAAKI,QAApB;AACA,QAAIC,WAAWL,KAAKK,QAApB;;AAEA,aAASC,aAAT,CAAuBC,GAAvB,EAA4BC,QAA5B,EAAsC;AAClC,YAAIC,UAAU,IAAd;AACA,YAAI,CAACT,KAAKU,OAAL,CAAaH,GAAb,CAAL,EAAwB,OAAOI,eAAeC,IAAf,CAAoBH,OAApB,EAA6BF,GAA7B,EAAkCC,QAAlC,CAAP;AACxB,YAAIK,MACAT,SAASI,QAAT,EAAmBM,KAAnB,CAAyBL,QAAQM,WAAR,EAAzB,EAAgD,CAAC,IAAD,EAAOC,MAAP,CAAcT,GAAd,CAAhD,CADJ;AAEA,YAAIM,QAAQR,QAAZ,EAAsB;AAClBH,kBAAMe,UAAN,CAAiBJ,IAAIK,CAArB;AACH;AACJ;;AAED,aAASP,cAAT,CAAwBJ,GAAxB,EAA6BC,QAA7B,EAAuC;AACnC,YAAIC,UAAU,IAAd;AACA,YAAIU,WAAWV,QAAQM,WAAR,EAAf;AACA,YAAIF,MAAMN,QAAQa,SAAR,GACJhB,SAASI,QAAT,EAAmBI,IAAnB,CAAwBO,QAAxB,EAAkC,IAAlC,CADI,GAEJf,SAASI,QAAT,EAAmBI,IAAnB,CAAwBO,QAAxB,EAAkC,IAAlC,EAAwCZ,GAAxC,CAFN;AAGA,YAAIM,QAAQR,QAAZ,EAAsB;AAClBH,kBAAMe,UAAN,CAAiBJ,IAAIK,CAArB;AACH;AACJ;AACD,aAASG,YAAT,CAAsBC,MAAtB,EAA8Bd,QAA9B,EAAwC;AACpC,YAAIC,UAAU,IAAd;AACA,YAAI,CAACa,MAAL,EAAa;AACT,gBAAIC,YAAY,IAAIC,KAAJ,CAAUF,SAAS,EAAnB,CAAhB;AACAC,sBAAUE,KAAV,GAAkBH,MAAlB;AACAA,qBAASC,SAAT;AACH;AACD,YAAIV,MAAMT,SAASI,QAAT,EAAmBI,IAAnB,CAAwBH,QAAQM,WAAR,EAAxB,EAA+CO,MAA/C,CAAV;AACA,YAAIT,QAAQR,QAAZ,EAAsB;AAClBH,kBAAMe,UAAN,CAAiBJ,IAAIK,CAArB;AACH;AACJ;;AAEDnB,YAAQ2B,SAAR,CAAkBC,UAAlB,GAA+B5B,QAAQ2B,SAAR,CAAkBE,OAAlB,GAA4B,UAAUpB,QAAV,EACUqB,OADV,EACmB;AAC1E,YAAI,OAAOrB,QAAP,IAAmB,UAAvB,EAAmC;AAC/B,gBAAIsB,UAAUnB,cAAd;AACA,gBAAIkB,YAAYT,SAAZ,IAAyBW,OAAOF,OAAP,EAAgBG,MAA7C,EAAqD;AACjDF,0BAAUxB,aAAV;AACH;AACD,iBAAK2B,KAAL,CACIH,OADJ,EAEIT,YAFJ,EAGID,SAHJ,EAII,IAJJ,EAKIZ,QALJ;AAOH;AACD,eAAO,IAAP;AACH,KAhBD;AAiBC,CAxDD","file":"nodeify.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise) {\nvar util = require(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n"]}