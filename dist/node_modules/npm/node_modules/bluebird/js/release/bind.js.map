{"version":3,"sources":["../../../../../../../node_modules/npm/node_modules/bluebird/js/release/bind.js"],"names":["module","exports","Promise","INTERNAL","tryConvertToPromise","debug","calledBind","rejectThis","_","e","_reject","targetRejected","context","promiseRejectionQueued","bindingPromise","_then","bindingResolved","thisArg","_bitField","_resolveCallback","target","bindingRejected","prototype","bind","_propagateFrom","propagateFromFunction","_boundValue","boundValueFunction","maybePromise","ret","_target","_setBoundTo","promise","undefined","_setOnCancel","obj","_boundTo","_isBound","value","resolve"],"mappings":"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","file":"bind.js","sourcesContent":["\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n"]}