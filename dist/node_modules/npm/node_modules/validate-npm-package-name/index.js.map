{"version":3,"sources":["../../../../../node_modules/npm/node_modules/validate-npm-package-name/index.js"],"names":["scopedPackagePattern","RegExp","builtins","require","blacklist","validate","module","exports","name","warnings","errors","push","done","undefined","length","match","trim","forEach","blacklistedName","toLowerCase","builtin","test","split","slice","encodeURIComponent","nameMatch","user","pkg","result","validForNewPackages","validForOldPackages"],"mappings":"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","file":"index.js","sourcesContent":["'use strict'\n\nvar scopedPackagePattern = new RegExp('^(?:@([^/]+?)[/])?([^/]+?)$')\nvar builtins = require('builtins')\nvar blacklist = [\n  'node_modules',\n  'favicon.ico'\n]\n\nvar validate = module.exports = function (name) {\n  var warnings = []\n  var errors = []\n\n  if (name === null) {\n    errors.push('name cannot be null')\n    return done(warnings, errors)\n  }\n\n  if (name === undefined) {\n    errors.push('name cannot be undefined')\n    return done(warnings, errors)\n  }\n\n  if (typeof name !== 'string') {\n    errors.push('name must be a string')\n    return done(warnings, errors)\n  }\n\n  if (!name.length) {\n    errors.push('name length must be greater than zero')\n  }\n\n  if (name.match(/^\\./)) {\n    errors.push('name cannot start with a period')\n  }\n\n  if (name.match(/^_/)) {\n    errors.push('name cannot start with an underscore')\n  }\n\n  if (name.trim() !== name) {\n    errors.push('name cannot contain leading or trailing spaces')\n  }\n\n  // No funny business\n  blacklist.forEach(function (blacklistedName) {\n    if (name.toLowerCase() === blacklistedName) {\n      errors.push(blacklistedName + ' is a blacklisted name')\n    }\n  })\n\n  // Generate warnings for stuff that used to be allowed\n\n  // core module names like http, events, util, etc\n  builtins.forEach(function (builtin) {\n    if (name.toLowerCase() === builtin) {\n      warnings.push(builtin + ' is a core module name')\n    }\n  })\n\n  // really-long-package-names-------------------------------such--length-----many---wow\n  // the thisisareallyreallylongpackagenameitshouldpublishdowenowhavealimittothelengthofpackagenames-poch.\n  if (name.length > 214) {\n    warnings.push('name can no longer contain more than 214 characters')\n  }\n\n  // mIxeD CaSe nAMEs\n  if (name.toLowerCase() !== name) {\n    warnings.push('name can no longer contain capital letters')\n  }\n\n  if (/[~'!()*]/.test(name.split('/').slice(-1)[0])) {\n    warnings.push('name can no longer contain special characters (\"~\\'!()*\")')\n  }\n\n  if (encodeURIComponent(name) !== name) {\n    // Maybe it's a scoped package name, like @user/package\n    var nameMatch = name.match(scopedPackagePattern)\n    if (nameMatch) {\n      var user = nameMatch[1]\n      var pkg = nameMatch[2]\n      if (encodeURIComponent(user) === user && encodeURIComponent(pkg) === pkg) {\n        return done(warnings, errors)\n      }\n    }\n\n    errors.push('name can only contain URL-friendly characters')\n  }\n\n  return done(warnings, errors)\n}\n\nvalidate.scopedPackagePattern = scopedPackagePattern\n\nvar done = function (warnings, errors) {\n  var result = {\n    validForNewPackages: errors.length === 0 && warnings.length === 0,\n    validForOldPackages: errors.length === 0,\n    warnings: warnings,\n    errors: errors\n  }\n  if (!result.warnings.length) delete result.warnings\n  if (!result.errors.length) delete result.errors\n  return result\n}\n"]}