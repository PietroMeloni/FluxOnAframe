{"version":3,"sources":["../../../../../node_modules/npm/node_modules/inflight/inflight.js"],"names":["wrappy","require","reqs","Object","create","once","module","exports","inflight","key","cb","push","makeres","RES","cbs","len","length","args","slice","arguments","i","apply","splice","process","nextTick","array"],"mappings":";;AAAA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,OAAOC,OAAOC,MAAP,CAAc,IAAd,CAAX;AACA,IAAIC,OAAOJ,QAAQ,MAAR,CAAX;;AAEAK,OAAOC,OAAP,GAAiBP,OAAOQ,QAAP,CAAjB;;AAEA,SAASA,QAAT,CAAmBC,GAAnB,EAAwBC,EAAxB,EAA4B;AAC1B,MAAIR,KAAKO,GAAL,CAAJ,EAAe;AACbP,SAAKO,GAAL,EAAUE,IAAV,CAAeD,EAAf;AACA,WAAO,IAAP;AACD,GAHD,MAGO;AACLR,SAAKO,GAAL,IAAY,CAACC,EAAD,CAAZ;AACA,WAAOE,QAAQH,GAAR,CAAP;AACD;AACF;;AAED,SAASG,OAAT,CAAkBH,GAAlB,EAAuB;AACrB,SAAOJ,KAAK,SAASQ,GAAT,GAAgB;AAC1B,QAAIC,MAAMZ,KAAKO,GAAL,CAAV;AACA,QAAIM,MAAMD,IAAIE,MAAd;AACA,QAAIC,OAAOC,MAAMC,SAAN,CAAX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAI;AACF,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIL,GAApB,EAAyBK,GAAzB,EAA8B;AAC5BN,YAAIM,CAAJ,EAAOC,KAAP,CAAa,IAAb,EAAmBJ,IAAnB;AACD;AACF,KAJD,SAIU;AACR,UAAIH,IAAIE,MAAJ,GAAaD,GAAjB,EAAsB;AACpB;AACA;AACAD,YAAIQ,MAAJ,CAAW,CAAX,EAAcP,GAAd;AACAQ,gBAAQC,QAAR,CAAiB,YAAY;AAC3BX,cAAIQ,KAAJ,CAAU,IAAV,EAAgBJ,IAAhB;AACD,SAFD;AAGD,OAPD,MAOO;AACL,eAAOf,KAAKO,GAAL,CAAP;AACD;AACF;AACF,GA3BM,CAAP;AA4BD;;AAED,SAASS,KAAT,CAAgBD,IAAhB,EAAsB;AACpB,MAAID,SAASC,KAAKD,MAAlB;AACA,MAAIS,QAAQ,EAAZ;;AAEA,OAAK,IAAIL,IAAI,CAAb,EAAgBA,IAAIJ,MAApB,EAA4BI,GAA5B;AAAiCK,UAAML,CAAN,IAAWH,KAAKG,CAAL,CAAX;AAAjC,GACA,OAAOK,KAAP;AACD","file":"inflight.js","sourcesContent":["var wrappy = require('wrappy')\nvar reqs = Object.create(null)\nvar once = require('once')\n\nmodule.exports = wrappy(inflight)\n\nfunction inflight (key, cb) {\n  if (reqs[key]) {\n    reqs[key].push(cb)\n    return null\n  } else {\n    reqs[key] = [cb]\n    return makeres(key)\n  }\n}\n\nfunction makeres (key) {\n  return once(function RES () {\n    var cbs = reqs[key]\n    var len = cbs.length\n    var args = slice(arguments)\n\n    // XXX It's somewhat ambiguous whether a new callback added in this\n    // pass should be queued for later execution if something in the\n    // list of callbacks throws, or if it should just be discarded.\n    // However, it's such an edge case that it hardly matters, and either\n    // choice is likely as surprising as the other.\n    // As it happens, we do go ahead and schedule it for later execution.\n    try {\n      for (var i = 0; i < len; i++) {\n        cbs[i].apply(null, args)\n      }\n    } finally {\n      if (cbs.length > len) {\n        // added more in the interim.\n        // de-zalgo, just in case, but don't call again.\n        cbs.splice(0, len)\n        process.nextTick(function () {\n          RES.apply(null, args)\n        })\n      } else {\n        delete reqs[key]\n      }\n    }\n  })\n}\n\nfunction slice (args) {\n  var length = args.length\n  var array = []\n\n  for (var i = 0; i < length; i++) array[i] = args[i]\n  return array\n}\n"]}