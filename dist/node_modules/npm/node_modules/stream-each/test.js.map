{"version":3,"sources":["../../../../../node_modules/npm/node_modules/stream-each/test.js"],"names":["tape","require","through","each","t","s","obj","write","end","on","expected","data","next","same","shift","setTimeout","err","message","Error","undefined","count","i","cb","fail","error"],"mappings":"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","file":"test.js","sourcesContent":["var tape = require('tape')\nvar through = require('through2')\nvar each = require('./')\n\ntape('each', function (t) {\n  var s = through.obj()\n  s.write('a')\n  s.write('b')\n  s.write('c')\n  s.end()\n\n  s.on('end', function () {\n    t.end()\n  })\n\n  var expected = ['a', 'b', 'c']\n  each(s, function (data, next) {\n    t.same(data, expected.shift())\n    next()\n  })\n})\n\ntape('each and callback', function (t) {\n  var s = through.obj()\n  s.write('a')\n  s.write('b')\n  s.write('c')\n  s.end()\n\n  var expected = ['a', 'b', 'c']\n  each(s, function (data, next) {\n    t.same(data, expected.shift())\n    next()\n  }, function () {\n    t.end()\n  })\n})\n\ntape('each (write after)', function (t) {\n  var s = through.obj()\n  s.on('end', function () {\n    t.end()\n  })\n\n  var expected = ['a', 'b', 'c']\n  each(s, function (data, next) {\n    t.same(data, expected.shift())\n    next()\n  })\n\n  setTimeout(function () {\n    s.write('a')\n    s.write('b')\n    s.write('c')\n    s.end()\n  }, 100)\n})\n\ntape('each error', function (t) {\n  var s = through.obj()\n  s.write('hello')\n  s.on('error', function (err) {\n    t.same(err.message, 'stop')\n    t.end()\n  })\n\n  each(s, function (data, next) {\n    next(new Error('stop'))\n  })\n})\n\ntape('each error and callback', function (t) {\n  var s = through.obj()\n  s.write('hello')\n\n  each(s, function (data, next) {\n    next(new Error('stop'))\n  }, function (err) {\n    t.same(err.message, 'stop')\n    t.end()\n  })\n})\n\ntape('each with falsey values', function (t) {\n  var s = through.obj()\n  s.write(0)\n  s.write(false)\n  s.write(undefined)\n  s.end()\n\n  s.on('end', function () {\n    t.end()\n  })\n\n  var expected = [0, false]\n  var count = 0\n  each(s, function (data, next) {\n    count++\n    t.same(data, expected.shift())\n    next()\n  }, function () {\n    t.same(count, 2)\n  })\n})\n\ntape('huge stack', function (t) {\n  var s = through.obj()\n\n  for (var i = 0; i < 5000; i++) {\n    s.write('foo')\n  }\n\n  s.end()\n\n  each(s, function (data, cb) {\n    if (data !== 'foo') t.fail('bad data')\n    cb()\n  }, function (err) {\n    t.error(err, 'no error')\n    t.end()\n  })\n})\n"]}