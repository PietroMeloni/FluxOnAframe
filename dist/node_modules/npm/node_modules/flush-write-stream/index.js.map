{"version":3,"sources":["../../../../../node_modules/npm/node_modules/flush-write-stream/index.js"],"names":["stream","require","inherits","SIGNAL_FLUSH","Buffer","from","Uint8Array","module","exports","WriteStream","opts","write","flush","Writable","call","destroyed","_worker","_flush","obj","worker","objectMode","prototype","_write","data","enc","cb","end","apply","arguments","_writableState","ending","destroy","err","emit"],"mappings":"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","file":"index.js","sourcesContent":["var stream = require('readable-stream')\nvar inherits = require('inherits')\n\nvar SIGNAL_FLUSH =(Buffer.from && Buffer.from !== Uint8Array.from)\n  ? Buffer.from([0])\n  : new Buffer([0])\n\nmodule.exports = WriteStream\n\nfunction WriteStream (opts, write, flush) {\n  if (!(this instanceof WriteStream)) return new WriteStream(opts, write, flush)\n\n  if (typeof opts === 'function') {\n    flush = write\n    write = opts\n    opts = {}\n  }\n\n  stream.Writable.call(this, opts)\n\n  this.destroyed = false\n  this._worker = write || null\n  this._flush = flush || null\n}\n\ninherits(WriteStream, stream.Writable)\n\nWriteStream.obj = function (opts, worker, flush) {\n  if (typeof opts === 'function') return WriteStream.obj(null, opts, worker)\n  if (!opts) opts = {}\n  opts.objectMode = true\n  return new WriteStream(opts, worker, flush)\n}\n\nWriteStream.prototype._write = function (data, enc, cb) {\n  if (SIGNAL_FLUSH === data) this._flush(cb)\n  else this._worker(data, enc, cb)\n}\n\nWriteStream.prototype.end = function (data, enc, cb) {\n  if (!this._flush) return stream.Writable.prototype.end.apply(this, arguments)\n  if (typeof data === 'function') return this.end(null, null, data)\n  if (typeof enc === 'function') return this.end(data, null, enc)\n  if (data) this.write(data)\n  if (!this._writableState.ending) this.write(SIGNAL_FLUSH)\n  return stream.Writable.prototype.end.call(this, cb)\n}\n\nWriteStream.prototype.destroy = function (err) {\n  if (this.destroyed) return\n  this.destroyed = true\n  if (err) this.emit('error', err)\n  this.emit('close')\n}\n"]}