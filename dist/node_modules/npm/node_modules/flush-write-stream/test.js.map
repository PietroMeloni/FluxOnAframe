{"version":3,"sources":["../../../../../node_modules/npm/node_modules/flush-write-stream/test.js"],"names":["tape","require","writer","t","expected","ws","obj","write","end","same","length","data","enc","cb","shift","flushed","flush","ok","process","nextTick","objectMode","Error","on","err","equal","destroy"],"mappings":"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","file":"test.js","sourcesContent":["var tape = require('tape')\nvar writer = require('./')\n\ntape('is a write stream', function (t) {\n  var expected = ['hello', 'world', 'verden']\n  var ws = writer.obj(write)\n\n  ws.write('hello')\n  ws.write('world')\n  ws.write('verden')\n  ws.end(function () {\n    t.same(expected.length, 0)\n    t.end()\n  })\n\n  function write (data, enc, cb) {\n    t.same(data, expected.shift())\n    cb()\n  }\n})\n\ntape('is flushable', function (t) {\n  var expected = ['hello', 'world', 'verden']\n  var flushed = false\n\n  var ws = writer.obj(write, flush)\n\n  ws.write('hello')\n  ws.write('world')\n  ws.write('verden')\n  ws.end(function () {\n    t.same(expected.length, 0)\n    t.ok(flushed, 'was flushed')\n    t.end()\n  })\n\n  function write (data, enc, cb) {\n    t.same(data, expected.shift())\n    cb()\n  }\n\n  function flush (cb) {\n    flushed = true\n    process.nextTick(cb)\n  }\n})\n\ntape('can pass options', function (t) {\n  var expected = ['hello', 'world', 'verden']\n  var flushed = false\n\n  var ws = writer({objectMode: true}, write, flush)\n\n  ws.write('hello')\n  ws.write('world')\n  ws.write('verden')\n  ws.end(function () {\n    t.same(expected.length, 0)\n    t.ok(flushed, 'was flushed')\n    t.end()\n  })\n\n  function write (data, enc, cb) {\n    t.same(data, expected.shift())\n    cb()\n  }\n\n  function flush (cb) {\n    flushed = true\n    process.nextTick(cb)\n  }\n})\n\ntape('emits error on destroy', function (t) {\n  var expected = new Error()\n\n  var ws = writer({objectMode: true}, function () {})\n\n  ws.on('error', function (err) {\n    t.equal(err, expected)\n  })\n  ws.on('close', t.end)\n\n  ws.destroy(expected)\n})\n"]}