{"version":3,"sources":["../../../../../../../node_modules/npm/node_modules/npm-registry-fetch/node_modules/figgy-pudding/index.js"],"names":["FiggyPudding","specs","opts","providers","isFiggyPudding","key","pudGet","pud","validate","spec","other","Error","ret","p","get","undefined","default","module","exports","figgyPudding","factory","slice","call","arguments","filter","x"],"mappings":"AAAA;;;;;;;;IAEMA,Y;AACJ,wBAAaC,KAAb,EAAoBC,IAApB,EAA0BC,SAA1B,EAAqC;AAAA;;AACnC,SAAKF,KAAL,GAAaA,SAAS,EAAtB;AACA,SAAKC,IAAL,GAAYA,QAAS;AAAA,aAAM,KAAN;AAAA,KAArB;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACA,SAAKC,cAAL,GAAsB,IAAtB;AACD;;;;wBACIC,G,EAAK;AACR,aAAOC,OAAO,IAAP,EAAaD,GAAb,EAAkB,IAAlB,CAAP;AACD;;;;;;AAGH,SAASC,MAAT,CAAiBC,GAAjB,EAAsBF,GAAtB,EAA2BG,QAA3B,EAAqC;AACnC,MAAIC,OAAOF,IAAIN,KAAJ,CAAUI,GAAV,CAAX;AACA,MAAI,OAAOI,IAAP,KAAgB,QAApB,EAA8B;AAC5BJ,UAAMI,IAAN;AACAA,WAAOF,IAAIN,KAAJ,CAAUI,GAAV,CAAP;AACD;AACD,MAAIG,YAAY,CAACC,IAAb,KAAsB,CAACF,IAAIL,IAAJ,CAASQ,KAAV,IAAmB,CAACH,IAAIL,IAAJ,CAASQ,KAAT,CAAeL,GAAf,CAA1C,CAAJ,EAAoE;AAClE,UAAM,IAAIM,KAAJ,oCAA2CN,GAA3C,CAAN;AACD,GAFD,MAEO;AACL,QAAI,CAACI,IAAL,EAAW;AAAEA,aAAO,EAAP;AAAW;AACxB,QAAIG,YAAJ;AAFK;AAAA;AAAA;;AAAA;AAGL,2BAAcL,IAAIJ,SAAlB,8HAA6B;AAAA,YAApBU,CAAoB;;AAC3B,YAAIA,EAAET,cAAN,EAAsB;AACpBQ,gBAAMN,OAAOO,CAAP,EAAUR,GAAV,EAAe,KAAf,CAAN;AACD,SAFD,MAEO,IAAI,OAAOQ,EAAEC,GAAT,KAAiB,UAArB,EAAiC;AACtCF,gBAAMC,EAAEC,GAAF,CAAMT,GAAN,CAAN;AACD,SAFM,MAEA;AACLO,gBAAMC,EAAER,GAAF,CAAN;AACD;AACD,YAAIO,QAAQG,SAAZ,EAAuB;AACrB;AACD;AACF;AAdI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAeL,QAAIH,QAAQG,SAAR,IAAqBN,KAAKO,OAAL,KAAiBD,SAA1C,EAAqD;AACnD,UAAI,OAAON,KAAKO,OAAZ,KAAwB,UAA5B,EAAwC;AACtC,eAAOP,KAAKO,OAAL,EAAP;AACD,OAFD,MAEO;AACL,eAAOP,KAAKO,OAAZ;AACD;AACF,KAND,MAMO;AACL,aAAOJ,GAAP;AACD;AACF;AACF;;AAEDK,OAAOC,OAAP,GAAiBC,YAAjB;AACA,SAASA,YAAT,CAAuBlB,KAAvB,EAA8BC,IAA9B,EAAoC;AAClC,WAASkB,OAAT,GAAoB;AAClB,WAAO,IAAIpB,YAAJ,CACLC,KADK,EAELC,IAFK,EAGL,GAAGmB,KAAH,CAASC,IAAT,CAAcC,SAAd,EAAyBC,MAAzB,CAAgC;AAAA,aAAKC,KAAK,IAAL,IAAa,QAAOA,CAAP,yCAAOA,CAAP,OAAa,QAA/B;AAAA,KAAhC,CAHK,CAAP;AAKD;AACD,SAAOL,OAAP;AACD","file":"index.js","sourcesContent":["'use strict'\n\nclass FiggyPudding {\n  constructor (specs, opts, providers) {\n    this.specs = specs || {}\n    this.opts = opts || (() => false)\n    this.providers = providers\n    this.isFiggyPudding = true\n  }\n  get (key) {\n    return pudGet(this, key, true)\n  }\n}\n\nfunction pudGet (pud, key, validate) {\n  let spec = pud.specs[key]\n  if (typeof spec === 'string') {\n    key = spec\n    spec = pud.specs[key]\n  }\n  if (validate && !spec && (!pud.opts.other || !pud.opts.other(key))) {\n    throw new Error(`invalid config key requested: ${key}`)\n  } else {\n    if (!spec) { spec = {} }\n    let ret\n    for (let p of pud.providers) {\n      if (p.isFiggyPudding) {\n        ret = pudGet(p, key, false)\n      } else if (typeof p.get === 'function') {\n        ret = p.get(key)\n      } else {\n        ret = p[key]\n      }\n      if (ret !== undefined) {\n        break\n      }\n    }\n    if (ret === undefined && spec.default !== undefined) {\n      if (typeof spec.default === 'function') {\n        return spec.default()\n      } else {\n        return spec.default\n      }\n    } else {\n      return ret\n    }\n  }\n}\n\nmodule.exports = figgyPudding\nfunction figgyPudding (specs, opts) {\n  function factory () {\n    return new FiggyPudding(\n      specs,\n      opts,\n      [].slice.call(arguments).filter(x => x != null && typeof x === 'object')\n    )\n  }\n  return factory\n}\n"]}