{"version":3,"sources":["../../../../../../../node_modules/npm/node_modules/worker-farm/lib/child/index.js"],"names":["$module","handle","data","idx","child","method","args","callback","_args","Array","prototype","slice","call","arguments","Error","e","constructor","name","message","stack","Object","keys","forEach","key","process","send","exec","console","error","apply","concat","on","require","module","exit"],"mappings":"AAAA;;AAEA,IAAIA,gBAAJ;;AAEA;;;;;;;AAQA,SAASC,MAAT,CAAiBC,IAAjB,EAAuB;AACrB,MAAIC,MAAWD,KAAKC,GAApB;AAAA,MACIC,QAAWF,KAAKE,KADpB;AAAA,MAEIC,SAAWH,KAAKG,MAFpB;AAAA,MAGIC,OAAWJ,KAAKI,IAHpB;AAAA,MAIIC,WAAW,SAAXA,QAAW,GAAY;AACrB,QAAIC,QAAQC,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAZ;AACA,QAAIL,MAAM,CAAN,aAAoBM,KAAxB,EAA+B;AAC7B,UAAIC,IAAIP,MAAM,CAAN,CAAR;AACAA,YAAM,CAAN,IAAW;AACP,kBAAY,QADL;AAEP,gBAAYO,EAAEC,WAAF,CAAcC,IAFnB;AAGP,mBAAYF,EAAEG,OAHP;AAIP,iBAAYH,EAAEI;AAJP,OAAX;AAMAC,aAAOC,IAAP,CAAYN,CAAZ,EAAeO,OAAf,CAAuB,UAASC,GAAT,EAAc;AACnCf,cAAM,CAAN,EAASe,GAAT,IAAgBR,EAAEQ,GAAF,CAAhB;AACD,OAFD;AAGD;AACDC,YAAQC,IAAR,CAAa,EAAEtB,KAAKA,GAAP,EAAYC,OAAOA,KAAnB,EAA0BE,MAAME,KAAhC,EAAb;AACD,GAnBL;AAAA,MAoBIkB,aApBJ;;AAsBA,MAAIrB,UAAU,IAAV,IAAkB,OAAOL,OAAP,IAAkB,UAAxC,EACE0B,OAAO1B,OAAP,CADF,KAEK,IAAI,OAAOA,QAAQK,MAAR,CAAP,IAA0B,UAA9B,EACHqB,OAAO1B,QAAQK,MAAR,CAAP;;AAEF,MAAI,CAACqB,IAAL,EACE,OAAOC,QAAQC,KAAR,CAAc,iBAAd,EAAiCvB,MAAjC,CAAP;;AAEFqB,OAAKG,KAAL,CAAW,IAAX,EAAiBvB,KAAKwB,MAAL,CAAY,CAAEvB,QAAF,CAAZ,CAAjB;AACD;;AAGDiB,QAAQO,EAAR,CAAW,SAAX,EAAsB,UAAU7B,IAAV,EAAgB;AACpC,MAAI,CAACF,OAAL,EAAc,OAAOA,UAAUgC,QAAQ9B,KAAK+B,MAAb,CAAjB;AACd,MAAI/B,QAAQ,KAAZ,EAAmB,OAAOsB,QAAQU,IAAR,CAAa,CAAb,CAAP;AACnBjC,SAAOC,IAAP;AACD,CAJD","file":"index.js","sourcesContent":["'use strict'\n\nlet $module\n\n/*\n  let contextProto = this.context;\n  while (contextProto = Object.getPrototypeOf(contextProto)) {\n    completionGroups.push(Object.getOwnPropertyNames(contextProto));\n  }\n*/\n\n\nfunction handle (data) {\n  let idx      = data.idx\n    , child    = data.child\n    , method   = data.method\n    , args     = data.args\n    , callback = function () {\n        let _args = Array.prototype.slice.call(arguments)\n        if (_args[0] instanceof Error) {\n          let e = _args[0]\n          _args[0] = {\n              '$error'  : '$error'\n            , 'type'    : e.constructor.name\n            , 'message' : e.message\n            , 'stack'   : e.stack\n          }\n          Object.keys(e).forEach(function(key) {\n            _args[0][key] = e[key]\n          })\n        }\n        process.send({ idx: idx, child: child, args: _args })\n      }\n    , exec\n\n  if (method == null && typeof $module == 'function')\n    exec = $module\n  else if (typeof $module[method] == 'function')\n    exec = $module[method]\n\n  if (!exec)\n    return console.error('NO SUCH METHOD:', method)\n\n  exec.apply(null, args.concat([ callback ]))\n}\n\n\nprocess.on('message', function (data) {\n  if (!$module) return $module = require(data.module)\n  if (data == 'die') return process.exit(0)\n  handle(data)\n})\n"]}